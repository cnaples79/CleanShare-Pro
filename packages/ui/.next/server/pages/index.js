/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/index";
exports.ids = ["pages/index"];
exports.modules = {

/***/ "./pages/_app.tsx":
/*!************************!*\
  !*** ./pages/_app.tsx ***!
  \************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ App)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../styles/globals.css */ \"./styles/globals.css\");\n/* harmony import */ var _styles_globals_css__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(_styles_globals_css__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nfunction App({\n  Component,\n  pageProps\n}) {\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    // Initialize any global app state here\n    console.log('CleanShare Pro UI initialized');\n  }, []);\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_2__.jsx)(Component, {\n    ...pageProps\n  });\n}//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi9wYWdlcy9fYXBwLnRzeCIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7O0FBQ2lDO0FBQ0g7QUFBQTtBQUVmLFNBQVNHLEdBQUdBLENBQUM7RUFBRUMsU0FBUztFQUFFQztBQUFvQixDQUFDLEVBQUU7RUFDOURMLGdEQUFTLENBQUMsTUFBTTtJQUNkO0lBQ0FNLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDLCtCQUErQixDQUFDO0VBQzlDLENBQUMsRUFBRSxFQUFFLENBQUM7RUFFTixvQkFBT0wsc0RBQUEsQ0FBQ0UsU0FBUztJQUFBLEdBQUtDO0VBQVMsQ0FBRyxDQUFDO0FBQ3JDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNsZWFuc2hhcmUvdWkvLi9wYWdlcy9fYXBwLnRzeD8yZmJlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB0eXBlIHsgQXBwUHJvcHMgfSBmcm9tICduZXh0L2FwcCdcbmltcG9ydCB7IHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0J1xuaW1wb3J0ICcuLi9zdHlsZXMvZ2xvYmFscy5jc3MnXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIEFwcCh7IENvbXBvbmVudCwgcGFnZVByb3BzIH06IEFwcFByb3BzKSB7XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgLy8gSW5pdGlhbGl6ZSBhbnkgZ2xvYmFsIGFwcCBzdGF0ZSBoZXJlXG4gICAgY29uc29sZS5sb2coJ0NsZWFuU2hhcmUgUHJvIFVJIGluaXRpYWxpemVkJyk7XG4gIH0sIFtdKTtcblxuICByZXR1cm4gPENvbXBvbmVudCB7Li4ucGFnZVByb3BzfSAvPlxufSJdLCJuYW1lcyI6WyJ1c2VFZmZlY3QiLCJqc3giLCJfanN4IiwiQXBwIiwiQ29tcG9uZW50IiwicGFnZVByb3BzIiwiY29uc29sZSIsImxvZyJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///./pages/_app.tsx\n");

/***/ }),

/***/ "./pages/index.tsx":
/*!*************************!*\
  !*** ./pages/index.tsx ***!
  \*************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ CleanSharePro)\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"react\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @cleanshare/core-detect */ \"../core-detect/dist/index.js\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! react/jsx-runtime */ \"react/jsx-runtime\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__]);\n_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n// CleanShare Pro - Modern UI Implementation\n\n\n\nfunction CleanSharePro() {\n  const [files, setFiles] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [fileStates, setFileStates] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [currentFileIndex, setCurrentFileIndex] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(0);\n  const [presets, setPresets] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)([]);\n  const [presetId, setPresetId] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)('');\n  const [loading, setLoading] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [proUnlocked, setProUnlocked] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n  const [showPresetEditor, setShowPresetEditor] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)(false);\n\n  // Load presets on mount\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    const ps = (0,_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__.listPresets)();\n    setPresets(ps);\n    if (ps.length > 0) {\n      setPresetId(ps[0].id);\n    }\n  }, []);\n\n  // Process files when they change\n  (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(() => {\n    if (files.length === 0) return;\n    async function processFiles() {\n      setLoading(true);\n      const newStates = [];\n      for (const file of files) {\n        try {\n          const result = await (0,_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__.analyzeDocument)(file, {\n            presetId\n          });\n          const selected = {};\n          const actions = {};\n          result.detections.forEach(det => {\n            selected[det.id] = true;\n            actions[det.id] = {\n              style: 'BOX'\n            };\n          });\n          newStates.push({\n            file,\n            detections: result.detections,\n            selected,\n            actions,\n            pages: result.pages || 1,\n            pageImages: [],\n            currentPage: 0,\n            processing: false\n          });\n        } catch (error) {\n          console.error('Failed to process file:', file.name, error);\n          // Add the file with error state\n          newStates.push({\n            file,\n            detections: [],\n            selected: {},\n            actions: {},\n            pages: 1,\n            pageImages: [],\n            currentPage: 0,\n            processing: false,\n            error: error instanceof Error ? error.message : 'Unknown error'\n          });\n        }\n      }\n      setFileStates(newStates);\n      setLoading(false);\n    }\n    processFiles();\n  }, [files, presetId]);\n  const handleFileChange = e => {\n    const selectedFiles = Array.from(e.target.files || []);\n    setFiles(selectedFiles);\n    setCurrentFileIndex(0);\n  };\n  const handleDrop = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    const droppedFiles = Array.from(e.dataTransfer.files);\n    setFiles(droppedFiles);\n    setCurrentFileIndex(0);\n  };\n  const handleDragOver = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleDragLeave = e => {\n    e.preventDefault();\n    e.stopPropagation();\n  };\n  const handleSanitize = async fileIndex => {\n    const fileState = fileStates[fileIndex];\n    if (!fileState) return;\n\n    // Update processing state\n    setFileStates(prev => prev.map((state, i) => i === fileIndex ? {\n      ...state,\n      processing: true\n    } : state));\n    try {\n      // Re-analyze the file to ensure lastResult is set correctly  \n      await (0,_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__.analyzeDocument)(fileState.file, {\n        presetId\n      });\n      const redactionActions = fileState.detections.filter(det => fileState.selected[det.id]).map(det => ({\n        detectionId: det.id,\n        style: fileState.actions[det.id]?.style || 'BOX',\n        labelText: fileState.actions[det.id]?.labelText\n      }));\n      const result = await (0,_cleanshare_core_detect__WEBPACK_IMPORTED_MODULE_2__.applyRedactions)(fileState.file, redactionActions, {\n        style: 'BOX'\n      }, fileState.detections);\n\n      // Convert data URI to blob for download\n      const response = await fetch(result.fileUri);\n      const blob = await response.blob();\n      const url = URL.createObjectURL(blob);\n\n      // Update file state with result\n      setFileStates(prev => prev.map((state, i) => i === fileIndex ? {\n        ...state,\n        outputUri: url,\n        previewUri: result.fileUri,\n        processing: false\n      } : state));\n    } catch (error) {\n      console.error('Sanitization failed:', error);\n      // Show error to user\n      alert(`Sanitization failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n      setFileStates(prev => prev.map((state, i) => i === fileIndex ? {\n        ...state,\n        processing: false\n      } : state));\n    }\n  };\n  const handleDownload = fileIndex => {\n    const fileState = fileStates[fileIndex];\n    if (!fileState?.outputUri) return;\n    const link = document.createElement('a');\n    link.href = fileState.outputUri;\n    link.download = `sanitized_${fileState.file.name}`;\n    link.click();\n  };\n  const currentFileState = fileStates[currentFileIndex];\n  return /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n    className: \"app-container\",\n    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"header\", {\n      className: \"header\",\n      children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n        className: \"header-content\",\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"a\", {\n          href: \"#\",\n          className: \"logo\",\n          children: \"CleanShare Pro\"\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n          style: {\n            display: 'flex',\n            alignItems: 'center',\n            gap: 'var(--space-md)'\n          },\n          children: [presets.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"select\", {\n            value: presetId,\n            onChange: e => setPresetId(e.target.value),\n            className: \"form-select\",\n            style: {\n              minWidth: '150px'\n            },\n            children: presets.map(p => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"option\", {\n              value: p.id,\n              children: p.name\n            }, p.id))\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n            onClick: () => setProUnlocked(!proUnlocked),\n            className: `btn ${proUnlocked ? 'btn-secondary' : 'btn-outline'} btn-sm`,\n            children: proUnlocked ? '✓ Pro Unlocked' : '🔓 Unlock Pro'\n          }), proUnlocked && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n            onClick: () => setShowPresetEditor(true),\n            className: \"btn btn-primary btn-sm\",\n            children: \"Manage Presets\"\n          })]\n        })]\n      })\n    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n      className: \"main-content\",\n      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n        className: \"card\",\n        style: {\n          marginBottom: 'var(--space-xl)'\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n          className: \"card-header\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"h2\", {\n            className: \"card-title\",\n            children: \"Upload Files\"\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n            className: \"card-subtitle\",\n            children: \"Select images or PDF documents to sanitize\"\n          })]\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n          className: \"card-body\",\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n            className: \"file-upload-zone\",\n            onDrop: handleDrop,\n            onDragOver: handleDragOver,\n            onDragLeave: handleDragLeave,\n            onClick: () => document.getElementById('file-input')?.click(),\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n              className: \"file-upload-icon\",\n              children: \"\\uD83D\\uDCC4\"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n              className: \"file-upload-text\",\n              children: \"Drop files here or click to browse\"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n              className: \"file-upload-subtext\",\n              children: \"Supports JPG, PNG, PDF files up to 10MB each\"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"input\", {\n              id: \"file-input\",\n              type: \"file\",\n              accept: \"image/*,application/pdf\",\n              multiple: true,\n              onChange: handleFileChange,\n              style: {\n                display: 'none'\n              }\n            })]\n          }), loading && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n            className: \"loading-text\",\n            style: {\n              marginTop: 'var(--space-md)'\n            },\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n              className: \"loading-spinner\"\n            }), \"Processing files...\"]\n          })]\n        })]\n      }), fileStates.length > 0 && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n        style: {\n          display: 'flex',\n          gap: 'var(--space-xl)'\n        },\n        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n          className: \"sidebar\",\n          style: {\n            minWidth: '250px'\n          },\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"h3\", {\n            className: \"sidebar-title\",\n            children: [\"Files (\", fileStates.length, \")\"]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n            style: {\n              display: 'flex',\n              flexDirection: 'column',\n              gap: 'var(--space-sm)'\n            },\n            children: fileStates.map((state, index) => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n              onClick: () => setCurrentFileIndex(index),\n              style: {\n                padding: 'var(--space-md)',\n                border: `2px solid ${index === currentFileIndex ? 'var(--color-primary)' : 'var(--border-light)'}`,\n                borderRadius: 'var(--radius-md)',\n                cursor: 'pointer',\n                background: index === currentFileIndex ? 'var(--bg-secondary)' : 'var(--bg-primary)',\n                transition: 'all var(--transition-fast)'\n              },\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                style: {\n                  fontWeight: '600',\n                  fontSize: 'var(--font-size-sm)',\n                  marginBottom: 'var(--space-xs)'\n                },\n                children: state.file.name\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                style: {\n                  fontSize: 'var(--font-size-xs)',\n                  color: state.error ? 'var(--color-error)' : 'var(--text-secondary)'\n                },\n                children: state.error ? `Error: ${state.error}` : `${state.detections.length} detections found`\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                style: {\n                  marginTop: 'var(--space-sm)',\n                  display: 'flex',\n                  gap: 'var(--space-xs)'\n                },\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleSanitize(index);\n                  },\n                  className: \"btn btn-primary btn-sm\",\n                  disabled: state.processing || !!state.error,\n                  style: {\n                    flex: 1\n                  },\n                  children: state.processing ? 'Processing...' : 'Sanitize'\n                }), state.outputUri && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n                  onClick: e => {\n                    e.stopPropagation();\n                    handleDownload(index);\n                  },\n                  className: \"btn btn-secondary btn-sm\",\n                  children: \"Download\"\n                })]\n              })]\n            }, index))\n          })]\n        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n          style: {\n            flex: 1\n          },\n          children: currentFileState && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n            className: \"card\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n              className: \"card-header\",\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"h3\", {\n                className: \"card-title\",\n                children: currentFileState.file.name\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n                className: \"card-subtitle\",\n                children: currentFileState.error ? 'Processing failed' : `Found ${currentFileState.detections.length} sensitive items`\n              })]\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n              className: \"card-body\",\n              children: currentFileState.error ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                className: \"alert alert-error\",\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"strong\", {\n                    children: \"Processing Error\"\n                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"p\", {\n                    style: {\n                      margin: '0',\n                      marginTop: 'var(--space-xs)'\n                    },\n                    children: [\"Failed to analyze this file: \", currentFileState.error]\n                  })]\n                })\n              }) : currentFileState.detections.length > 0 ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"h4\", {\n                  style: {\n                    marginBottom: 'var(--space-md)',\n                    fontSize: 'var(--font-size-lg)'\n                  },\n                  children: \"Detected Sensitive Information\"\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                  style: {\n                    display: 'flex',\n                    flexDirection: 'column',\n                    gap: 'var(--space-sm)'\n                  },\n                  children: currentFileState.detections.map(detection => /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                    style: {\n                      padding: 'var(--space-md)',\n                      border: '1px solid var(--border-light)',\n                      borderRadius: 'var(--radius-md)',\n                      background: 'var(--bg-secondary)',\n                      display: 'flex',\n                      alignItems: 'center',\n                      justifyContent: 'space-between'\n                    },\n                    children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                      style: {\n                        display: 'flex',\n                        alignItems: 'center',\n                        gap: 'var(--space-md)'\n                      },\n                      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"input\", {\n                        type: \"checkbox\",\n                        checked: currentFileState.selected[detection.id] || false,\n                        onChange: e => {\n                          setFileStates(prev => prev.map((state, i) => i === currentFileIndex ? {\n                            ...state,\n                            selected: {\n                              ...state.selected,\n                              [detection.id]: e.target.checked\n                            }\n                          } : state));\n                        }\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                        children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                          style: {\n                            fontWeight: '600',\n                            fontSize: 'var(--font-size-sm)'\n                          },\n                          children: [detection.kind, \": \", detection.preview || 'N/A']\n                        }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                          style: {\n                            fontSize: 'var(--font-size-xs)',\n                            color: 'var(--text-secondary)'\n                          },\n                          children: [\"Confidence: \", Math.round(detection.confidence * 100), \"%\"]\n                        })]\n                      })]\n                    }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"select\", {\n                      value: currentFileState.actions[detection.id]?.style || 'BOX',\n                      onChange: e => {\n                        setFileStates(prev => prev.map((state, i) => i === currentFileIndex ? {\n                          ...state,\n                          actions: {\n                            ...state.actions,\n                            [detection.id]: {\n                              ...state.actions[detection.id],\n                              style: e.target.value\n                            }\n                          }\n                        } : state));\n                      },\n                      className: \"form-select\",\n                      style: {\n                        minWidth: '120px'\n                      },\n                      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"option\", {\n                        value: \"BOX\",\n                        children: \"Black Box\"\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"option\", {\n                        value: \"BLUR\",\n                        children: \"Blur\"\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"option\", {\n                        value: \"PIXELATE\",\n                        children: \"Pixelate\"\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"option\", {\n                        value: \"LABEL\",\n                        children: \"Label\"\n                      })]\n                    })]\n                  }, detection.id))\n                }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                  className: \"card-footer\",\n                  style: {\n                    marginTop: 'var(--space-xl)'\n                  },\n                  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n                    onClick: () => handleSanitize(currentFileIndex),\n                    className: \"btn btn-primary btn-lg\",\n                    disabled: currentFileState.processing,\n                    children: currentFileState.processing ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n                      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                        className: \"loading-spinner\",\n                        style: {\n                          width: '1rem',\n                          height: '1rem'\n                        }\n                      }), \"Processing...\"]\n                    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.Fragment, {\n                      children: \"\\uD83D\\uDD12 Sanitize Document\"\n                    })\n                  }), currentFileState.outputUri && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n                    onClick: () => handleDownload(currentFileIndex),\n                    className: \"btn btn-secondary btn-lg\",\n                    children: \"\\uD83D\\uDCE5 Download Clean File\"\n                  })]\n                }), currentFileState.previewUri && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                  style: {\n                    marginTop: 'var(--space-xl)',\n                    padding: 'var(--space-lg)',\n                    background: 'var(--bg-secondary)',\n                    borderRadius: 'var(--radius-md)',\n                    border: '1px solid var(--border-light)'\n                  },\n                  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"h4\", {\n                    style: {\n                      marginBottom: 'var(--space-md)',\n                      fontSize: 'var(--font-size-lg)',\n                      color: 'var(--color-primary)'\n                    },\n                    children: \"\\uD83D\\uDD12 Sanitized Preview\"\n                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                    style: {\n                      display: 'flex',\n                      justifyContent: 'center',\n                      alignItems: 'center',\n                      padding: 'var(--space-md)',\n                      background: 'var(--bg-primary)',\n                      borderRadius: 'var(--radius-md)',\n                      border: '1px solid var(--border-light)'\n                    },\n                    children: currentFileState.file.type.startsWith('image/') ? /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"img\", {\n                      src: currentFileState.previewUri,\n                      alt: \"Sanitized preview\",\n                      style: {\n                        maxWidth: '100%',\n                        maxHeight: '400px',\n                        borderRadius: 'var(--radius-sm)',\n                        boxShadow: 'var(--shadow-md)'\n                      }\n                    }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                      style: {\n                        textAlign: 'center',\n                        padding: 'var(--space-xl)',\n                        color: 'var(--text-secondary)'\n                      },\n                      children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                        style: {\n                          fontSize: 'var(--font-size-3xl)',\n                          marginBottom: 'var(--space-md)'\n                        },\n                        children: \"\\uD83D\\uDCC4\"\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n                        children: \"PDF sanitized successfully\"\n                      }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n                        style: {\n                          fontSize: 'var(--font-size-sm)'\n                        },\n                        children: \"Click download to save the clean file\"\n                      })]\n                    })\n                  })]\n                })]\n              }) : /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n                className: \"alert alert-success\",\n                children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n                  children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"strong\", {\n                    children: \"No sensitive information detected!\"\n                  }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n                    style: {\n                      margin: '0',\n                      marginTop: 'var(--space-xs)'\n                    },\n                    children: \"This document appears to be clean and safe to share.\"\n                  })]\n                })\n              })\n            })]\n          })\n        })]\n      }), showPresetEditor && proUnlocked && /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n        style: {\n          position: 'fixed',\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          background: 'rgba(0, 0, 0, 0.5)',\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n          zIndex: 1000\n        },\n        children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n          className: \"card\",\n          style: {\n            minWidth: '500px',\n            maxWidth: '90vw',\n            maxHeight: '90vh',\n            overflow: 'auto'\n          },\n          children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n            className: \"card-header\",\n            children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"h3\", {\n              className: \"card-title\",\n              children: \"Manage Presets\"\n            }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n              className: \"card-subtitle\",\n              children: \"Create and manage detection presets\"\n            })]\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n            className: \"card-body\",\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)(\"div\", {\n              className: \"alert alert-info\",\n              children: [/*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"strong\", {\n                children: \"Pro Feature\"\n              }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"p\", {\n                style: {\n                  margin: 0,\n                  marginTop: 'var(--space-xs)'\n                },\n                children: \"Preset management is available in the Pro version.\"\n              })]\n            })\n          }), /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"div\", {\n            className: \"card-footer\",\n            children: /*#__PURE__*/(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(\"button\", {\n              onClick: () => setShowPresetEditor(false),\n              className: \"btn btn-ghost\",\n              children: \"Close\"\n            })\n          })]\n        })\n      })]\n    })]\n  });\n}\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVMsRUFBQyxlQUFlO2NBQUFDLFFBQUEsRUFBQztZQUFtQyxDQUFHLENBQUM7VUFBQSxDQUNqRSxDQUFDLGVBQ054RixzREFBQTtZQUFLdUYsU0FBUyxFQUFDLFdBQVc7WUFBQUMsUUFBQSxlQUN4QnRGLHVEQUFBO2NBQUtxRixTQUFTLEVBQUMsa0JBQWtCO2NBQUFDLFFBQUEsZ0JBQy9CeEYsc0RBQUE7Z0JBQUF3RixRQUFBLEVBQVE7Y0FBVyxDQUFRLENBQUMsZUFDNUJ4RixzREFBQTtnQkFBR2tDLEtBQUssRUFBRTtrQkFBRXFGLE1BQU0sRUFBRSxDQUFDO2tCQUFFZCxTQUFTLEVBQUU7Z0JBQWtCLENBQUU7Z0JBQUFqQixRQUFBLEVBQUM7Y0FFdkQsQ0FBRyxDQUFDO1lBQUEsQ0FDRDtVQUFDLENBQ0gsQ0FBQyxlQUNOeEYsc0RBQUE7WUFBS3VGLFNBQVMsRUFBQyxhQUFhO1lBQUFDLFFBQUEsZUFDMUJ4RixzREFBQTtjQUNFZ0csT0FBTyxFQUFFQSxDQUFBLEtBQU0zRSxtQkFBbUIsQ0FBQyxLQUFLLENBQUU7Y0FDMUNrRSxTQUFTLEVBQUMsZUFBZTtjQUFBQyxRQUFBLEVBQzFCO1lBRUQsQ0FBUTtVQUFDLENBQ04sQ0FBQztRQUFBLENBQ0g7TUFBQyxDQUNILENBQ047SUFBQSxDQUNFLENBQUM7RUFBQSxDQUNILENBQUM7QUFFVixDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vQGNsZWFuc2hhcmUvdWkvLi9wYWdlcy9pbmRleC50c3g/MDdmZiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBDbGVhblNoYXJlIFBybyAtIE1vZGVybiBVSSBJbXBsZW1lbnRhdGlvblxuaW1wb3J0IFJlYWN0LCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgdHlwZSB7XG4gIERldGVjdGlvbixcbiAgUmVkYWN0aW9uQWN0aW9uLFxuICBSZWRhY3Rpb25TdHlsZSxcbiAgUHJlc2V0LFxuICBEZXRlY3Rpb25LaW5kXG59IGZyb20gJ0BjbGVhbnNoYXJlL2NvcmUtZGV0ZWN0JztcbmltcG9ydCB7IGFuYWx5emVEb2N1bWVudCwgYXBwbHlSZWRhY3Rpb25zLCBsaXN0UHJlc2V0cywgc2F2ZVByZXNldCwgZGVsZXRlUHJlc2V0IH0gZnJvbSAnQGNsZWFuc2hhcmUvY29yZS1kZXRlY3QnO1xuXG5pbnRlcmZhY2UgRmlsZVN0YXRlIHtcbiAgZmlsZTogRmlsZTtcbiAgZGV0ZWN0aW9uczogRGV0ZWN0aW9uW107XG4gIHNlbGVjdGVkOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPjtcbiAgYWN0aW9uczogUmVjb3JkPHN0cmluZywgeyBzdHlsZTogUmVkYWN0aW9uU3R5bGU7IGxhYmVsVGV4dD86IHN0cmluZyB9PjtcbiAgcGFnZXM6IG51bWJlcjtcbiAgcGFnZUltYWdlczogc3RyaW5nW107XG4gIGN1cnJlbnRQYWdlOiBudW1iZXI7XG4gIG91dHB1dFVyaT86IHN0cmluZztcbiAgcHJldmlld1VyaT86IHN0cmluZzsgLy8gUHJldmlldyBvZiBzYW5pdGl6ZWQgZmlsZVxuICBwcm9jZXNzaW5nPzogYm9vbGVhbjtcbiAgZXJyb3I/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIENsZWFuU2hhcmVQcm8oKSB7XG4gIGNvbnN0IFtmaWxlcywgc2V0RmlsZXNdID0gdXNlU3RhdGU8RmlsZVtdPihbXSk7XG4gIGNvbnN0IFtmaWxlU3RhdGVzLCBzZXRGaWxlU3RhdGVzXSA9IHVzZVN0YXRlPEZpbGVTdGF0ZVtdPihbXSk7XG4gIGNvbnN0IFtjdXJyZW50RmlsZUluZGV4LCBzZXRDdXJyZW50RmlsZUluZGV4XSA9IHVzZVN0YXRlKDApO1xuICBjb25zdCBbcHJlc2V0cywgc2V0UHJlc2V0c10gPSB1c2VTdGF0ZTxQcmVzZXRbXT4oW10pO1xuICBjb25zdCBbcHJlc2V0SWQsIHNldFByZXNldElkXSA9IHVzZVN0YXRlPHN0cmluZz4oJycpO1xuICBjb25zdCBbbG9hZGluZywgc2V0TG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtwcm9VbmxvY2tlZCwgc2V0UHJvVW5sb2NrZWRdID0gdXNlU3RhdGUoZmFsc2UpO1xuICBjb25zdCBbc2hvd1ByZXNldEVkaXRvciwgc2V0U2hvd1ByZXNldEVkaXRvcl0gPSB1c2VTdGF0ZShmYWxzZSk7XG5cbiAgLy8gTG9hZCBwcmVzZXRzIG9uIG1vdW50XG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgY29uc3QgcHMgPSBsaXN0UHJlc2V0cygpO1xuICAgIHNldFByZXNldHMocHMpO1xuICAgIGlmIChwcy5sZW5ndGggPiAwKSB7XG4gICAgICBzZXRQcmVzZXRJZChwc1swXS5pZCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gUHJvY2VzcyBmaWxlcyB3aGVuIHRoZXkgY2hhbmdlXG4gIHVzZUVmZmVjdCgoKSA9PiB7XG4gICAgaWYgKGZpbGVzLmxlbmd0aCA9PT0gMCkgcmV0dXJuO1xuICAgIFxuICAgIGFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGaWxlcygpIHtcbiAgICAgIHNldExvYWRpbmcodHJ1ZSk7XG4gICAgICBjb25zdCBuZXdTdGF0ZXM6IEZpbGVTdGF0ZVtdID0gW107XG4gICAgICBcbiAgICAgIGZvciAoY29uc3QgZmlsZSBvZiBmaWxlcykge1xuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3VsdCA9IGF3YWl0IGFuYWx5emVEb2N1bWVudChmaWxlLCB7IHByZXNldElkIH0pO1xuICAgICAgICAgIGNvbnN0IHNlbGVjdGVkOiBSZWNvcmQ8c3RyaW5nLCBib29sZWFuPiA9IHt9O1xuICAgICAgICAgIGNvbnN0IGFjdGlvbnM6IFJlY29yZDxzdHJpbmcsIHsgc3R5bGU6IFJlZGFjdGlvblN0eWxlOyBsYWJlbFRleHQ/OiBzdHJpbmcgfT4gPSB7fTtcbiAgICAgICAgICBcbiAgICAgICAgICByZXN1bHQuZGV0ZWN0aW9ucy5mb3JFYWNoKGRldCA9PiB7XG4gICAgICAgICAgICBzZWxlY3RlZFtkZXQuaWRdID0gdHJ1ZTtcbiAgICAgICAgICAgIGFjdGlvbnNbZGV0LmlkXSA9IHsgc3R5bGU6ICdCT1gnIH07XG4gICAgICAgICAgfSk7XG5cbiAgICAgICAgICBuZXdTdGF0ZXMucHVzaCh7XG4gICAgICAgICAgICBmaWxlLFxuICAgICAgICAgICAgZGV0ZWN0aW9uczogcmVzdWx0LmRldGVjdGlvbnMsXG4gICAgICAgICAgICBzZWxlY3RlZCxcbiAgICAgICAgICAgIGFjdGlvbnMsXG4gICAgICAgICAgICBwYWdlczogcmVzdWx0LnBhZ2VzIHx8IDEsXG4gICAgICAgICAgICBwYWdlSW1hZ2VzOiBbXSxcbiAgICAgICAgICAgIGN1cnJlbnRQYWdlOiAwLFxuICAgICAgICAgICAgcHJvY2Vzc2luZzogZmFsc2VcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gcHJvY2VzcyBmaWxlOicsIGZpbGUubmFtZSwgZXJyb3IpO1xuICAgICAgICAgIC8vIEFkZCB0aGUgZmlsZSB3aXRoIGVycm9yIHN0YXRlXG4gICAgICAgICAgbmV3U3RhdGVzLnB1c2goe1xuICAgICAgICAgICAgZmlsZSxcbiAgICAgICAgICAgIGRldGVjdGlvbnM6IFtdLFxuICAgICAgICAgICAgc2VsZWN0ZWQ6IHt9LFxuICAgICAgICAgICAgYWN0aW9uczoge30sXG4gICAgICAgICAgICBwYWdlczogMSxcbiAgICAgICAgICAgIHBhZ2VJbWFnZXM6IFtdLFxuICAgICAgICAgICAgY3VycmVudFBhZ2U6IDAsXG4gICAgICAgICAgICBwcm9jZXNzaW5nOiBmYWxzZSxcbiAgICAgICAgICAgIGVycm9yOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBcbiAgICAgIHNldEZpbGVTdGF0ZXMobmV3U3RhdGVzKTtcbiAgICAgIHNldExvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgICBcbiAgICBwcm9jZXNzRmlsZXMoKTtcbiAgfSwgW2ZpbGVzLCBwcmVzZXRJZF0pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbGVDaGFuZ2UgPSAoZTogUmVhY3QuQ2hhbmdlRXZlbnQ8SFRNTElucHV0RWxlbWVudD4pID0+IHtcbiAgICBjb25zdCBzZWxlY3RlZEZpbGVzID0gQXJyYXkuZnJvbShlLnRhcmdldC5maWxlcyB8fCBbXSk7XG4gICAgc2V0RmlsZXMoc2VsZWN0ZWRGaWxlcyk7XG4gICAgc2V0Q3VycmVudEZpbGVJbmRleCgwKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEcm9wID0gKGU6IFJlYWN0LkRyYWdFdmVudCkgPT4ge1xuICAgIGUucHJldmVudERlZmF1bHQoKTtcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xuICAgIGNvbnN0IGRyb3BwZWRGaWxlcyA9IEFycmF5LmZyb20oZS5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuICAgIHNldEZpbGVzKGRyb3BwZWRGaWxlcyk7XG4gICAgc2V0Q3VycmVudEZpbGVJbmRleCgwKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEcmFnT3ZlciA9IChlOiBSZWFjdC5EcmFnRXZlbnQpID0+IHtcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVEcmFnTGVhdmUgPSAoZTogUmVhY3QuRHJhZ0V2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlU2FuaXRpemUgPSBhc3luYyAoZmlsZUluZGV4OiBudW1iZXIpID0+IHtcbiAgICBjb25zdCBmaWxlU3RhdGUgPSBmaWxlU3RhdGVzW2ZpbGVJbmRleF07XG4gICAgaWYgKCFmaWxlU3RhdGUpIHJldHVybjtcblxuICAgIC8vIFVwZGF0ZSBwcm9jZXNzaW5nIHN0YXRlXG4gICAgc2V0RmlsZVN0YXRlcyhwcmV2ID0+IHByZXYubWFwKChzdGF0ZSwgaSkgPT4gXG4gICAgICBpID09PSBmaWxlSW5kZXggPyB7IC4uLnN0YXRlLCBwcm9jZXNzaW5nOiB0cnVlIH0gOiBzdGF0ZVxuICAgICkpO1xuXG4gICAgdHJ5IHtcbiAgICAgIC8vIFJlLWFuYWx5emUgdGhlIGZpbGUgdG8gZW5zdXJlIGxhc3RSZXN1bHQgaXMgc2V0IGNvcnJlY3RseSAgXG4gICAgICBhd2FpdCBhbmFseXplRG9jdW1lbnQoZmlsZVN0YXRlLmZpbGUsIHsgcHJlc2V0SWQgfSk7XG4gICAgICBcbiAgICAgIGNvbnN0IHJlZGFjdGlvbkFjdGlvbnM6IFJlZGFjdGlvbkFjdGlvbltdID0gZmlsZVN0YXRlLmRldGVjdGlvbnNcbiAgICAgICAgLmZpbHRlcihkZXQgPT4gZmlsZVN0YXRlLnNlbGVjdGVkW2RldC5pZF0pXG4gICAgICAgIC5tYXAoZGV0ID0+ICh7XG4gICAgICAgICAgZGV0ZWN0aW9uSWQ6IGRldC5pZCxcbiAgICAgICAgICBzdHlsZTogZmlsZVN0YXRlLmFjdGlvbnNbZGV0LmlkXT8uc3R5bGUgfHwgJ0JPWCcsXG4gICAgICAgICAgbGFiZWxUZXh0OiBmaWxlU3RhdGUuYWN0aW9uc1tkZXQuaWRdPy5sYWJlbFRleHRcbiAgICAgICAgfSkpO1xuXG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhcHBseVJlZGFjdGlvbnMoZmlsZVN0YXRlLmZpbGUsIHJlZGFjdGlvbkFjdGlvbnMsIHtcbiAgICAgICAgc3R5bGU6ICdCT1gnXG4gICAgICB9LCBmaWxlU3RhdGUuZGV0ZWN0aW9ucyk7XG5cbiAgICAgIC8vIENvbnZlcnQgZGF0YSBVUkkgdG8gYmxvYiBmb3IgZG93bmxvYWRcbiAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2gocmVzdWx0LmZpbGVVcmkpO1xuICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgIGNvbnN0IHVybCA9IFVSTC5jcmVhdGVPYmplY3RVUkwoYmxvYik7XG5cbiAgICAgIC8vIFVwZGF0ZSBmaWxlIHN0YXRlIHdpdGggcmVzdWx0XG4gICAgICBzZXRGaWxlU3RhdGVzKHByZXYgPT4gcHJldi5tYXAoKHN0YXRlLCBpKSA9PiBcbiAgICAgICAgaSA9PT0gZmlsZUluZGV4ID8geyAuLi5zdGF0ZSwgb3V0cHV0VXJpOiB1cmwsIHByZXZpZXdVcmk6IHJlc3VsdC5maWxlVXJpLCBwcm9jZXNzaW5nOiBmYWxzZSB9IDogc3RhdGVcbiAgICAgICkpO1xuXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1Nhbml0aXphdGlvbiBmYWlsZWQ6JywgZXJyb3IpO1xuICAgICAgLy8gU2hvdyBlcnJvciB0byB1c2VyXG4gICAgICBhbGVydChgU2FuaXRpemF0aW9uIGZhaWxlZDogJHtlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJ31gKTtcbiAgICAgIHNldEZpbGVTdGF0ZXMocHJldiA9PiBwcmV2Lm1hcCgoc3RhdGUsIGkpID0+IFxuICAgICAgICBpID09PSBmaWxlSW5kZXggPyB7IC4uLnN0YXRlLCBwcm9jZXNzaW5nOiBmYWxzZSB9IDogc3RhdGVcbiAgICAgICkpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEb3dubG9hZCA9IChmaWxlSW5kZXg6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IGZpbGVTdGF0ZSA9IGZpbGVTdGF0ZXNbZmlsZUluZGV4XTtcbiAgICBpZiAoIWZpbGVTdGF0ZT8ub3V0cHV0VXJpKSByZXR1cm47XG5cbiAgICBjb25zdCBsaW5rID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYScpO1xuICAgIGxpbmsuaHJlZiA9IGZpbGVTdGF0ZS5vdXRwdXRVcmk7XG4gICAgbGluay5kb3dubG9hZCA9IGBzYW5pdGl6ZWRfJHtmaWxlU3RhdGUuZmlsZS5uYW1lfWA7XG4gICAgbGluay5jbGljaygpO1xuICB9O1xuXG4gIGNvbnN0IGN1cnJlbnRGaWxlU3RhdGUgPSBmaWxlU3RhdGVzW2N1cnJlbnRGaWxlSW5kZXhdO1xuXG4gIHJldHVybiAoXG4gICAgPGRpdiBjbGFzc05hbWU9XCJhcHAtY29udGFpbmVyXCI+XG4gICAgICB7LyogSGVhZGVyICovfVxuICAgICAgPGhlYWRlciBjbGFzc05hbWU9XCJoZWFkZXJcIj5cbiAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJoZWFkZXItY29udGVudFwiPlxuICAgICAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3NOYW1lPVwibG9nb1wiPlxuICAgICAgICAgICAgQ2xlYW5TaGFyZSBQcm9cbiAgICAgICAgICA8L2E+XG4gICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGFsaWduSXRlbXM6ICdjZW50ZXInLCBnYXA6ICd2YXIoLS1zcGFjZS1tZCknIH19PlxuICAgICAgICAgICAge3ByZXNldHMubGVuZ3RoID4gMCAmJiAoXG4gICAgICAgICAgICAgIDxzZWxlY3QgXG4gICAgICAgICAgICAgICAgdmFsdWU9e3ByZXNldElkfSBcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+IHNldFByZXNldElkKGUudGFyZ2V0LnZhbHVlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJmb3JtLXNlbGVjdFwiXG4gICAgICAgICAgICAgICAgc3R5bGU9e3sgbWluV2lkdGg6ICcxNTBweCcgfX1cbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIHtwcmVzZXRzLm1hcChwID0+IChcbiAgICAgICAgICAgICAgICAgIDxvcHRpb24ga2V5PXtwLmlkfSB2YWx1ZT17cC5pZH0+e3AubmFtZX08L29wdGlvbj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9zZWxlY3Q+XG4gICAgICAgICAgICApfVxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRQcm9VbmxvY2tlZCghcHJvVW5sb2NrZWQpfVxuICAgICAgICAgICAgICBjbGFzc05hbWU9e2BidG4gJHtwcm9VbmxvY2tlZCA/ICdidG4tc2Vjb25kYXJ5JyA6ICdidG4tb3V0bGluZSd9IGJ0bi1zbWB9XG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIHtwcm9VbmxvY2tlZCA/ICfinJMgUHJvIFVubG9ja2VkJyA6ICfwn5STIFVubG9jayBQcm8nfVxuICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICB7cHJvVW5sb2NrZWQgJiYgKFxuICAgICAgICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1ByZXNldEVkaXRvcih0cnVlKX1cbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIE1hbmFnZSBQcmVzZXRzXG4gICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgKX1cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgPC9kaXY+XG4gICAgICA8L2hlYWRlcj5cblxuICAgICAgey8qIE1haW4gQ29udGVudCAqL31cbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWFpbi1jb250ZW50XCI+XG4gICAgICAgIHsvKiBGaWxlIFVwbG9hZCBTZWN0aW9uICovfVxuICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmRcIiBzdHlsZT17eyBtYXJnaW5Cb3R0b206ICd2YXIoLS1zcGFjZS14bCknIH19PlxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1oZWFkZXJcIj5cbiAgICAgICAgICAgIDxoMiBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+VXBsb2FkIEZpbGVzPC9oMj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImNhcmQtc3VidGl0bGVcIj5TZWxlY3QgaW1hZ2VzIG9yIFBERiBkb2N1bWVudHMgdG8gc2FuaXRpemU8L3A+XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWJvZHlcIj5cbiAgICAgICAgICAgIDxkaXYgXG4gICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZpbGUtdXBsb2FkLXpvbmVcIlxuICAgICAgICAgICAgICBvbkRyb3A9e2hhbmRsZURyb3B9XG4gICAgICAgICAgICAgIG9uRHJhZ092ZXI9e2hhbmRsZURyYWdPdmVyfVxuICAgICAgICAgICAgICBvbkRyYWdMZWF2ZT17aGFuZGxlRHJhZ0xlYXZlfVxuICAgICAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZmlsZS1pbnB1dCcpPy5jbGljaygpfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImZpbGUtdXBsb2FkLWljb25cIj7wn5OEPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS11cGxvYWQtdGV4dFwiPlxuICAgICAgICAgICAgICAgIERyb3AgZmlsZXMgaGVyZSBvciBjbGljayB0byBicm93c2VcbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiZmlsZS11cGxvYWQtc3VidGV4dFwiPlxuICAgICAgICAgICAgICAgIFN1cHBvcnRzIEpQRywgUE5HLCBQREYgZmlsZXMgdXAgdG8gMTBNQiBlYWNoXG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8aW5wdXRcbiAgICAgICAgICAgICAgICBpZD1cImZpbGUtaW5wdXRcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJmaWxlXCJcbiAgICAgICAgICAgICAgICBhY2NlcHQ9XCJpbWFnZS8qLGFwcGxpY2F0aW9uL3BkZlwiXG4gICAgICAgICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgICAgICAgICBvbkNoYW5nZT17aGFuZGxlRmlsZUNoYW5nZX1cbiAgICAgICAgICAgICAgICBzdHlsZT17eyBkaXNwbGF5OiAnbm9uZScgfX1cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgXG4gICAgICAgICAgICB7bG9hZGluZyAmJiAoXG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibG9hZGluZy10ZXh0XCIgc3R5bGU9e3sgbWFyZ2luVG9wOiAndmFyKC0tc3BhY2UtbWQpJyB9fT5cbiAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxvYWRpbmctc3Bpbm5lclwiPjwvZGl2PlxuICAgICAgICAgICAgICAgIFByb2Nlc3NpbmcgZmlsZXMuLi5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICApfVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cblxuICAgICAgICB7LyogRmlsZSBQcm9jZXNzaW5nIFJlc3VsdHMgKi99XG4gICAgICAgIHtmaWxlU3RhdGVzLmxlbmd0aCA+IDAgJiYgKFxuICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICd2YXIoLS1zcGFjZS14bCknIH19PlxuICAgICAgICAgICAgey8qIEZpbGUgTGlzdCBTaWRlYmFyICovfVxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzaWRlYmFyXCIgc3R5bGU9e3sgbWluV2lkdGg6ICcyNTBweCcgfX0+XG4gICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJzaWRlYmFyLXRpdGxlXCI+RmlsZXMgKHtmaWxlU3RhdGVzLmxlbmd0aH0pPC9oMz5cbiAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICd2YXIoLS1zcGFjZS1zbSknIH19PlxuICAgICAgICAgICAgICAgIHtmaWxlU3RhdGVzLm1hcCgoc3RhdGUsIGluZGV4KSA9PiAoXG4gICAgICAgICAgICAgICAgICA8ZGl2XG4gICAgICAgICAgICAgICAgICAgIGtleT17aW5kZXh9XG4gICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IHNldEN1cnJlbnRGaWxlSW5kZXgoaW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICBzdHlsZT17e1xuICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6ICd2YXIoLS1zcGFjZS1tZCknLFxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogYDJweCBzb2xpZCAke2luZGV4ID09PSBjdXJyZW50RmlsZUluZGV4ID8gJ3ZhcigtLWNvbG9yLXByaW1hcnkpJyA6ICd2YXIoLS1ib3JkZXItbGlnaHQpJ31gLFxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlclJhZGl1czogJ3ZhcigtLXJhZGl1cy1tZCknLFxuICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogJ3BvaW50ZXInLFxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IGluZGV4ID09PSBjdXJyZW50RmlsZUluZGV4ID8gJ3ZhcigtLWJnLXNlY29uZGFyeSknIDogJ3ZhcigtLWJnLXByaW1hcnkpJyxcbiAgICAgICAgICAgICAgICAgICAgICB0cmFuc2l0aW9uOiAnYWxsIHZhcigtLXRyYW5zaXRpb24tZmFzdCknXG4gICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFdlaWdodDogJzYwMCcsIGZvbnRTaXplOiAndmFyKC0tZm9udC1zaXplLXNtKScsIG1hcmdpbkJvdHRvbTogJ3ZhcigtLXNwYWNlLXhzKScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAge3N0YXRlLmZpbGUubmFtZX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6ICd2YXIoLS1mb250LXNpemUteHMpJywgY29sb3I6IHN0YXRlLmVycm9yID8gJ3ZhcigtLWNvbG9yLWVycm9yKScgOiAndmFyKC0tdGV4dC1zZWNvbmRhcnkpJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICB7c3RhdGUuZXJyb3IgPyBgRXJyb3I6ICR7c3RhdGUuZXJyb3J9YCA6IGAke3N0YXRlLmRldGVjdGlvbnMubGVuZ3RofSBkZXRlY3Rpb25zIGZvdW5kYH1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgbWFyZ2luVG9wOiAndmFyKC0tc3BhY2Utc20pJywgZGlzcGxheTogJ2ZsZXgnLCBnYXA6ICd2YXIoLS1zcGFjZS14cyknIH19PlxuICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgIGhhbmRsZVNhbml0aXplKGluZGV4KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXByaW1hcnkgYnRuLXNtXCJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtzdGF0ZS5wcm9jZXNzaW5nIHx8ICEhc3RhdGUuZXJyb3J9XG4gICAgICAgICAgICAgICAgICAgICAgICBzdHlsZT17eyBmbGV4OiAxIH19XG4gICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAge3N0YXRlLnByb2Nlc3NpbmcgPyAnUHJvY2Vzc2luZy4uLicgOiAnU2FuaXRpemUnfVxuICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgIHtzdGF0ZS5vdXRwdXRVcmkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICBvbkNsaWNrPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGUuc3RvcFByb3BhZ2F0aW9uKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaGFuZGxlRG93bmxvYWQoaW5kZXgpO1xuICAgICAgICAgICAgICAgICAgICAgICAgICB9fVxuICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLXNlY29uZGFyeSBidG4tc21cIlxuICAgICAgICAgICAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgICAgICAgICAgICBEb3dubG9hZFxuICAgICAgICAgICAgICAgICAgICAgICAgPC9idXR0b24+XG4gICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgey8qIE1haW4gQ29udGVudCBBcmVhICovfVxuICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmbGV4OiAxIH19PlxuICAgICAgICAgICAgICB7Y3VycmVudEZpbGVTdGF0ZSAmJiAoXG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkXCI+XG4gICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtaGVhZGVyXCI+XG4gICAgICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+e2N1cnJlbnRGaWxlU3RhdGUuZmlsZS5uYW1lfTwvaDM+XG4gICAgICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImNhcmQtc3VidGl0bGVcIj5cbiAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudEZpbGVTdGF0ZS5lcnJvciA/ICdQcm9jZXNzaW5nIGZhaWxlZCcgOiBgRm91bmQgJHtjdXJyZW50RmlsZVN0YXRlLmRldGVjdGlvbnMubGVuZ3RofSBzZW5zaXRpdmUgaXRlbXNgfVxuICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgICAgIHtjdXJyZW50RmlsZVN0YXRlLmVycm9yID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiYWxlcnQgYWxlcnQtZXJyb3JcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+UHJvY2Vzc2luZyBFcnJvcjwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17eyBtYXJnaW46ICcwJywgbWFyZ2luVG9wOiAndmFyKC0tc3BhY2UteHMpJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBGYWlsZWQgdG8gYW5hbHl6ZSB0aGlzIGZpbGU6IHtjdXJyZW50RmlsZVN0YXRlLmVycm9yfVxuICAgICAgICAgICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IGN1cnJlbnRGaWxlU3RhdGUuZGV0ZWN0aW9ucy5sZW5ndGggPiAwID8gKFxuICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQgc3R5bGU9e3sgbWFyZ2luQm90dG9tOiAndmFyKC0tc3BhY2UtbWQpJywgZm9udFNpemU6ICd2YXIoLS1mb250LXNpemUtbGcpJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgRGV0ZWN0ZWQgU2Vuc2l0aXZlIEluZm9ybWF0aW9uXG4gICAgICAgICAgICAgICAgICAgICAgICA8L2g0PlxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGZsZXhEaXJlY3Rpb246ICdjb2x1bW4nLCBnYXA6ICd2YXIoLS1zcGFjZS1zbSknIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudEZpbGVTdGF0ZS5kZXRlY3Rpb25zLm1hcChkZXRlY3Rpb24gPT4gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17ZGV0ZWN0aW9uLmlkfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3tcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogJ3ZhcigtLXNwYWNlLW1kKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogJzFweCBzb2xpZCB2YXIoLS1ib3JkZXItbGlnaHQpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAndmFyKC0tcmFkaXVzLW1kKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICd2YXIoLS1iZy1zZWNvbmRhcnkpJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbGlnbkl0ZW1zOiAnY2VudGVyJyxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeUNvbnRlbnQ6ICdzcGFjZS1iZXR3ZWVuJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGRpc3BsYXk6ICdmbGV4JywgYWxpZ25JdGVtczogJ2NlbnRlcicsIGdhcDogJ3ZhcigtLXNwYWNlLW1kKScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHR5cGU9XCJjaGVja2JveFwiXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2hlY2tlZD17Y3VycmVudEZpbGVTdGF0ZS5zZWxlY3RlZFtkZXRlY3Rpb24uaWRdIHx8IGZhbHNlfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmlsZVN0YXRlcyhwcmV2ID0+IHByZXYubWFwKChzdGF0ZSwgaSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGkgPT09IGN1cnJlbnRGaWxlSW5kZXggPyB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLi4uc3RhdGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0ZWQ6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLnNlbGVjdGVkLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RldGVjdGlvbi5pZF06IGUudGFyZ2V0LmNoZWNrZWRcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0gOiBzdGF0ZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IGZvbnRXZWlnaHQ6ICc2MDAnLCBmb250U2l6ZTogJ3ZhcigtLWZvbnQtc2l6ZS1zbSknIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2RldGVjdGlvbi5raW5kfToge2RldGVjdGlvbi5wcmV2aWV3IHx8ICdOL0EnfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgc3R5bGU9e3sgZm9udFNpemU6ICd2YXIoLS1mb250LXNpemUteHMpJywgY29sb3I6ICd2YXIoLS10ZXh0LXNlY29uZGFyeSknIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQ29uZmlkZW5jZToge01hdGgucm91bmQoZGV0ZWN0aW9uLmNvbmZpZGVuY2UgKiAxMDApfSVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzZWxlY3RcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU9e2N1cnJlbnRGaWxlU3RhdGUuYWN0aW9uc1tkZXRlY3Rpb24uaWRdPy5zdHlsZSB8fCAnQk9YJ31cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc2V0RmlsZVN0YXRlcyhwcmV2ID0+IHByZXYubWFwKChzdGF0ZSwgaSkgPT4gXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBpID09PSBjdXJyZW50RmlsZUluZGV4ID8ge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAuLi5zdGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWN0aW9uczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLmFjdGlvbnMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgW2RldGVjdGlvbi5pZF06IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC4uLnN0YXRlLmFjdGlvbnNbZGV0ZWN0aW9uLmlkXSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBlLnRhcmdldC52YWx1ZSBhcyBSZWRhY3Rpb25TdHlsZVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfSA6IHN0YXRlXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgKSk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImZvcm0tc2VsZWN0XCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3R5bGU9e3sgbWluV2lkdGg6ICcxMjBweCcgfX1cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkJPWFwiPkJsYWNrIEJveDwvb3B0aW9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8b3B0aW9uIHZhbHVlPVwiQkxVUlwiPkJsdXI8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIlBJWEVMQVRFXCI+UGl4ZWxhdGU8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPG9wdGlvbiB2YWx1ZT1cIkxBQkVMXCI+TGFiZWw8L29wdGlvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc2VsZWN0PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgICApKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZm9vdGVyXCIgc3R5bGU9e3sgbWFyZ2luVG9wOiAndmFyKC0tc3BhY2UteGwpJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZVNhbml0aXplKGN1cnJlbnRGaWxlSW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cImJ0biBidG4tcHJpbWFyeSBidG4tbGdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVkPXtjdXJyZW50RmlsZVN0YXRlLnByb2Nlc3Npbmd9XG4gICAgICAgICAgICAgICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudEZpbGVTdGF0ZS5wcm9jZXNzaW5nID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJsb2FkaW5nLXNwaW5uZXJcIiBzdHlsZT17eyB3aWR0aDogJzFyZW0nLCBoZWlnaHQ6ICcxcmVtJyB9fT48L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgUHJvY2Vzc2luZy4uLlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw+8J+UkiBTYW5pdGl6ZSBEb2N1bWVudDwvPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICAgICAgICAgICAgICB7Y3VycmVudEZpbGVTdGF0ZS5vdXRwdXRVcmkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxidXR0b25cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eygpID0+IGhhbmRsZURvd25sb2FkKGN1cnJlbnRGaWxlSW5kZXgpfVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwiYnRuIGJ0bi1zZWNvbmRhcnkgYnRuLWxnXCJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICDwn5OlIERvd25sb2FkIENsZWFuIEZpbGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2J1dHRvbj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgXG4gICAgICAgICAgICAgICAgICAgICAgICB7LyogUHJldmlldyBvZiBzYW5pdGl6ZWQgZmlsZSAqL31cbiAgICAgICAgICAgICAgICAgICAgICAgIHtjdXJyZW50RmlsZVN0YXRlLnByZXZpZXdVcmkgJiYgKFxuICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IG1hcmdpblRvcDogJ3ZhcigtLXNwYWNlLXhsKScsIHBhZGRpbmc6ICd2YXIoLS1zcGFjZS1sZyknLCBiYWNrZ3JvdW5kOiAndmFyKC0tYmctc2Vjb25kYXJ5KScsIGJvcmRlclJhZGl1czogJ3ZhcigtLXJhZGl1cy1tZCknLCBib3JkZXI6ICcxcHggc29saWQgdmFyKC0tYm9yZGVyLWxpZ2h0KScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGg0IHN0eWxlPXt7IG1hcmdpbkJvdHRvbTogJ3ZhcigtLXNwYWNlLW1kKScsIGZvbnRTaXplOiAndmFyKC0tZm9udC1zaXplLWxnKScsIGNvbG9yOiAndmFyKC0tY29sb3ItcHJpbWFyeSknIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAg8J+UkiBTYW5pdGl6ZWQgUHJldmlld1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvaDQ+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBkaXNwbGF5OiAnZmxleCcsIGp1c3RpZnlDb250ZW50OiAnY2VudGVyJywgYWxpZ25JdGVtczogJ2NlbnRlcicsIHBhZGRpbmc6ICd2YXIoLS1zcGFjZS1tZCknLCBiYWNrZ3JvdW5kOiAndmFyKC0tYmctcHJpbWFyeSknLCBib3JkZXJSYWRpdXM6ICd2YXIoLS1yYWRpdXMtbWQpJywgYm9yZGVyOiAnMXB4IHNvbGlkIHZhcigtLWJvcmRlci1saWdodCknIH19PlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge2N1cnJlbnRGaWxlU3RhdGUuZmlsZS50eXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpID8gKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aW1nXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjPXtjdXJyZW50RmlsZVN0YXRlLnByZXZpZXdVcml9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYWx0PVwiU2FuaXRpemVkIHByZXZpZXdcIlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlPXt7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhXaWR0aDogJzEwMCUnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWF4SGVpZ2h0OiAnNDAwcHgnLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyUmFkaXVzOiAndmFyKC0tcmFkaXVzLXNtKScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBib3hTaGFkb3c6ICd2YXIoLS1zaGFkb3ctbWQpJ1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIH19XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IHN0eWxlPXt7IHRleHRBbGlnbjogJ2NlbnRlcicsIHBhZGRpbmc6ICd2YXIoLS1zcGFjZS14bCknLCBjb2xvcjogJ3ZhcigtLXRleHQtc2Vjb25kYXJ5KScgfX0+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBzdHlsZT17eyBmb250U2l6ZTogJ3ZhcigtLWZvbnQtc2l6ZS0zeGwpJywgbWFyZ2luQm90dG9tOiAndmFyKC0tc3BhY2UtbWQpJyB9fT7wn5OEPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHA+UERGIHNhbml0aXplZCBzdWNjZXNzZnVsbHk8L3A+XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHAgc3R5bGU9e3sgZm9udFNpemU6ICd2YXIoLS1mb250LXNpemUtc20pJyB9fT5DbGljayBkb3dubG9hZCB0byBzYXZlIHRoZSBjbGVhbiBmaWxlPC9wPlxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICl9XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgICAgICAgICAgKSA6IChcbiAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImFsZXJ0IGFsZXJ0LXN1Y2Nlc3NcIj5cbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXY+XG4gICAgICAgICAgICAgICAgICAgICAgICAgIDxzdHJvbmc+Tm8gc2Vuc2l0aXZlIGluZm9ybWF0aW9uIGRldGVjdGVkITwvc3Ryb25nPlxuICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBzdHlsZT17eyBtYXJnaW46ICcwJywgbWFyZ2luVG9wOiAndmFyKC0tc3BhY2UteHMpJyB9fT5cbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBUaGlzIGRvY3VtZW50IGFwcGVhcnMgdG8gYmUgY2xlYW4gYW5kIHNhZmUgdG8gc2hhcmUuXG4gICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cbiAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICAgICAgICApfVxuICAgICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgICl9XG4gICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgKX1cblxuICAgICAgICB7LyogUHJlc2V0IE1hbmFnZW1lbnQgTW9kYWwgKi99XG4gICAgICAgIHtzaG93UHJlc2V0RWRpdG9yICYmIHByb1VubG9ja2VkICYmIChcbiAgICAgICAgICA8ZGl2IHN0eWxlPXt7XG4gICAgICAgICAgICBwb3NpdGlvbjogJ2ZpeGVkJyxcbiAgICAgICAgICAgIHRvcDogMCxcbiAgICAgICAgICAgIGxlZnQ6IDAsXG4gICAgICAgICAgICByaWdodDogMCxcbiAgICAgICAgICAgIGJvdHRvbTogMCxcbiAgICAgICAgICAgIGJhY2tncm91bmQ6ICdyZ2JhKDAsIDAsIDAsIDAuNSknLFxuICAgICAgICAgICAgZGlzcGxheTogJ2ZsZXgnLFxuICAgICAgICAgICAgYWxpZ25JdGVtczogJ2NlbnRlcicsXG4gICAgICAgICAgICBqdXN0aWZ5Q29udGVudDogJ2NlbnRlcicsXG4gICAgICAgICAgICB6SW5kZXg6IDEwMDBcbiAgICAgICAgICB9fT5cbiAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZFwiIHN0eWxlPXt7IG1pbldpZHRoOiAnNTAwcHgnLCBtYXhXaWR0aDogJzkwdncnLCBtYXhIZWlnaHQ6ICc5MHZoJywgb3ZlcmZsb3c6ICdhdXRvJyB9fT5cbiAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJjYXJkLWhlYWRlclwiPlxuICAgICAgICAgICAgICAgIDxoMyBjbGFzc05hbWU9XCJjYXJkLXRpdGxlXCI+TWFuYWdlIFByZXNldHM8L2gzPlxuICAgICAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cImNhcmQtc3VidGl0bGVcIj5DcmVhdGUgYW5kIG1hbmFnZSBkZXRlY3Rpb24gcHJlc2V0czwvcD5cbiAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwiY2FyZC1ib2R5XCI+XG4gICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJhbGVydCBhbGVydC1pbmZvXCI+XG4gICAgICAgICAgICAgICAgICA8c3Ryb25nPlBybyBGZWF0dXJlPC9zdHJvbmc+XG4gICAgICAgICAgICAgICAgICA8cCBzdHlsZT17eyBtYXJnaW46IDAsIG1hcmdpblRvcDogJ3ZhcigtLXNwYWNlLXhzKScgfX0+XG4gICAgICAgICAgICAgICAgICAgIFByZXNldCBtYW5hZ2VtZW50IGlzIGF2YWlsYWJsZSBpbiB0aGUgUHJvIHZlcnNpb24uXG4gICAgICAgICAgICAgICAgICA8L3A+XG4gICAgICAgICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImNhcmQtZm9vdGVyXCI+XG4gICAgICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICAgICAgb25DbGljaz17KCkgPT4gc2V0U2hvd1ByZXNldEVkaXRvcihmYWxzZSl9XG4gICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJidG4gYnRuLWdob3N0XCJcbiAgICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgICBDbG9zZVxuICAgICAgICAgICAgICAgIDwvYnV0dG9uPlxuICAgICAgICAgICAgICA8L2Rpdj5cbiAgICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICApfVxuICAgICAgPC9kaXY+XG4gICAgPC9kaXY+XG4gICk7XG59Il0sIm5hbWVzIjpbIlJlYWN0IiwidXNlU3RhdGUiLCJ1c2VFZmZlY3QiLCJhbmFseXplRG9jdW1lbnQiLCJhcHBseVJlZGFjdGlvbnMiLCJsaXN0UHJlc2V0cyIsImpzeCIsIl9qc3giLCJqc3hzIiwiX2pzeHMiLCJGcmFnbWVudCIsIl9GcmFnbWVudCIsIkNsZWFuU2hhcmVQcm8iLCJmaWxlcyIsInNldEZpbGVzIiwiZmlsZVN0YXRlcyIsInNldEZpbGVTdGF0ZXMiLCJjdXJyZW50RmlsZUluZGV4Iiwic2V0Q3VycmVudEZpbGVJbmRleCIsInByZXNldHMiLCJzZXRQcmVzZXRzIiwicHJlc2V0SWQiLCJzZXRQcmVzZXRJZCIsImxvYWRpbmciLCJzZXRMb2FkaW5nIiwicHJvVW5sb2NrZWQiLCJzZXRQcm9VbmxvY2tlZCIsInNob3dQcmVzZXRFZGl0b3IiLCJzZXRTaG93UHJlc2V0RWRpdG9yIiwicHMiLCJsZW5ndGgiLCJpZCIsInByb2Nlc3NGaWxlcyIsIm5ld1N0YXRlcyIsImZpbGUiLCJyZXN1bHQiLCJzZWxlY3RlZCIsImFjdGlvbnMiLCJkZXRlY3Rpb25zIiwiZm9yRWFjaCIsImRldCIsInN0eWxlIiwicHVzaCIsInBhZ2VzIiwicGFnZUltYWdlcyIsImN1cnJlbnRQYWdlIiwicHJvY2Vzc2luZyIsImVycm9yIiwiY29uc29sZSIsIm5hbWUiLCJFcnJvciIsIm1lc3NhZ2UiLCJoYW5kbGVGaWxlQ2hhbmdlIiwiZSIsInNlbGVjdGVkRmlsZXMiLCJBcnJheSIsImZyb20iLCJ0YXJnZXQiLCJoYW5kbGVEcm9wIiwicHJldmVudERlZmF1bHQiLCJzdG9wUHJvcGFnYXRpb24iLCJkcm9wcGVkRmlsZXMiLCJkYXRhVHJhbnNmZXIiLCJoYW5kbGVEcmFnT3ZlciIsImhhbmRsZURyYWdMZWF2ZSIsImhhbmRsZVNhbml0aXplIiwiZmlsZUluZGV4IiwiZmlsZVN0YXRlIiwicHJldiIsIm1hcCIsInN0YXRlIiwiaSIsInJlZGFjdGlvbkFjdGlvbnMiLCJmaWx0ZXIiLCJkZXRlY3Rpb25JZCIsImxhYmVsVGV4dCIsInJlc3BvbnNlIiwiZmV0Y2giLCJmaWxlVXJpIiwiYmxvYiIsInVybCIsIlVSTCIsImNyZWF0ZU9iamVjdFVSTCIsIm91dHB1dFVyaSIsInByZXZpZXdVcmkiLCJhbGVydCIsImhhbmRsZURvd25sb2FkIiwibGluayIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImhyZWYiLCJkb3dubG9hZCIsImNsaWNrIiwiY3VycmVudEZpbGVTdGF0ZSIsImNsYXNzTmFtZSIsImNoaWxkcmVuIiwiZGlzcGxheSIsImFsaWduSXRlbXMiLCJnYXAiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwibWluV2lkdGgiLCJwIiwib25DbGljayIsIm1hcmdpbkJvdHRvbSIsIm9uRHJvcCIsIm9uRHJhZ092ZXIiLCJvbkRyYWdMZWF2ZSIsImdldEVsZW1lbnRCeUlkIiwidHlwZSIsImFjY2VwdCIsIm11bHRpcGxlIiwibWFyZ2luVG9wIiwiZmxleERpcmVjdGlvbiIsImluZGV4IiwicGFkZGluZyIsImJvcmRlciIsImJvcmRlclJhZGl1cyIsImN1cnNvciIsImJhY2tncm91bmQiLCJ0cmFuc2l0aW9uIiwiZm9udFdlaWdodCIsImZvbnRTaXplIiwiY29sb3IiLCJkaXNhYmxlZCIsImZsZXgiLCJtYXJnaW4iLCJkZXRlY3Rpb24iLCJqdXN0aWZ5Q29udGVudCIsImNoZWNrZWQiLCJraW5kIiwicHJldmlldyIsIk1hdGgiLCJyb3VuZCIsImNvbmZpZGVuY2UiLCJ3aWR0aCIsImhlaWdodCIsInN0YXJ0c1dpdGgiLCJzcmMiLCJhbHQiLCJtYXhXaWR0aCIsIm1heEhlaWdodCIsImJveFNoYWRvdyIsInRleHRBbGlnbiIsInBvc2l0aW9uIiwidG9wIiwibGVmdCIsInJpZ2h0IiwiYm90dG9tIiwiekluZGV4Iiwib3ZlcmZsb3ciXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///./pages/index.tsx\n");

/***/ }),

/***/ "../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   getServerSideProps: () => (/* binding */ getServerSideProps),\n/* harmony export */   getStaticPaths: () => (/* binding */ getStaticPaths),\n/* harmony export */   getStaticProps: () => (/* binding */ getStaticProps),\n/* harmony export */   reportWebVitals: () => (/* binding */ reportWebVitals),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   unstable_getServerProps: () => (/* binding */ unstable_getServerProps),\n/* harmony export */   unstable_getServerSideProps: () => (/* binding */ unstable_getServerSideProps),\n/* harmony export */   unstable_getStaticParams: () => (/* binding */ unstable_getStaticParams),\n/* harmony export */   unstable_getStaticPaths: () => (/* binding */ unstable_getStaticPaths),\n/* harmony export */   unstable_getStaticProps: () => (/* binding */ unstable_getStaticProps)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages/module.compiled */ \"../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/server/future/route-modules/pages/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! private-next-pages/_document */ \"../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/pages/_document.js\");\n/* harmony import */ var private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(private_next_pages_document__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! private-next-pages/_app */ \"./pages/_app.tsx\");\n/* harmony import */ var _pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./pages/index.tsx */ \"./pages/index.tsx\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__]);\n_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the app and document modules.\n\n\n// Import the userland code.\n\n// Re-export the component (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"default\"));\n// Re-export methods.\nconst getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticProps\");\nconst getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getStaticPaths\");\nconst getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"getServerSideProps\");\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"config\");\nconst reportWebVitals = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"reportWebVitals\");\n// Re-export legacy methods.\nconst unstable_getStaticProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticProps\");\nconst unstable_getStaticPaths = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticPaths\");\nconst unstable_getStaticParams = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getStaticParams\");\nconst unstable_getServerProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerProps\");\nconst unstable_getServerSideProps = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__, \"unstable_getServerSideProps\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES,\n        page: \"/index\",\n        pathname: \"/\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    components: {\n        App: private_next_pages_app__WEBPACK_IMPORTED_MODULE_4__[\"default\"],\n        Document: (private_next_pages_document__WEBPACK_IMPORTED_MODULE_3___default())\n    },\n    userland: _pages_index_tsx__WEBPACK_IMPORTED_MODULE_5__\n});\n\n//# sourceMappingURL=pages.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vLi4vbm9kZV9tb2R1bGVzLy5wbnBtL25leHRAMTQuMS4wX0BiYWJlbCtjb3JlQDcuMjguM19yZWFjdC1kb21AMTguMi4wX3JlYWN0QDE4LjIuMF9fcmVhY3RAMTguMi4wL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVMmcGFnZT0lMkYmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmluZGV4LnRzeCZhYnNvbHV0ZUFwcFBhdGg9cHJpdmF0ZS1uZXh0LXBhZ2VzJTJGX2FwcCZhYnNvbHV0ZURvY3VtZW50UGF0aD1wcml2YXRlLW5leHQtcGFnZXMlMkZfZG9jdW1lbnQmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ2hDO0FBQ0w7QUFDMUQ7QUFDb0Q7QUFDVjtBQUMxQztBQUM4QztBQUM5QztBQUNBLGlFQUFlLHdFQUFLLENBQUMsNkNBQVEsWUFBWSxFQUFDO0FBQzFDO0FBQ08sdUJBQXVCLHdFQUFLLENBQUMsNkNBQVE7QUFDckMsdUJBQXVCLHdFQUFLLENBQUMsNkNBQVE7QUFDckMsMkJBQTJCLHdFQUFLLENBQUMsNkNBQVE7QUFDekMsZUFBZSx3RUFBSyxDQUFDLDZDQUFRO0FBQzdCLHdCQUF3Qix3RUFBSyxDQUFDLDZDQUFRO0FBQzdDO0FBQ08sZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsaUNBQWlDLHdFQUFLLENBQUMsNkNBQVE7QUFDL0MsZ0NBQWdDLHdFQUFLLENBQUMsNkNBQVE7QUFDOUMsb0NBQW9DLHdFQUFLLENBQUMsNkNBQVE7QUFDekQ7QUFDTyx3QkFBd0IseUdBQWdCO0FBQy9DO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0EsV0FBVztBQUNYLGdCQUFnQjtBQUNoQixLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQsaUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY2xlYW5zaGFyZS91aS8/NGQxYiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc1JvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvcGFnZXMvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIGFwcCBhbmQgZG9jdW1lbnQgbW9kdWxlcy5cbmltcG9ydCBEb2N1bWVudCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19kb2N1bWVudFwiO1xuaW1wb3J0IEFwcCBmcm9tIFwicHJpdmF0ZS1uZXh0LXBhZ2VzL19hcHBcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2luZGV4LnRzeFwiO1xuLy8gUmUtZXhwb3J0IHRoZSBjb21wb25lbnQgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBtZXRob2RzLlxuZXhwb3J0IGNvbnN0IGdldFN0YXRpY1Byb3BzID0gaG9pc3QodXNlcmxhbmQsIFwiZ2V0U3RhdGljUHJvcHNcIik7XG5leHBvcnQgY29uc3QgZ2V0U3RhdGljUGF0aHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTdGF0aWNQYXRoc1wiKTtcbmV4cG9ydCBjb25zdCBnZXRTZXJ2ZXJTaWRlUHJvcHMgPSBob2lzdCh1c2VybGFuZCwgXCJnZXRTZXJ2ZXJTaWRlUHJvcHNcIik7XG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuZXhwb3J0IGNvbnN0IHJlcG9ydFdlYlZpdGFscyA9IGhvaXN0KHVzZXJsYW5kLCBcInJlcG9ydFdlYlZpdGFsc1wiKTtcbi8vIFJlLWV4cG9ydCBsZWdhY3kgbWV0aG9kcy5cbmV4cG9ydCBjb25zdCB1bnN0YWJsZV9nZXRTdGF0aWNQcm9wcyA9IGhvaXN0KHVzZXJsYW5kLCBcInVuc3RhYmxlX2dldFN0YXRpY1Byb3BzXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFN0YXRpY1BhdGhzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGF0aHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U3RhdGljUGFyYW1zXCIpO1xuZXhwb3J0IGNvbnN0IHVuc3RhYmxlX2dldFNlcnZlclByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyUHJvcHNcIik7XG5leHBvcnQgY29uc3QgdW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzID0gaG9pc3QodXNlcmxhbmQsIFwidW5zdGFibGVfZ2V0U2VydmVyU2lkZVByb3BzXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVMsXG4gICAgICAgIHBhZ2U6IFwiL2luZGV4XCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9cIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgY29tcG9uZW50czoge1xuICAgICAgICBBcHAsXG4gICAgICAgIERvY3VtZW50XG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "./styles/globals.css":
/*!****************************!*\
  !*** ./styles/globals.css ***!
  \****************************/
/***/ (() => {



/***/ }),

/***/ "../core-detect/dist/detectors/index.js":
/*!**********************************************!*\
  !*** ../core-detect/dist/detectors/index.js ***!
  \**********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   calculateConfidence: () => (/* binding */ calculateConfidence),\n/* harmony export */   detectCustomPatterns: () => (/* binding */ detectCustomPatterns),\n/* harmony export */   detectToken: () => (/* binding */ detectToken),\n/* harmony export */   detectTokenWithCustomPatterns: () => (/* binding */ detectTokenWithCustomPatterns),\n/* harmony export */   isAWSKey: () => (/* binding */ isAWSKey),\n/* harmony export */   isAddressComponent: () => (/* binding */ isAddressComponent),\n/* harmony export */   isJWT: () => (/* binding */ isJWT),\n/* harmony export */   isLuhnValid: () => (/* binding */ isLuhnValid),\n/* harmony export */   isValidIBAN: () => (/* binding */ isValidIBAN),\n/* harmony export */   isValidSSN: () => (/* binding */ isValidSSN),\n/* harmony export */   isValidUSPassport: () => (/* binding */ isValidUSPassport)\n/* harmony export */ });\n/**\n * Determine whether a string of digits represents a valid PAN according\n * to the Luhn checksum algorithm.  Only digits are considered; all\n * non‑numeric characters should be stripped before calling this function.\n */\nfunction isLuhnValid(value) {\n    let sum = 0;\n    let shouldDouble = false;\n    for (let i = value.length - 1; i >= 0; i--) {\n        const c = value.charCodeAt(i) - 48;\n        if (c < 0 || c > 9) {\n            return false;\n        }\n        let digit = c;\n        if (shouldDouble) {\n            digit *= 2;\n            if (digit > 9)\n                digit -= 9;\n        }\n        sum += digit;\n        shouldDouble = !shouldDouble;\n    }\n    return sum % 10 === 0;\n}\n/**\n * Validate an International Bank Account Number (IBAN) using the MOD 97\n * algorithm defined in ISO 13616.  Letters are mapped A=10, B=11, …\n * The function returns true when the IBAN appears structurally valid.  It\n * does not verify that the account exists.\n */\nfunction isValidIBAN(iban) {\n    const cleaned = iban.replace(/\\s+/g, '').toUpperCase();\n    // Basic length check: IBANs are between 15 and 34 characters long\n    if (cleaned.length < 15 || cleaned.length > 34)\n        return false;\n    // Move the four initial characters to the end of the string\n    const rearranged = cleaned.slice(4) + cleaned.slice(0, 4);\n    // Replace letters with numbers: A=10, B=11, …\n    let numeric = '';\n    for (const ch of rearranged) {\n        const code = ch.charCodeAt(0);\n        if (code >= 48 && code <= 57) {\n            numeric += ch;\n        }\n        else if (code >= 65 && code <= 90) {\n            numeric += (code - 55).toString();\n        }\n        else {\n            return false;\n        }\n    }\n    // Compute the remainder using mod 97\n    let remainder = 0;\n    for (let i = 0; i < numeric.length; i++) {\n        remainder = (remainder * 10 + Number(numeric[i])) % 97;\n    }\n    return remainder === 1;\n}\n/**\n * Validate a US Social Security Number (SSN).  Performs basic\n * structural checks: XXX-XX-XXXX where the area number is not 000,\n * 666, or between 900–999; the group number is not 00; and the serial\n * number is not 0000.\n */\nfunction isValidSSN(value) {\n    const ssnRegex = /^(\\d{3})-(\\d{2})-(\\d{4})$/;\n    const match = ssnRegex.exec(value);\n    if (!match)\n        return false;\n    const area = parseInt(match[1], 10);\n    const group = parseInt(match[2], 10);\n    const serial = parseInt(match[3], 10);\n    if (area === 0 || group === 0 || serial === 0)\n        return false;\n    if (area === 666 || area >= 900)\n        return false;\n    return true;\n}\n/**\n * Validate US passport number format. US passports are typically 9 digits\n * or 1 letter followed by 8 digits (newer format).\n */\nfunction isValidUSPassport(value) {\n    const cleaned = value.replace(/\\s+/g, '');\n    // Format 1: 9 digits (older format)\n    if (/^\\d{9}$/.test(cleaned))\n        return true;\n    // Format 2: 1 letter + 8 digits (newer format) \n    if (/^[A-Z]\\d{8}$/.test(cleaned))\n        return true;\n    return false;\n}\n/**\n * Enhanced address detection with common address components\n */\nfunction isAddressComponent(value) {\n    const token = value.trim();\n    // Street suffixes (high confidence)\n    const streetSuffixes = /^(Street|St\\.?|Avenue|Ave\\.?|Road|Rd\\.?|Lane|Ln\\.?|Boulevard|Blvd\\.?|Drive|Dr\\.?|Circle|Cir\\.?|Court|Ct\\.?|Place|Pl\\.?|Way|Parkway|Pkwy\\.?)$/i;\n    if (streetSuffixes.test(token)) {\n        return { isAddress: true, confidence: 0.95, reason: 'Street type indicator' };\n    }\n    // Directional indicators (medium confidence)\n    const directions = /^(North|N\\.?|South|S\\.?|East|E\\.?|West|W\\.?|Northeast|NE\\.?|Northwest|NW\\.?|Southeast|SE\\.?|Southwest|SW\\.?)$/i;\n    if (directions.test(token)) {\n        return { isAddress: true, confidence: 0.7, reason: 'Directional indicator' };\n    }\n    // Address with numbers (medium confidence)\n    if (/\\d/.test(token) && token.length >= 3) {\n        // House numbers, apartment numbers, ZIP codes\n        if (/^\\d{1,5}[A-Z]?$/.test(token) || /^\\d{5}(-\\d{4})?$/.test(token)) {\n            return { isAddress: true, confidence: 0.8, reason: 'House number or ZIP code pattern' };\n        }\n        if (/^#?\\d+[A-Z]?$/.test(token) || /^(Apt|Suite|Unit|Ste|#)\\s*\\d+[A-Z]?$/i.test(token)) {\n            return { isAddress: true, confidence: 0.85, reason: 'Apartment/suite number' };\n        }\n        // Generic number in address context\n        return { isAddress: true, confidence: 0.6, reason: 'Contains digits and could be part of address' };\n    }\n    // State abbreviations (high confidence)\n    const stateAbbrev = /^(AL|AK|AZ|AR|CA|CO|CT|DE|FL|GA|HI|ID|IL|IN|IA|KS|KY|LA|ME|MD|MA|MI|MN|MS|MO|MT|NE|NV|NH|NJ|NM|NY|NC|ND|OH|OK|OR|PA|RI|SC|SD|TN|TX|UT|VT|VA|WA|WV|WI|WY|DC)$/;\n    if (stateAbbrev.test(token.toUpperCase())) {\n        return { isAddress: true, confidence: 0.9, reason: 'US state abbreviation' };\n    }\n    return { isAddress: false, confidence: 0, reason: '' };\n}\n/**\n * Calculate confidence score for detection based on pattern strength and context\n */\nfunction calculateConfidence(kind, token, ocrConfidence = 0.9) {\n    const base = Math.min(ocrConfidence, 0.95); // Cap OCR confidence\n    switch (kind) {\n        case 'EMAIL':\n            // Higher confidence for well-formed emails\n            return token.includes('@') && token.includes('.') ? Math.min(base + 0.05, 1.0) : base * 0.8;\n        case 'PHONE':\n            const digits = token.replace(/\\D/g, '');\n            // Higher confidence for standard formats\n            if (digits.length === 10 || digits.length === 11)\n                return Math.min(base + 0.1, 1.0);\n            if (digits.length >= 7 && digits.length <= 15)\n                return base * 0.9;\n            return base * 0.7;\n        case 'PAN':\n            // Credit cards with Luhn validation get high confidence\n            return Math.min(base + 0.1, 1.0);\n        case 'SSN':\n            // SSN with proper validation gets high confidence\n            return Math.min(base + 0.15, 1.0);\n        case 'PASSPORT':\n            // Passport numbers get medium-high confidence\n            return Math.min(base + 0.05, 1.0);\n        case 'IBAN':\n            // IBAN with MOD 97 validation gets high confidence\n            return Math.min(base + 0.1, 1.0);\n        case 'ADDRESS':\n            // Address confidence varies by component type - handled in isAddressComponent\n            return base;\n        case 'NAME':\n            // Names are tricky - lower confidence to reduce false positives\n            return base * 0.7;\n        case 'BARCODE':\n            // QR codes/barcodes are typically very reliable\n            return 1.0;\n        case 'JWT':\n            // JWT format is distinctive\n            return Math.min(base + 0.05, 1.0);\n        case 'API_KEY':\n            // API keys have distinctive patterns\n            return Math.min(base + 0.1, 1.0);\n        default:\n            return base;\n    }\n}\n/** Detect whether a token is formatted like a JSON Web Token (JWT). */\nfunction isJWT(value) {\n    return /^[A-Za-z0-9_-]+\\.[A-Za-z0-9_-]+\\.[A-Za-z0-9_-]+$/.test(value.trim());\n}\n/** Detect whether a token looks like an AWS access key ID.  AWS keys\n * typically start with AKIA or ASIA followed by 16 uppercase letters or\n * digits. */\nfunction isAWSKey(value) {\n    return /^(A(KIA|SIA)[A-Z0-9]{16})$/.test(value.trim());\n}\n/**\n * Perform high‑level detection for a single token.  If the token matches\n * a sensitive pattern, this function returns an object describing the\n * detection; otherwise it returns null.  Note that this function does\n * not compute bounding boxes – it only classifies the token.  Bounding\n * boxes are provided by the OCR engine.\n */\nfunction detectToken(token) {\n    const raw = token.trim();\n    if (!raw)\n        return null;\n    // PAN (credit card number) – 13–19 digits with Luhn valid (check first to avoid phone conflicts)\n    const digitsOnly = raw.replace(/\\D/g, '');\n    if (digitsOnly.length >= 13 && digitsOnly.length <= 19 && isLuhnValid(digitsOnly)) {\n        return { kind: 'PAN', reason: 'Luhn valid primary account number', confidence: 0.95 };\n    }\n    // IBAN (starts with two letters followed by digits and letters)\n    const ibanPattern = /^[A-Z]{2}[0-9A-Z]{13,32}$/i;\n    if (ibanPattern.test(raw) && isValidIBAN(raw)) {\n        return { kind: 'IBAN', reason: 'Valid IBAN checksum', confidence: 0.95 };\n    }\n    // SSN (US format) - check before general phone patterns, including invalid ones\n    const ssnPattern = /^\\d{3}-\\d{2}-\\d{4}$/;\n    if (ssnPattern.test(raw)) {\n        if (isValidSSN(raw)) {\n            return { kind: 'SSN', reason: 'Valid US SSN format', confidence: 0.95 };\n        }\n        // Don't detect invalid SSNs as other types\n        return null;\n    }\n    // Passport number (US format)\n    const passportPattern = /^[A-Z]?\\d{8,9}$/i;\n    if (passportPattern.test(raw) && isValidUSPassport(raw.toUpperCase())) {\n        return { kind: 'PASSPORT', reason: 'Valid US passport number format', confidence: 0.9 };\n    }\n    // JWT - check early to prevent JWT being detected as address (contains many digits)\n    if (isJWT(raw) && raw.length > 50) {\n        return { kind: 'JWT', reason: 'Looks like a JWT token', confidence: 0.9 };\n    }\n    // Email - more strict pattern to reduce false positives\n    const emailPattern = /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i;\n    if (emailPattern.test(raw) && raw.includes('@') && raw.includes('.')) {\n        return { kind: 'EMAIL', reason: 'Matches email pattern', confidence: 0.9 };\n    }\n    // Phone number - enhanced detection with format validation\n    if (digitsOnly.length >= 7 && /\\d{3,}/.test(digitsOnly)) {\n        // North American format (10-11 digits)\n        if (digitsOnly.length === 10 || (digitsOnly.length === 11 && digitsOnly[0] === '1')) {\n            return { kind: 'PHONE', reason: 'North American phone format', confidence: 0.85 };\n        }\n        // International format (7-15 digits)\n        if (digitsOnly.length >= 7 && digitsOnly.length <= 15) {\n            return { kind: 'PHONE', reason: 'International phone format', confidence: 0.75 };\n        }\n    }\n    // Enhanced address detection\n    const addressResult = isAddressComponent(raw);\n    if (addressResult.isAddress) {\n        return { kind: 'ADDRESS', reason: addressResult.reason, confidence: addressResult.confidence };\n    }\n    // AWS access key id\n    if (isAWSKey(raw)) {\n        return { kind: 'API_KEY', reason: 'Looks like an AWS access key', confidence: 0.95 };\n    }\n    // Names (proper nouns) - enhanced with false positive reduction\n    const namePattern = /^[A-Z][a-z]{2,}$/;\n    if (namePattern.test(raw) && !/\\d/.test(raw) && raw.toUpperCase() !== raw) {\n        // Exclude common words that aren't names\n        const commonWords = /^(The|And|But|For|Are|This|That|With|Have|Will|From|They|Know|Want|Been|Good|Much|Some|Time|Very|When|Come|Here|Just|Like|Long|Make|Many|Over|Such|Take|Than|Them|Well|Were|What|Your|After|Before|Could|First|Found|Great|Other|Right|Should|These|Where|Which|While|Would|Years|Young|About|Again|Place|State|Still|Think|Three|Through|Under|Water|Write)$/i;\n        if (!commonWords.test(raw)) {\n            return { kind: 'NAME', reason: 'Likely proper name', confidence: 0.6 };\n        }\n    }\n    return null;\n}\n/**\n * Apply custom detection patterns to a token\n */\nfunction detectCustomPatterns(token, customPatterns) {\n    if (!customPatterns || customPatterns.length === 0)\n        return null;\n    for (const pattern of customPatterns) {\n        try {\n            const flags = pattern.caseSensitive === false ? 'i' : '';\n            const regex = new RegExp(pattern.pattern, flags);\n            if (regex.test(token)) {\n                return {\n                    kind: pattern.kind,\n                    reason: `Custom pattern: ${pattern.name}`,\n                    confidence: pattern.confidence\n                };\n            }\n        }\n        catch (error) {\n            // Skip invalid regex patterns\n            console.warn(`Invalid custom pattern ${pattern.id}: ${error}`);\n            continue;\n        }\n    }\n    return null;\n}\n/**\n * Enhanced detectToken that includes custom pattern support\n */\nfunction detectTokenWithCustomPatterns(token, customPatterns) {\n    // First check custom patterns (they take precedence)\n    if (customPatterns && customPatterns.length > 0) {\n        const customResult = detectCustomPatterns(token, customPatterns);\n        if (customResult)\n            return customResult;\n    }\n    // Fall back to standard detection\n    return detectToken(token);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29yZS1kZXRlY3QvZGlzdC9kZXRlY3RvcnMvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7QUFBQTtBQUNBO0FBQ0EsZ0VBQWdFO0FBQ2hFO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxtQ0FBbUMsUUFBUTtBQUMzQztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CLG9CQUFvQjtBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLDRCQUE0Qiw0QkFBNEI7QUFDeEQ7QUFDQTtBQUNPO0FBQ1AsMkJBQTJCLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRTtBQUM3QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBLGFBQWEsRUFBRTtBQUNmO0FBQ0E7QUFDQSxrQkFBa0IsRUFBRTtBQUNwQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCLElBQUksNkJBQTZCLEVBQUUsS0FBSyxFQUFFO0FBQzNELHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQLGdEQUFnRDtBQUNoRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUCxpQ0FBaUMsR0FBRztBQUNwQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsZ0NBQWdDLEVBQUUsU0FBUyxNQUFNO0FBQ2pEO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSw0QkFBNEIsRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFO0FBQzFDO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVDQUF1QyxJQUFJO0FBQzNDO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBO0FBQ0EsNkRBQTZELEdBQUc7QUFDaEU7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBLHNDQUFzQyxHQUFHO0FBQ3pDO0FBQ0E7QUFDQSxxQkFBcUI7QUFDckI7QUFDQTtBQUNBO0FBQ0EscUJBQXFCO0FBQ3JCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpQkFBaUI7QUFDakI7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQSxxQ0FBcUMsR0FBRztBQUN4QztBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNPO0FBQ1A7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLGFBQWE7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbURBQW1ELFdBQVcsSUFBSSxNQUFNO0FBQ3hFO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSIsInNvdXJjZXMiOlsid2VicGFjazovL0BjbGVhbnNoYXJlL3VpLy4uL2NvcmUtZGV0ZWN0L2Rpc3QvZGV0ZWN0b3JzL2luZGV4LmpzP2RhMzUiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBEZXRlcm1pbmUgd2hldGhlciBhIHN0cmluZyBvZiBkaWdpdHMgcmVwcmVzZW50cyBhIHZhbGlkIFBBTiBhY2NvcmRpbmdcbiAqIHRvIHRoZSBMdWhuIGNoZWNrc3VtIGFsZ29yaXRobS4gIE9ubHkgZGlnaXRzIGFyZSBjb25zaWRlcmVkOyBhbGxcbiAqIG5vbuKAkW51bWVyaWMgY2hhcmFjdGVycyBzaG91bGQgYmUgc3RyaXBwZWQgYmVmb3JlIGNhbGxpbmcgdGhpcyBmdW5jdGlvbi5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzTHVoblZhbGlkKHZhbHVlKSB7XG4gICAgbGV0IHN1bSA9IDA7XG4gICAgbGV0IHNob3VsZERvdWJsZSA9IGZhbHNlO1xuICAgIGZvciAobGV0IGkgPSB2YWx1ZS5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICBjb25zdCBjID0gdmFsdWUuY2hhckNvZGVBdChpKSAtIDQ4O1xuICAgICAgICBpZiAoYyA8IDAgfHwgYyA+IDkpIHtcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGlnaXQgPSBjO1xuICAgICAgICBpZiAoc2hvdWxkRG91YmxlKSB7XG4gICAgICAgICAgICBkaWdpdCAqPSAyO1xuICAgICAgICAgICAgaWYgKGRpZ2l0ID4gOSlcbiAgICAgICAgICAgICAgICBkaWdpdCAtPSA5O1xuICAgICAgICB9XG4gICAgICAgIHN1bSArPSBkaWdpdDtcbiAgICAgICAgc2hvdWxkRG91YmxlID0gIXNob3VsZERvdWJsZTtcbiAgICB9XG4gICAgcmV0dXJuIHN1bSAlIDEwID09PSAwO1xufVxuLyoqXG4gKiBWYWxpZGF0ZSBhbiBJbnRlcm5hdGlvbmFsIEJhbmsgQWNjb3VudCBOdW1iZXIgKElCQU4pIHVzaW5nIHRoZSBNT0TCoDk3XG4gKiBhbGdvcml0aG0gZGVmaW5lZCBpbiBJU0/CoDEzNjE2LiAgTGV0dGVycyBhcmUgbWFwcGVkIEE9MTAsIEI9MTEsIOKAplxuICogVGhlIGZ1bmN0aW9uIHJldHVybnMgdHJ1ZSB3aGVuIHRoZSBJQkFOIGFwcGVhcnMgc3RydWN0dXJhbGx5IHZhbGlkLiAgSXRcbiAqIGRvZXMgbm90IHZlcmlmeSB0aGF0IHRoZSBhY2NvdW50IGV4aXN0cy5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRJQkFOKGliYW4pIHtcbiAgICBjb25zdCBjbGVhbmVkID0gaWJhbi5yZXBsYWNlKC9cXHMrL2csICcnKS50b1VwcGVyQ2FzZSgpO1xuICAgIC8vIEJhc2ljIGxlbmd0aCBjaGVjazogSUJBTnMgYXJlIGJldHdlZW4gMTUgYW5kIDM0IGNoYXJhY3RlcnMgbG9uZ1xuICAgIGlmIChjbGVhbmVkLmxlbmd0aCA8IDE1IHx8IGNsZWFuZWQubGVuZ3RoID4gMzQpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICAvLyBNb3ZlIHRoZSBmb3VyIGluaXRpYWwgY2hhcmFjdGVycyB0byB0aGUgZW5kIG9mIHRoZSBzdHJpbmdcbiAgICBjb25zdCByZWFycmFuZ2VkID0gY2xlYW5lZC5zbGljZSg0KSArIGNsZWFuZWQuc2xpY2UoMCwgNCk7XG4gICAgLy8gUmVwbGFjZSBsZXR0ZXJzIHdpdGggbnVtYmVyczogQT0xMCwgQj0xMSwg4oCmXG4gICAgbGV0IG51bWVyaWMgPSAnJztcbiAgICBmb3IgKGNvbnN0IGNoIG9mIHJlYXJyYW5nZWQpIHtcbiAgICAgICAgY29uc3QgY29kZSA9IGNoLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIGlmIChjb2RlID49IDQ4ICYmIGNvZGUgPD0gNTcpIHtcbiAgICAgICAgICAgIG51bWVyaWMgKz0gY2g7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSBpZiAoY29kZSA+PSA2NSAmJiBjb2RlIDw9IDkwKSB7XG4gICAgICAgICAgICBudW1lcmljICs9IChjb2RlIC0gNTUpLnRvU3RyaW5nKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQ29tcHV0ZSB0aGUgcmVtYWluZGVyIHVzaW5nIG1vZCA5N1xuICAgIGxldCByZW1haW5kZXIgPSAwO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtZXJpYy5sZW5ndGg7IGkrKykge1xuICAgICAgICByZW1haW5kZXIgPSAocmVtYWluZGVyICogMTAgKyBOdW1iZXIobnVtZXJpY1tpXSkpICUgOTc7XG4gICAgfVxuICAgIHJldHVybiByZW1haW5kZXIgPT09IDE7XG59XG4vKipcbiAqIFZhbGlkYXRlIGEgVVMgU29jaWFsIFNlY3VyaXR5IE51bWJlciAoU1NOKS4gIFBlcmZvcm1zIGJhc2ljXG4gKiBzdHJ1Y3R1cmFsIGNoZWNrczogWFhYLVhYLVhYWFggd2hlcmUgdGhlIGFyZWEgbnVtYmVyIGlzIG5vdCAwMDAsXG4gKiA2NjYsIG9yIGJldHdlZW4gOTAw4oCTOTk5OyB0aGUgZ3JvdXAgbnVtYmVyIGlzIG5vdCAwMDsgYW5kIHRoZSBzZXJpYWxcbiAqIG51bWJlciBpcyBub3QgMDAwMC5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRTU04odmFsdWUpIHtcbiAgICBjb25zdCBzc25SZWdleCA9IC9eKFxcZHszfSktKFxcZHsyfSktKFxcZHs0fSkkLztcbiAgICBjb25zdCBtYXRjaCA9IHNzblJlZ2V4LmV4ZWModmFsdWUpO1xuICAgIGlmICghbWF0Y2gpXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBjb25zdCBhcmVhID0gcGFyc2VJbnQobWF0Y2hbMV0sIDEwKTtcbiAgICBjb25zdCBncm91cCA9IHBhcnNlSW50KG1hdGNoWzJdLCAxMCk7XG4gICAgY29uc3Qgc2VyaWFsID0gcGFyc2VJbnQobWF0Y2hbM10sIDEwKTtcbiAgICBpZiAoYXJlYSA9PT0gMCB8fCBncm91cCA9PT0gMCB8fCBzZXJpYWwgPT09IDApXG4gICAgICAgIHJldHVybiBmYWxzZTtcbiAgICBpZiAoYXJlYSA9PT0gNjY2IHx8IGFyZWEgPj0gOTAwKVxuICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgcmV0dXJuIHRydWU7XG59XG4vKipcbiAqIFZhbGlkYXRlIFVTIHBhc3Nwb3J0IG51bWJlciBmb3JtYXQuIFVTIHBhc3Nwb3J0cyBhcmUgdHlwaWNhbGx5IDkgZGlnaXRzXG4gKiBvciAxIGxldHRlciBmb2xsb3dlZCBieSA4IGRpZ2l0cyAobmV3ZXIgZm9ybWF0KS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzVmFsaWRVU1Bhc3Nwb3J0KHZhbHVlKSB7XG4gICAgY29uc3QgY2xlYW5lZCA9IHZhbHVlLnJlcGxhY2UoL1xccysvZywgJycpO1xuICAgIC8vIEZvcm1hdCAxOiA5IGRpZ2l0cyAob2xkZXIgZm9ybWF0KVxuICAgIGlmICgvXlxcZHs5fSQvLnRlc3QoY2xlYW5lZCkpXG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIC8vIEZvcm1hdCAyOiAxIGxldHRlciArIDggZGlnaXRzIChuZXdlciBmb3JtYXQpIFxuICAgIGlmICgvXltBLVpdXFxkezh9JC8udGVzdChjbGVhbmVkKSlcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgcmV0dXJuIGZhbHNlO1xufVxuLyoqXG4gKiBFbmhhbmNlZCBhZGRyZXNzIGRldGVjdGlvbiB3aXRoIGNvbW1vbiBhZGRyZXNzIGNvbXBvbmVudHNcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzQWRkcmVzc0NvbXBvbmVudCh2YWx1ZSkge1xuICAgIGNvbnN0IHRva2VuID0gdmFsdWUudHJpbSgpO1xuICAgIC8vIFN0cmVldCBzdWZmaXhlcyAoaGlnaCBjb25maWRlbmNlKVxuICAgIGNvbnN0IHN0cmVldFN1ZmZpeGVzID0gL14oU3RyZWV0fFN0XFwuP3xBdmVudWV8QXZlXFwuP3xSb2FkfFJkXFwuP3xMYW5lfExuXFwuP3xCb3VsZXZhcmR8Qmx2ZFxcLj98RHJpdmV8RHJcXC4/fENpcmNsZXxDaXJcXC4/fENvdXJ0fEN0XFwuP3xQbGFjZXxQbFxcLj98V2F5fFBhcmt3YXl8UGt3eVxcLj8pJC9pO1xuICAgIGlmIChzdHJlZXRTdWZmaXhlcy50ZXN0KHRva2VuKSkge1xuICAgICAgICByZXR1cm4geyBpc0FkZHJlc3M6IHRydWUsIGNvbmZpZGVuY2U6IDAuOTUsIHJlYXNvbjogJ1N0cmVldCB0eXBlIGluZGljYXRvcicgfTtcbiAgICB9XG4gICAgLy8gRGlyZWN0aW9uYWwgaW5kaWNhdG9ycyAobWVkaXVtIGNvbmZpZGVuY2UpXG4gICAgY29uc3QgZGlyZWN0aW9ucyA9IC9eKE5vcnRofE5cXC4/fFNvdXRofFNcXC4/fEVhc3R8RVxcLj98V2VzdHxXXFwuP3xOb3J0aGVhc3R8TkVcXC4/fE5vcnRod2VzdHxOV1xcLj98U291dGhlYXN0fFNFXFwuP3xTb3V0aHdlc3R8U1dcXC4/KSQvaTtcbiAgICBpZiAoZGlyZWN0aW9ucy50ZXN0KHRva2VuKSkge1xuICAgICAgICByZXR1cm4geyBpc0FkZHJlc3M6IHRydWUsIGNvbmZpZGVuY2U6IDAuNywgcmVhc29uOiAnRGlyZWN0aW9uYWwgaW5kaWNhdG9yJyB9O1xuICAgIH1cbiAgICAvLyBBZGRyZXNzIHdpdGggbnVtYmVycyAobWVkaXVtIGNvbmZpZGVuY2UpXG4gICAgaWYgKC9cXGQvLnRlc3QodG9rZW4pICYmIHRva2VuLmxlbmd0aCA+PSAzKSB7XG4gICAgICAgIC8vIEhvdXNlIG51bWJlcnMsIGFwYXJ0bWVudCBudW1iZXJzLCBaSVAgY29kZXNcbiAgICAgICAgaWYgKC9eXFxkezEsNX1bQS1aXT8kLy50ZXN0KHRva2VuKSB8fCAvXlxcZHs1fSgtXFxkezR9KT8kLy50ZXN0KHRva2VuKSkge1xuICAgICAgICAgICAgcmV0dXJuIHsgaXNBZGRyZXNzOiB0cnVlLCBjb25maWRlbmNlOiAwLjgsIHJlYXNvbjogJ0hvdXNlIG51bWJlciBvciBaSVAgY29kZSBwYXR0ZXJuJyB9O1xuICAgICAgICB9XG4gICAgICAgIGlmICgvXiM/XFxkK1tBLVpdPyQvLnRlc3QodG9rZW4pIHx8IC9eKEFwdHxTdWl0ZXxVbml0fFN0ZXwjKVxccypcXGQrW0EtWl0/JC9pLnRlc3QodG9rZW4pKSB7XG4gICAgICAgICAgICByZXR1cm4geyBpc0FkZHJlc3M6IHRydWUsIGNvbmZpZGVuY2U6IDAuODUsIHJlYXNvbjogJ0FwYXJ0bWVudC9zdWl0ZSBudW1iZXInIH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gR2VuZXJpYyBudW1iZXIgaW4gYWRkcmVzcyBjb250ZXh0XG4gICAgICAgIHJldHVybiB7IGlzQWRkcmVzczogdHJ1ZSwgY29uZmlkZW5jZTogMC42LCByZWFzb246ICdDb250YWlucyBkaWdpdHMgYW5kIGNvdWxkIGJlIHBhcnQgb2YgYWRkcmVzcycgfTtcbiAgICB9XG4gICAgLy8gU3RhdGUgYWJicmV2aWF0aW9ucyAoaGlnaCBjb25maWRlbmNlKVxuICAgIGNvbnN0IHN0YXRlQWJicmV2ID0gL14oQUx8QUt8QVp8QVJ8Q0F8Q098Q1R8REV8Rkx8R0F8SEl8SUR8SUx8SU58SUF8S1N8S1l8TEF8TUV8TUR8TUF8TUl8TU58TVN8TU98TVR8TkV8TlZ8Tkh8Tkp8Tk18Tll8TkN8TkR8T0h8T0t8T1J8UEF8Ukl8U0N8U0R8VE58VFh8VVR8VlR8VkF8V0F8V1Z8V0l8V1l8REMpJC87XG4gICAgaWYgKHN0YXRlQWJicmV2LnRlc3QodG9rZW4udG9VcHBlckNhc2UoKSkpIHtcbiAgICAgICAgcmV0dXJuIHsgaXNBZGRyZXNzOiB0cnVlLCBjb25maWRlbmNlOiAwLjksIHJlYXNvbjogJ1VTIHN0YXRlIGFiYnJldmlhdGlvbicgfTtcbiAgICB9XG4gICAgcmV0dXJuIHsgaXNBZGRyZXNzOiBmYWxzZSwgY29uZmlkZW5jZTogMCwgcmVhc29uOiAnJyB9O1xufVxuLyoqXG4gKiBDYWxjdWxhdGUgY29uZmlkZW5jZSBzY29yZSBmb3IgZGV0ZWN0aW9uIGJhc2VkIG9uIHBhdHRlcm4gc3RyZW5ndGggYW5kIGNvbnRleHRcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUNvbmZpZGVuY2Uoa2luZCwgdG9rZW4sIG9jckNvbmZpZGVuY2UgPSAwLjkpIHtcbiAgICBjb25zdCBiYXNlID0gTWF0aC5taW4ob2NyQ29uZmlkZW5jZSwgMC45NSk7IC8vIENhcCBPQ1IgY29uZmlkZW5jZVxuICAgIHN3aXRjaCAoa2luZCkge1xuICAgICAgICBjYXNlICdFTUFJTCc6XG4gICAgICAgICAgICAvLyBIaWdoZXIgY29uZmlkZW5jZSBmb3Igd2VsbC1mb3JtZWQgZW1haWxzXG4gICAgICAgICAgICByZXR1cm4gdG9rZW4uaW5jbHVkZXMoJ0AnKSAmJiB0b2tlbi5pbmNsdWRlcygnLicpID8gTWF0aC5taW4oYmFzZSArIDAuMDUsIDEuMCkgOiBiYXNlICogMC44O1xuICAgICAgICBjYXNlICdQSE9ORSc6XG4gICAgICAgICAgICBjb25zdCBkaWdpdHMgPSB0b2tlbi5yZXBsYWNlKC9cXEQvZywgJycpO1xuICAgICAgICAgICAgLy8gSGlnaGVyIGNvbmZpZGVuY2UgZm9yIHN0YW5kYXJkIGZvcm1hdHNcbiAgICAgICAgICAgIGlmIChkaWdpdHMubGVuZ3RoID09PSAxMCB8fCBkaWdpdHMubGVuZ3RoID09PSAxMSlcbiAgICAgICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oYmFzZSArIDAuMSwgMS4wKTtcbiAgICAgICAgICAgIGlmIChkaWdpdHMubGVuZ3RoID49IDcgJiYgZGlnaXRzLmxlbmd0aCA8PSAxNSlcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZSAqIDAuOTtcbiAgICAgICAgICAgIHJldHVybiBiYXNlICogMC43O1xuICAgICAgICBjYXNlICdQQU4nOlxuICAgICAgICAgICAgLy8gQ3JlZGl0IGNhcmRzIHdpdGggTHVobiB2YWxpZGF0aW9uIGdldCBoaWdoIGNvbmZpZGVuY2VcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihiYXNlICsgMC4xLCAxLjApO1xuICAgICAgICBjYXNlICdTU04nOlxuICAgICAgICAgICAgLy8gU1NOIHdpdGggcHJvcGVyIHZhbGlkYXRpb24gZ2V0cyBoaWdoIGNvbmZpZGVuY2VcbiAgICAgICAgICAgIHJldHVybiBNYXRoLm1pbihiYXNlICsgMC4xNSwgMS4wKTtcbiAgICAgICAgY2FzZSAnUEFTU1BPUlQnOlxuICAgICAgICAgICAgLy8gUGFzc3BvcnQgbnVtYmVycyBnZXQgbWVkaXVtLWhpZ2ggY29uZmlkZW5jZVxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGJhc2UgKyAwLjA1LCAxLjApO1xuICAgICAgICBjYXNlICdJQkFOJzpcbiAgICAgICAgICAgIC8vIElCQU4gd2l0aCBNT0QgOTcgdmFsaWRhdGlvbiBnZXRzIGhpZ2ggY29uZmlkZW5jZVxuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGJhc2UgKyAwLjEsIDEuMCk7XG4gICAgICAgIGNhc2UgJ0FERFJFU1MnOlxuICAgICAgICAgICAgLy8gQWRkcmVzcyBjb25maWRlbmNlIHZhcmllcyBieSBjb21wb25lbnQgdHlwZSAtIGhhbmRsZWQgaW4gaXNBZGRyZXNzQ29tcG9uZW50XG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICAgICAgY2FzZSAnTkFNRSc6XG4gICAgICAgICAgICAvLyBOYW1lcyBhcmUgdHJpY2t5IC0gbG93ZXIgY29uZmlkZW5jZSB0byByZWR1Y2UgZmFsc2UgcG9zaXRpdmVzXG4gICAgICAgICAgICByZXR1cm4gYmFzZSAqIDAuNztcbiAgICAgICAgY2FzZSAnQkFSQ09ERSc6XG4gICAgICAgICAgICAvLyBRUiBjb2Rlcy9iYXJjb2RlcyBhcmUgdHlwaWNhbGx5IHZlcnkgcmVsaWFibGVcbiAgICAgICAgICAgIHJldHVybiAxLjA7XG4gICAgICAgIGNhc2UgJ0pXVCc6XG4gICAgICAgICAgICAvLyBKV1QgZm9ybWF0IGlzIGRpc3RpbmN0aXZlXG4gICAgICAgICAgICByZXR1cm4gTWF0aC5taW4oYmFzZSArIDAuMDUsIDEuMCk7XG4gICAgICAgIGNhc2UgJ0FQSV9LRVknOlxuICAgICAgICAgICAgLy8gQVBJIGtleXMgaGF2ZSBkaXN0aW5jdGl2ZSBwYXR0ZXJuc1xuICAgICAgICAgICAgcmV0dXJuIE1hdGgubWluKGJhc2UgKyAwLjEsIDEuMCk7XG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gYmFzZTtcbiAgICB9XG59XG4vKiogRGV0ZWN0IHdoZXRoZXIgYSB0b2tlbiBpcyBmb3JtYXR0ZWQgbGlrZSBhIEpTT04gV2ViIFRva2VuIChKV1QpLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGlzSldUKHZhbHVlKSB7XG4gICAgcmV0dXJuIC9eW0EtWmEtejAtOV8tXStcXC5bQS1aYS16MC05Xy1dK1xcLltBLVphLXowLTlfLV0rJC8udGVzdCh2YWx1ZS50cmltKCkpO1xufVxuLyoqIERldGVjdCB3aGV0aGVyIGEgdG9rZW4gbG9va3MgbGlrZSBhbiBBV1MgYWNjZXNzIGtleSBJRC4gIEFXUyBrZXlzXG4gKiB0eXBpY2FsbHkgc3RhcnQgd2l0aCBBS0lBIG9yIEFTSUEgZm9sbG93ZWQgYnkgMTYgdXBwZXJjYXNlIGxldHRlcnMgb3JcbiAqIGRpZ2l0cy4gKi9cbmV4cG9ydCBmdW5jdGlvbiBpc0FXU0tleSh2YWx1ZSkge1xuICAgIHJldHVybiAvXihBKEtJQXxTSUEpW0EtWjAtOV17MTZ9KSQvLnRlc3QodmFsdWUudHJpbSgpKTtcbn1cbi8qKlxuICogUGVyZm9ybSBoaWdo4oCRbGV2ZWwgZGV0ZWN0aW9uIGZvciBhIHNpbmdsZSB0b2tlbi4gIElmIHRoZSB0b2tlbiBtYXRjaGVzXG4gKiBhIHNlbnNpdGl2ZSBwYXR0ZXJuLCB0aGlzIGZ1bmN0aW9uIHJldHVybnMgYW4gb2JqZWN0IGRlc2NyaWJpbmcgdGhlXG4gKiBkZXRlY3Rpb247IG90aGVyd2lzZSBpdCByZXR1cm5zIG51bGwuICBOb3RlIHRoYXQgdGhpcyBmdW5jdGlvbiBkb2VzXG4gKiBub3QgY29tcHV0ZSBib3VuZGluZyBib3hlcyDigJMgaXQgb25seSBjbGFzc2lmaWVzIHRoZSB0b2tlbi4gIEJvdW5kaW5nXG4gKiBib3hlcyBhcmUgcHJvdmlkZWQgYnkgdGhlIE9DUiBlbmdpbmUuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RUb2tlbih0b2tlbikge1xuICAgIGNvbnN0IHJhdyA9IHRva2VuLnRyaW0oKTtcbiAgICBpZiAoIXJhdylcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgLy8gUEFOIChjcmVkaXQgY2FyZCBudW1iZXIpIOKAkyAxM+KAkzE5IGRpZ2l0cyB3aXRoIEx1aG4gdmFsaWQgKGNoZWNrIGZpcnN0IHRvIGF2b2lkIHBob25lIGNvbmZsaWN0cylcbiAgICBjb25zdCBkaWdpdHNPbmx5ID0gcmF3LnJlcGxhY2UoL1xcRC9nLCAnJyk7XG4gICAgaWYgKGRpZ2l0c09ubHkubGVuZ3RoID49IDEzICYmIGRpZ2l0c09ubHkubGVuZ3RoIDw9IDE5ICYmIGlzTHVoblZhbGlkKGRpZ2l0c09ubHkpKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICdQQU4nLCByZWFzb246ICdMdWhuIHZhbGlkIHByaW1hcnkgYWNjb3VudCBudW1iZXInLCBjb25maWRlbmNlOiAwLjk1IH07XG4gICAgfVxuICAgIC8vIElCQU4gKHN0YXJ0cyB3aXRoIHR3byBsZXR0ZXJzIGZvbGxvd2VkIGJ5IGRpZ2l0cyBhbmQgbGV0dGVycylcbiAgICBjb25zdCBpYmFuUGF0dGVybiA9IC9eW0EtWl17Mn1bMC05QS1aXXsxMywzMn0kL2k7XG4gICAgaWYgKGliYW5QYXR0ZXJuLnRlc3QocmF3KSAmJiBpc1ZhbGlkSUJBTihyYXcpKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICdJQkFOJywgcmVhc29uOiAnVmFsaWQgSUJBTiBjaGVja3N1bScsIGNvbmZpZGVuY2U6IDAuOTUgfTtcbiAgICB9XG4gICAgLy8gU1NOIChVUyBmb3JtYXQpIC0gY2hlY2sgYmVmb3JlIGdlbmVyYWwgcGhvbmUgcGF0dGVybnMsIGluY2x1ZGluZyBpbnZhbGlkIG9uZXNcbiAgICBjb25zdCBzc25QYXR0ZXJuID0gL15cXGR7M30tXFxkezJ9LVxcZHs0fSQvO1xuICAgIGlmIChzc25QYXR0ZXJuLnRlc3QocmF3KSkge1xuICAgICAgICBpZiAoaXNWYWxpZFNTTihyYXcpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBraW5kOiAnU1NOJywgcmVhc29uOiAnVmFsaWQgVVMgU1NOIGZvcm1hdCcsIGNvbmZpZGVuY2U6IDAuOTUgfTtcbiAgICAgICAgfVxuICAgICAgICAvLyBEb24ndCBkZXRlY3QgaW52YWxpZCBTU05zIGFzIG90aGVyIHR5cGVzXG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbiAgICAvLyBQYXNzcG9ydCBudW1iZXIgKFVTIGZvcm1hdClcbiAgICBjb25zdCBwYXNzcG9ydFBhdHRlcm4gPSAvXltBLVpdP1xcZHs4LDl9JC9pO1xuICAgIGlmIChwYXNzcG9ydFBhdHRlcm4udGVzdChyYXcpICYmIGlzVmFsaWRVU1Bhc3Nwb3J0KHJhdy50b1VwcGVyQ2FzZSgpKSkge1xuICAgICAgICByZXR1cm4geyBraW5kOiAnUEFTU1BPUlQnLCByZWFzb246ICdWYWxpZCBVUyBwYXNzcG9ydCBudW1iZXIgZm9ybWF0JywgY29uZmlkZW5jZTogMC45IH07XG4gICAgfVxuICAgIC8vIEpXVCAtIGNoZWNrIGVhcmx5IHRvIHByZXZlbnQgSldUIGJlaW5nIGRldGVjdGVkIGFzIGFkZHJlc3MgKGNvbnRhaW5zIG1hbnkgZGlnaXRzKVxuICAgIGlmIChpc0pXVChyYXcpICYmIHJhdy5sZW5ndGggPiA1MCkge1xuICAgICAgICByZXR1cm4geyBraW5kOiAnSldUJywgcmVhc29uOiAnTG9va3MgbGlrZSBhIEpXVCB0b2tlbicsIGNvbmZpZGVuY2U6IDAuOSB9O1xuICAgIH1cbiAgICAvLyBFbWFpbCAtIG1vcmUgc3RyaWN0IHBhdHRlcm4gdG8gcmVkdWNlIGZhbHNlIHBvc2l0aXZlc1xuICAgIGNvbnN0IGVtYWlsUGF0dGVybiA9IC9eW0EtWjAtOS5fJSstXStAW0EtWjAtOS4tXStcXC5bQS1aXXsyLH0kL2k7XG4gICAgaWYgKGVtYWlsUGF0dGVybi50ZXN0KHJhdykgJiYgcmF3LmluY2x1ZGVzKCdAJykgJiYgcmF3LmluY2x1ZGVzKCcuJykpIHtcbiAgICAgICAgcmV0dXJuIHsga2luZDogJ0VNQUlMJywgcmVhc29uOiAnTWF0Y2hlcyBlbWFpbCBwYXR0ZXJuJywgY29uZmlkZW5jZTogMC45IH07XG4gICAgfVxuICAgIC8vIFBob25lIG51bWJlciAtIGVuaGFuY2VkIGRldGVjdGlvbiB3aXRoIGZvcm1hdCB2YWxpZGF0aW9uXG4gICAgaWYgKGRpZ2l0c09ubHkubGVuZ3RoID49IDcgJiYgL1xcZHszLH0vLnRlc3QoZGlnaXRzT25seSkpIHtcbiAgICAgICAgLy8gTm9ydGggQW1lcmljYW4gZm9ybWF0ICgxMC0xMSBkaWdpdHMpXG4gICAgICAgIGlmIChkaWdpdHNPbmx5Lmxlbmd0aCA9PT0gMTAgfHwgKGRpZ2l0c09ubHkubGVuZ3RoID09PSAxMSAmJiBkaWdpdHNPbmx5WzBdID09PSAnMScpKSB7XG4gICAgICAgICAgICByZXR1cm4geyBraW5kOiAnUEhPTkUnLCByZWFzb246ICdOb3J0aCBBbWVyaWNhbiBwaG9uZSBmb3JtYXQnLCBjb25maWRlbmNlOiAwLjg1IH07XG4gICAgICAgIH1cbiAgICAgICAgLy8gSW50ZXJuYXRpb25hbCBmb3JtYXQgKDctMTUgZGlnaXRzKVxuICAgICAgICBpZiAoZGlnaXRzT25seS5sZW5ndGggPj0gNyAmJiBkaWdpdHNPbmx5Lmxlbmd0aCA8PSAxNSkge1xuICAgICAgICAgICAgcmV0dXJuIHsga2luZDogJ1BIT05FJywgcmVhc29uOiAnSW50ZXJuYXRpb25hbCBwaG9uZSBmb3JtYXQnLCBjb25maWRlbmNlOiAwLjc1IH07XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gRW5oYW5jZWQgYWRkcmVzcyBkZXRlY3Rpb25cbiAgICBjb25zdCBhZGRyZXNzUmVzdWx0ID0gaXNBZGRyZXNzQ29tcG9uZW50KHJhdyk7XG4gICAgaWYgKGFkZHJlc3NSZXN1bHQuaXNBZGRyZXNzKSB7XG4gICAgICAgIHJldHVybiB7IGtpbmQ6ICdBRERSRVNTJywgcmVhc29uOiBhZGRyZXNzUmVzdWx0LnJlYXNvbiwgY29uZmlkZW5jZTogYWRkcmVzc1Jlc3VsdC5jb25maWRlbmNlIH07XG4gICAgfVxuICAgIC8vIEFXUyBhY2Nlc3Mga2V5IGlkXG4gICAgaWYgKGlzQVdTS2V5KHJhdykpIHtcbiAgICAgICAgcmV0dXJuIHsga2luZDogJ0FQSV9LRVknLCByZWFzb246ICdMb29rcyBsaWtlIGFuIEFXUyBhY2Nlc3Mga2V5JywgY29uZmlkZW5jZTogMC45NSB9O1xuICAgIH1cbiAgICAvLyBOYW1lcyAocHJvcGVyIG5vdW5zKSAtIGVuaGFuY2VkIHdpdGggZmFsc2UgcG9zaXRpdmUgcmVkdWN0aW9uXG4gICAgY29uc3QgbmFtZVBhdHRlcm4gPSAvXltBLVpdW2Etel17Mix9JC87XG4gICAgaWYgKG5hbWVQYXR0ZXJuLnRlc3QocmF3KSAmJiAhL1xcZC8udGVzdChyYXcpICYmIHJhdy50b1VwcGVyQ2FzZSgpICE9PSByYXcpIHtcbiAgICAgICAgLy8gRXhjbHVkZSBjb21tb24gd29yZHMgdGhhdCBhcmVuJ3QgbmFtZXNcbiAgICAgICAgY29uc3QgY29tbW9uV29yZHMgPSAvXihUaGV8QW5kfEJ1dHxGb3J8QXJlfFRoaXN8VGhhdHxXaXRofEhhdmV8V2lsbHxGcm9tfFRoZXl8S25vd3xXYW50fEJlZW58R29vZHxNdWNofFNvbWV8VGltZXxWZXJ5fFdoZW58Q29tZXxIZXJlfEp1c3R8TGlrZXxMb25nfE1ha2V8TWFueXxPdmVyfFN1Y2h8VGFrZXxUaGFufFRoZW18V2VsbHxXZXJlfFdoYXR8WW91cnxBZnRlcnxCZWZvcmV8Q291bGR8Rmlyc3R8Rm91bmR8R3JlYXR8T3RoZXJ8UmlnaHR8U2hvdWxkfFRoZXNlfFdoZXJlfFdoaWNofFdoaWxlfFdvdWxkfFllYXJzfFlvdW5nfEFib3V0fEFnYWlufFBsYWNlfFN0YXRlfFN0aWxsfFRoaW5rfFRocmVlfFRocm91Z2h8VW5kZXJ8V2F0ZXJ8V3JpdGUpJC9pO1xuICAgICAgICBpZiAoIWNvbW1vbldvcmRzLnRlc3QocmF3KSkge1xuICAgICAgICAgICAgcmV0dXJuIHsga2luZDogJ05BTUUnLCByZWFzb246ICdMaWtlbHkgcHJvcGVyIG5hbWUnLCBjb25maWRlbmNlOiAwLjYgfTtcbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbnVsbDtcbn1cbi8qKlxuICogQXBwbHkgY3VzdG9tIGRldGVjdGlvbiBwYXR0ZXJucyB0byBhIHRva2VuXG4gKi9cbmV4cG9ydCBmdW5jdGlvbiBkZXRlY3RDdXN0b21QYXR0ZXJucyh0b2tlbiwgY3VzdG9tUGF0dGVybnMpIHtcbiAgICBpZiAoIWN1c3RvbVBhdHRlcm5zIHx8IGN1c3RvbVBhdHRlcm5zLmxlbmd0aCA9PT0gMClcbiAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgZm9yIChjb25zdCBwYXR0ZXJuIG9mIGN1c3RvbVBhdHRlcm5zKSB7XG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgICBjb25zdCBmbGFncyA9IHBhdHRlcm4uY2FzZVNlbnNpdGl2ZSA9PT0gZmFsc2UgPyAnaScgOiAnJztcbiAgICAgICAgICAgIGNvbnN0IHJlZ2V4ID0gbmV3IFJlZ0V4cChwYXR0ZXJuLnBhdHRlcm4sIGZsYWdzKTtcbiAgICAgICAgICAgIGlmIChyZWdleC50ZXN0KHRva2VuKSkge1xuICAgICAgICAgICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6IHBhdHRlcm4ua2luZCxcbiAgICAgICAgICAgICAgICAgICAgcmVhc29uOiBgQ3VzdG9tIHBhdHRlcm46ICR7cGF0dGVybi5uYW1lfWAsXG4gICAgICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IHBhdHRlcm4uY29uZmlkZW5jZVxuICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgICAgICAvLyBTa2lwIGludmFsaWQgcmVnZXggcGF0dGVybnNcbiAgICAgICAgICAgIGNvbnNvbGUud2FybihgSW52YWxpZCBjdXN0b20gcGF0dGVybiAke3BhdHRlcm4uaWR9OiAke2Vycm9yfWApO1xuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIG51bGw7XG59XG4vKipcbiAqIEVuaGFuY2VkIGRldGVjdFRva2VuIHRoYXQgaW5jbHVkZXMgY3VzdG9tIHBhdHRlcm4gc3VwcG9ydFxuICovXG5leHBvcnQgZnVuY3Rpb24gZGV0ZWN0VG9rZW5XaXRoQ3VzdG9tUGF0dGVybnModG9rZW4sIGN1c3RvbVBhdHRlcm5zKSB7XG4gICAgLy8gRmlyc3QgY2hlY2sgY3VzdG9tIHBhdHRlcm5zICh0aGV5IHRha2UgcHJlY2VkZW5jZSlcbiAgICBpZiAoY3VzdG9tUGF0dGVybnMgJiYgY3VzdG9tUGF0dGVybnMubGVuZ3RoID4gMCkge1xuICAgICAgICBjb25zdCBjdXN0b21SZXN1bHQgPSBkZXRlY3RDdXN0b21QYXR0ZXJucyh0b2tlbiwgY3VzdG9tUGF0dGVybnMpO1xuICAgICAgICBpZiAoY3VzdG9tUmVzdWx0KVxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbVJlc3VsdDtcbiAgICB9XG4gICAgLy8gRmFsbCBiYWNrIHRvIHN0YW5kYXJkIGRldGVjdGlvblxuICAgIHJldHVybiBkZXRlY3RUb2tlbih0b2tlbik7XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../core-detect/dist/detectors/index.js\n");

/***/ }),

/***/ "../core-detect/dist/index.js":
/*!************************************!*\
  !*** ../core-detect/dist/index.js ***!
  \************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeDocument: () => (/* reexport safe */ _pipeline_analyze__WEBPACK_IMPORTED_MODULE_1__.analyzeDocument),\n/* harmony export */   applyRedactions: () => (/* reexport safe */ _pipeline_apply__WEBPACK_IMPORTED_MODULE_2__.applyRedactions),\n/* harmony export */   deletePreset: () => (/* reexport safe */ _presets__WEBPACK_IMPORTED_MODULE_3__.deletePreset),\n/* harmony export */   getPreset: () => (/* reexport safe */ _presets__WEBPACK_IMPORTED_MODULE_3__.getPreset),\n/* harmony export */   listPresets: () => (/* reexport safe */ _presets__WEBPACK_IMPORTED_MODULE_3__.listPresets),\n/* harmony export */   savePreset: () => (/* reexport safe */ _presets__WEBPACK_IMPORTED_MODULE_3__.savePreset)\n/* harmony export */ });\n/* harmony import */ var _types__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./types */ \"../core-detect/dist/types.js\");\n/* harmony reexport (unknown) */ var __WEBPACK_REEXPORT_OBJECT__ = {};\n/* harmony reexport (unknown) */ for(const __WEBPACK_IMPORT_KEY__ in _types__WEBPACK_IMPORTED_MODULE_0__) if([\"default\",\"analyzeDocument\",\"applyRedactions\",\"listPresets\",\"getPreset\",\"savePreset\",\"deletePreset\"].indexOf(__WEBPACK_IMPORT_KEY__) < 0) __WEBPACK_REEXPORT_OBJECT__[__WEBPACK_IMPORT_KEY__] = () => _types__WEBPACK_IMPORTED_MODULE_0__[__WEBPACK_IMPORT_KEY__]\n/* harmony reexport (unknown) */ __webpack_require__.d(__webpack_exports__, __WEBPACK_REEXPORT_OBJECT__);\n/* harmony import */ var _pipeline_analyze__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./pipeline/analyze */ \"../core-detect/dist/pipeline/analyze.js\");\n/* harmony import */ var _pipeline_apply__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./pipeline/apply */ \"../core-detect/dist/pipeline/apply.js\");\n/* harmony import */ var _presets__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./presets */ \"../core-detect/dist/presets.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pipeline_analyze__WEBPACK_IMPORTED_MODULE_1__, _pipeline_apply__WEBPACK_IMPORTED_MODULE_2__]);\n([_pipeline_analyze__WEBPACK_IMPORTED_MODULE_1__, _pipeline_apply__WEBPACK_IMPORTED_MODULE_2__] = __webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__);\n\n\n\n\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29yZS1kZXRlY3QvZGlzdC9pbmRleC5qcyIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQXdCO0FBQzZCO0FBQ0Y7QUFDMEIiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY2xlYW5zaGFyZS91aS8uLi9jb3JlLWRldGVjdC9kaXN0L2luZGV4LmpzPzVlY2QiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0ICogZnJvbSAnLi90eXBlcyc7XG5leHBvcnQgeyBhbmFseXplRG9jdW1lbnQgfSBmcm9tICcuL3BpcGVsaW5lL2FuYWx5emUnO1xuZXhwb3J0IHsgYXBwbHlSZWRhY3Rpb25zIH0gZnJvbSAnLi9waXBlbGluZS9hcHBseSc7XG5leHBvcnQgeyBsaXN0UHJlc2V0cywgZ2V0UHJlc2V0LCBzYXZlUHJlc2V0LCBkZWxldGVQcmVzZXQgfSBmcm9tICcuL3ByZXNldHMnO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../core-detect/dist/index.js\n");

/***/ }),

/***/ "../core-detect/dist/pipeline/analyze.js":
/*!***********************************************!*\
  !*** ../core-detect/dist/pipeline/analyze.js ***!
  \***********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeDocument: () => (/* binding */ analyzeDocument)\n/* harmony export */ });\n/* harmony import */ var _detectors__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ../detectors */ \"../core-detect/dist/detectors/index.js\");\n/* harmony import */ var uuid__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! uuid */ \"uuid\");\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! tesseract.js */ \"../../node_modules/.pnpm/tesseract.js@4.1.4/node_modules/tesseract.js/src/index.js\");\n/* harmony import */ var tesseract_js__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(tesseract_js__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! pdfjs-dist */ \"pdfjs-dist\");\n/* harmony import */ var pdfjs_dist__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var jsqr__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! jsqr */ \"jsqr\");\n/* harmony import */ var jsqr__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(jsqr__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var _presets__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ../presets */ \"../core-detect/dist/presets.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([uuid__WEBPACK_IMPORTED_MODULE_0__]);\nuuid__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n\n// Barcode detection library.  jsQR is a small library that can scan QR codes\n// and linear barcodes from image pixel data.  It returns the location of the\n// detected code if one is found.  See https://github.com/cozmo/jsQR for details.\n\n// Import preset utilities to allow filtering detections based on enabled kinds\n\n/*\n * The analyse pipeline orchestrates OCR and token detection for both images\n * and PDFs.  It uses native OCR when available (via Capacitor plugins) and\n * falls back to Tesseract.js running in the browser or a web worker.  PDF\n * pages are rendered to canvases via pdfjs-dist, then treated like images.\n */\n/** Convert a File/Blob to a Data URI. */\nasync function fileToDataURL(file) {\n    return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = () => reject(reader.error);\n        reader.readAsDataURL(file);\n    });\n}\n/** Perform OCR on a data URL and return detections. */\nasync function analyzeImageDataURL(dataURL, pageIndex = 0, opts = {}) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n    // Optionally perform a simple document auto‑crop before running OCR.  Many\n    // scanned documents contain large white margins.  Cropping to the\n    // bounding rectangle of non‑white pixels improves OCR accuracy and\n    // reduces processing time.  We detect the smallest rectangle that\n    // contains all pixels whose brightness is below a threshold.  If the\n    // resulting crop covers almost the entire image (>95%), we skip the\n    // crop to avoid losing content.  This heuristic is cheap to compute\n    // and does not require external dependencies.  See docs/ROADMAP.md.\n    async function autoCrop(dataUrl) {\n        return new Promise(resolve => {\n            const img = new Image();\n            img.onload = () => {\n                const canvas = document.createElement('canvas');\n                canvas.width = img.width;\n                canvas.height = img.height;\n                const ctx = canvas.getContext('2d');\n                if (!ctx) {\n                    resolve(dataUrl);\n                    return;\n                }\n                ctx.drawImage(img, 0, 0);\n                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n                const data = imageData.data;\n                let minX = canvas.width;\n                let maxX = 0;\n                let minY = canvas.height;\n                let maxY = 0;\n                // Threshold to consider a pixel as background (very light)\n                const isBg = (r, g, b) => r > 230 && g > 230 && b > 230;\n                for (let y = 0; y < canvas.height; y++) {\n                    for (let x = 0; x < canvas.width; x++) {\n                        const idx = (y * canvas.width + x) * 4;\n                        const r = data[idx];\n                        const g = data[idx + 1];\n                        const b = data[idx + 2];\n                        if (!isBg(r, g, b)) {\n                            if (x < minX)\n                                minX = x;\n                            if (x > maxX)\n                                maxX = x;\n                            if (y < minY)\n                                minY = y;\n                            if (y > maxY)\n                                maxY = y;\n                        }\n                    }\n                }\n                // If no foreground found, return original\n                if (minX > maxX || minY > maxY) {\n                    resolve(dataUrl);\n                    return;\n                }\n                // Compute bounds width/height\n                const bw = maxX - minX;\n                const bh = maxY - minY;\n                // If crop covers almost entire image, skip cropping\n                if (bw / canvas.width > 0.95 && bh / canvas.height > 0.95) {\n                    resolve(dataUrl);\n                    return;\n                }\n                // Expand crop by 5% margins to avoid cutting content\n                const marginX = Math.floor(bw * 0.05);\n                const marginY = Math.floor(bh * 0.05);\n                const cropX = Math.max(0, minX - marginX);\n                const cropY = Math.max(0, minY - marginY);\n                const cropW = Math.min(canvas.width - cropX, bw + marginX * 2);\n                const cropH = Math.min(canvas.height - cropY, bh + marginY * 2);\n                const croppedCanvas = document.createElement('canvas');\n                croppedCanvas.width = cropW;\n                croppedCanvas.height = cropH;\n                const cctx = croppedCanvas.getContext('2d');\n                if (!cctx) {\n                    resolve(dataUrl);\n                    return;\n                }\n                cctx.drawImage(canvas, cropX, cropY, cropW, cropH, 0, 0, cropW, cropH);\n                resolve(croppedCanvas.toDataURL());\n            };\n            img.onerror = () => resolve(dataUrl);\n            img.src = dataUrl;\n        });\n    }\n    // Run Tesseract on the original Data URL.  Cropping is disabled by\n    // default because adjusting bounding boxes back to the original\n    // coordinates is non‑trivial.  To experiment with auto‑crop, call\n    // autoCrop() on dataURL and adjust bounding boxes accordingly.\n    const result = await tesseract_js__WEBPACK_IMPORTED_MODULE_1___default().recognize(dataURL, 'eng', { logger: () => { } });\n    const { words } = result.data;\n    const detections = [];\n    // Determine image dimensions\n    const img = new Image();\n    await new Promise(resolve => {\n        img.onload = resolve;\n        img.src = dataURL;\n    });\n    const width = img.width;\n    const height = img.height;\n    for (const word of words) {\n        const text = (word.text || '').trim();\n        if (!text)\n            continue;\n        const match = (0,_detectors__WEBPACK_IMPORTED_MODULE_4__.detectTokenWithCustomPatterns)(text, opts.customPatterns);\n        if (match) {\n            const { kind, reason, confidence: detectionConfidence } = match;\n            const bbox = word.bbox;\n            const x0 = (_b = (_a = bbox.x0) !== null && _a !== void 0 ? _a : bbox.left) !== null && _b !== void 0 ? _b : 0;\n            const y0 = (_d = (_c = bbox.y0) !== null && _c !== void 0 ? _c : bbox.top) !== null && _d !== void 0 ? _d : 0;\n            const x1 = (_f = (_e = bbox.x1) !== null && _e !== void 0 ? _e : bbox.right) !== null && _f !== void 0 ? _f : 0;\n            const y1 = (_h = (_g = bbox.y1) !== null && _g !== void 0 ? _g : bbox.bottom) !== null && _h !== void 0 ? _h : 0;\n            const box = {\n                x: x0 / width,\n                y: y0 / height,\n                w: (x1 - x0) / width,\n                h: (y1 - y0) / height,\n                page: pageIndex\n            };\n            // Use enhanced confidence scoring - prefer detection confidence if provided\n            const ocrConfidence = (_j = word.confidence) !== null && _j !== void 0 ? _j : 0.9;\n            const finalConfidence = detectionConfidence !== null && detectionConfidence !== void 0 ? detectionConfidence : (0,_detectors__WEBPACK_IMPORTED_MODULE_4__.calculateConfidence)(kind, text, ocrConfidence);\n            // Apply confidence threshold filter\n            if (opts.confidenceThreshold && finalConfidence < opts.confidenceThreshold) {\n                continue;\n            }\n            detections.push({\n                id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n                kind: kind,\n                box,\n                confidence: finalConfidence,\n                reason,\n                preview: text\n            });\n        }\n    }\n    // Barcode detection using jsQR.  Draw the image onto a temporary canvas\n    // and scan its pixels.  jsQR returns null if no code is found.\n    try {\n        const canvas = document.createElement('canvas');\n        canvas.width = width;\n        canvas.height = height;\n        const ctx = canvas.getContext('2d');\n        if (ctx) {\n            ctx.drawImage(img, 0, 0, width, height);\n            const imageData = ctx.getImageData(0, 0, width, height);\n            const code = jsqr__WEBPACK_IMPORTED_MODULE_3___default()(imageData.data, imageData.width, imageData.height);\n            if (code && code.location) {\n                // Compute bounding box from corner points\n                const { topLeftCorner, topRightCorner, bottomRightCorner, bottomLeftCorner } = code.location;\n                const xs = [topLeftCorner.x, topRightCorner.x, bottomRightCorner.x, bottomLeftCorner.x];\n                const ys = [topLeftCorner.y, topRightCorner.y, bottomRightCorner.y, bottomLeftCorner.y];\n                const minX = Math.min(...xs);\n                const maxX = Math.max(...xs);\n                const minY = Math.min(...ys);\n                const maxY = Math.max(...ys);\n                const bbox = {\n                    x: minX / width,\n                    y: minY / height,\n                    w: (maxX - minX) / width,\n                    h: (maxY - minY) / height,\n                    page: pageIndex\n                };\n                detections.push({\n                    id: (0,uuid__WEBPACK_IMPORTED_MODULE_0__.v4)(),\n                    kind: 'BARCODE',\n                    box: bbox,\n                    confidence: 1,\n                    reason: 'Detected barcode/QR code',\n                    preview: (_k = code.data) === null || _k === void 0 ? void 0 : _k.slice(0, 64) // show truncated payload\n                });\n            }\n        }\n    }\n    catch (err) {\n        // eslint-disable-next-line no-console\n        console.warn('Barcode detection failed:', err);\n    }\n    return detections;\n}\n/** Analyse a single file (image or PDF) and return detections across all pages. */\n// Import preset utilities at the top level\nasync function analyzeDocument(file, opts = {}) {\n    // Determine the MIME type from the file object if possible\n    const type = file.type || '';\n    const detections = [];\n    let pages = 1;\n    if (type === 'application/pdf') {\n        // Read the PDF into an ArrayBuffer\n        const buffer = await file.arrayBuffer();\n        // Configure worker for pdfjs if running in a browser\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        if (pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions && pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__.workerSrc === undefined) {\n            // Provide a default worker if none was set.  This requires that\n            // `pdfjs-dist/build/pdf.worker.js` is available in the bundle.\n            try {\n                // eslint-disable-next-line @typescript-eslint/no-var-requires\n                const workerSrc = __webpack_require__(/*! pdfjs-dist/build/pdf.worker.js */ \"pdfjs-dist/build/pdf.worker.js\");\n                pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__.GlobalWorkerOptions.workerSrc = workerSrc;\n            }\n            catch (e) {\n                // ignore if require fails – pdfjs will attempt to fallback\n            }\n        }\n        const loadingTask = pdfjs_dist__WEBPACK_IMPORTED_MODULE_2__.getDocument({ data: buffer });\n        const pdf = await loadingTask.promise;\n        pages = pdf.numPages;\n        for (let i = 1; i <= pages; i++) {\n            const page = await pdf.getPage(i);\n            const viewport = page.getViewport({ scale: 1.0 });\n            const canvas = document.createElement('canvas');\n            canvas.width = viewport.width;\n            canvas.height = viewport.height;\n            const context = canvas.getContext('2d');\n            if (!context)\n                continue;\n            const renderContext = { canvasContext: context, viewport };\n            await page.render(renderContext).promise;\n            const dataURL = canvas.toDataURL();\n            const pageDetections = await analyzeImageDataURL(dataURL, i - 1, opts);\n            detections.push(...pageDetections);\n        }\n    }\n    else {\n        // Assume image\n        const dataURL = await fileToDataURL(file);\n        const imgDetections = await analyzeImageDataURL(dataURL, 0, opts);\n        detections.push(...imgDetections);\n    }\n    // Filter detections by preset if provided\n    if (opts.presetId) {\n        const preset = (0,_presets__WEBPACK_IMPORTED_MODULE_5__.getPreset)(opts.presetId);\n        if (preset && preset.enabledKinds && preset.enabledKinds.length > 0) {\n            // Remove detections whose kind is not enabled\n            for (let i = detections.length - 1; i >= 0; i--) {\n                if (!preset.enabledKinds.includes(detections[i].kind)) {\n                    detections.splice(i, 1);\n                }\n            }\n        }\n    }\n    return { detections, pages };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDQSxhQUFhO0FBQ2IiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY2xlYW5zaGFyZS91aS8uLi9jb3JlLWRldGVjdC9kaXN0L3BpcGVsaW5lL2FuYWx5emUuanM/ZDc2ZiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjYWxjdWxhdGVDb25maWRlbmNlLCBkZXRlY3RUb2tlbldpdGhDdXN0b21QYXR0ZXJucyB9IGZyb20gJy4uL2RldGVjdG9ycyc7XG5pbXBvcnQgeyB2NCBhcyB1dWlkdjQgfSBmcm9tICd1dWlkJztcbmltcG9ydCBUZXNzZXJhY3QgZnJvbSAndGVzc2VyYWN0LmpzJztcbmltcG9ydCAqIGFzIHBkZmpzTGliIGZyb20gJ3BkZmpzLWRpc3QnO1xuLy8gQmFyY29kZSBkZXRlY3Rpb24gbGlicmFyeS4gIGpzUVIgaXMgYSBzbWFsbCBsaWJyYXJ5IHRoYXQgY2FuIHNjYW4gUVIgY29kZXNcbi8vIGFuZCBsaW5lYXIgYmFyY29kZXMgZnJvbSBpbWFnZSBwaXhlbCBkYXRhLiAgSXQgcmV0dXJucyB0aGUgbG9jYXRpb24gb2YgdGhlXG4vLyBkZXRlY3RlZCBjb2RlIGlmIG9uZSBpcyBmb3VuZC4gIFNlZSBodHRwczovL2dpdGh1Yi5jb20vY296bW8vanNRUiBmb3IgZGV0YWlscy5cbmltcG9ydCBqc1FSIGZyb20gJ2pzcXInO1xuLy8gSW1wb3J0IHByZXNldCB1dGlsaXRpZXMgdG8gYWxsb3cgZmlsdGVyaW5nIGRldGVjdGlvbnMgYmFzZWQgb24gZW5hYmxlZCBraW5kc1xuaW1wb3J0IHsgZ2V0UHJlc2V0IH0gZnJvbSAnLi4vcHJlc2V0cyc7XG4vKlxuICogVGhlIGFuYWx5c2UgcGlwZWxpbmUgb3JjaGVzdHJhdGVzIE9DUiBhbmQgdG9rZW4gZGV0ZWN0aW9uIGZvciBib3RoIGltYWdlc1xuICogYW5kIFBERnMuICBJdCB1c2VzIG5hdGl2ZSBPQ1Igd2hlbiBhdmFpbGFibGUgKHZpYSBDYXBhY2l0b3IgcGx1Z2lucykgYW5kXG4gKiBmYWxscyBiYWNrIHRvIFRlc3NlcmFjdC5qcyBydW5uaW5nIGluIHRoZSBicm93c2VyIG9yIGEgd2ViIHdvcmtlci4gIFBERlxuICogcGFnZXMgYXJlIHJlbmRlcmVkIHRvIGNhbnZhc2VzIHZpYSBwZGZqcy1kaXN0LCB0aGVuIHRyZWF0ZWQgbGlrZSBpbWFnZXMuXG4gKi9cbi8qKiBDb252ZXJ0IGEgRmlsZS9CbG9iIHRvIGEgRGF0YSBVUkkuICovXG5hc3luYyBmdW5jdGlvbiBmaWxlVG9EYXRhVVJMKGZpbGUpIHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0KTtcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVhZGVyLmVycm9yKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgfSk7XG59XG4vKiogUGVyZm9ybSBPQ1Igb24gYSBkYXRhIFVSTCBhbmQgcmV0dXJuIGRldGVjdGlvbnMuICovXG5hc3luYyBmdW5jdGlvbiBhbmFseXplSW1hZ2VEYXRhVVJMKGRhdGFVUkwsIHBhZ2VJbmRleCA9IDAsIG9wdHMgPSB7fSkge1xuICAgIHZhciBfYSwgX2IsIF9jLCBfZCwgX2UsIF9mLCBfZywgX2gsIF9qLCBfaztcbiAgICAvLyBPcHRpb25hbGx5IHBlcmZvcm0gYSBzaW1wbGUgZG9jdW1lbnQgYXV0b+KAkWNyb3AgYmVmb3JlIHJ1bm5pbmcgT0NSLiAgTWFueVxuICAgIC8vIHNjYW5uZWQgZG9jdW1lbnRzIGNvbnRhaW4gbGFyZ2Ugd2hpdGUgbWFyZ2lucy4gIENyb3BwaW5nIHRvIHRoZVxuICAgIC8vIGJvdW5kaW5nIHJlY3RhbmdsZSBvZiBub27igJF3aGl0ZSBwaXhlbHMgaW1wcm92ZXMgT0NSIGFjY3VyYWN5IGFuZFxuICAgIC8vIHJlZHVjZXMgcHJvY2Vzc2luZyB0aW1lLiAgV2UgZGV0ZWN0IHRoZSBzbWFsbGVzdCByZWN0YW5nbGUgdGhhdFxuICAgIC8vIGNvbnRhaW5zIGFsbCBwaXhlbHMgd2hvc2UgYnJpZ2h0bmVzcyBpcyBiZWxvdyBhIHRocmVzaG9sZC4gIElmIHRoZVxuICAgIC8vIHJlc3VsdGluZyBjcm9wIGNvdmVycyBhbG1vc3QgdGhlIGVudGlyZSBpbWFnZSAoPjk1JSksIHdlIHNraXAgdGhlXG4gICAgLy8gY3JvcCB0byBhdm9pZCBsb3NpbmcgY29udGVudC4gIFRoaXMgaGV1cmlzdGljIGlzIGNoZWFwIHRvIGNvbXB1dGVcbiAgICAvLyBhbmQgZG9lcyBub3QgcmVxdWlyZSBleHRlcm5hbCBkZXBlbmRlbmNpZXMuICBTZWUgZG9jcy9ST0FETUFQLm1kLlxuICAgIGFzeW5jIGZ1bmN0aW9uIGF1dG9Dcm9wKGRhdGFVcmwpIHtcbiAgICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICAgICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgICAgICAgICBpbWcub25sb2FkID0gKCkgPT4ge1xuICAgICAgICAgICAgICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICAgICAgICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICAgICAgICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICAgICAgICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWN0eCkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGFVcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgICAgICAgICBjb25zdCBpbWFnZURhdGEgPSBjdHguZ2V0SW1hZ2VEYXRhKDAsIDAsIGNhbnZhcy53aWR0aCwgY2FudmFzLmhlaWdodCk7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IGltYWdlRGF0YS5kYXRhO1xuICAgICAgICAgICAgICAgIGxldCBtaW5YID0gY2FudmFzLndpZHRoO1xuICAgICAgICAgICAgICAgIGxldCBtYXhYID0gMDtcbiAgICAgICAgICAgICAgICBsZXQgbWluWSA9IGNhbnZhcy5oZWlnaHQ7XG4gICAgICAgICAgICAgICAgbGV0IG1heFkgPSAwO1xuICAgICAgICAgICAgICAgIC8vIFRocmVzaG9sZCB0byBjb25zaWRlciBhIHBpeGVsIGFzIGJhY2tncm91bmQgKHZlcnkgbGlnaHQpXG4gICAgICAgICAgICAgICAgY29uc3QgaXNCZyA9IChyLCBnLCBiKSA9PiByID4gMjMwICYmIGcgPiAyMzAgJiYgYiA+IDIzMDtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCB5ID0gMDsgeSA8IGNhbnZhcy5oZWlnaHQ7IHkrKykge1xuICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCB4ID0gMDsgeCA8IGNhbnZhcy53aWR0aDsgeCsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBpZHggPSAoeSAqIGNhbnZhcy53aWR0aCArIHgpICogNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHIgPSBkYXRhW2lkeF07XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBnID0gZGF0YVtpZHggKyAxXTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGIgPSBkYXRhW2lkeCArIDJdO1xuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFpc0JnKHIsIGcsIGIpKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHggPCBtaW5YKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5YID0geDtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZiAoeCA+IG1heFgpXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1heFggPSB4O1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh5IDwgbWluWSlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWluWSA9IHk7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHkgPiBtYXhZKVxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXhZID0geTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBJZiBubyBmb3JlZ3JvdW5kIGZvdW5kLCByZXR1cm4gb3JpZ2luYWxcbiAgICAgICAgICAgICAgICBpZiAobWluWCA+IG1heFggfHwgbWluWSA+IG1heFkpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBDb21wdXRlIGJvdW5kcyB3aWR0aC9oZWlnaHRcbiAgICAgICAgICAgICAgICBjb25zdCBidyA9IG1heFggLSBtaW5YO1xuICAgICAgICAgICAgICAgIGNvbnN0IGJoID0gbWF4WSAtIG1pblk7XG4gICAgICAgICAgICAgICAgLy8gSWYgY3JvcCBjb3ZlcnMgYWxtb3N0IGVudGlyZSBpbWFnZSwgc2tpcCBjcm9wcGluZ1xuICAgICAgICAgICAgICAgIGlmIChidyAvIGNhbnZhcy53aWR0aCA+IDAuOTUgJiYgYmggLyBjYW52YXMuaGVpZ2h0ID4gMC45NSkge1xuICAgICAgICAgICAgICAgICAgICByZXNvbHZlKGRhdGFVcmwpO1xuICAgICAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIC8vIEV4cGFuZCBjcm9wIGJ5IDUlIG1hcmdpbnMgdG8gYXZvaWQgY3V0dGluZyBjb250ZW50XG4gICAgICAgICAgICAgICAgY29uc3QgbWFyZ2luWCA9IE1hdGguZmxvb3IoYncgKiAwLjA1KTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXJnaW5ZID0gTWF0aC5mbG9vcihiaCAqIDAuMDUpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNyb3BYID0gTWF0aC5tYXgoMCwgbWluWCAtIG1hcmdpblgpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNyb3BZID0gTWF0aC5tYXgoMCwgbWluWSAtIG1hcmdpblkpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNyb3BXID0gTWF0aC5taW4oY2FudmFzLndpZHRoIC0gY3JvcFgsIGJ3ICsgbWFyZ2luWCAqIDIpO1xuICAgICAgICAgICAgICAgIGNvbnN0IGNyb3BIID0gTWF0aC5taW4oY2FudmFzLmhlaWdodCAtIGNyb3BZLCBiaCArIG1hcmdpblkgKiAyKTtcbiAgICAgICAgICAgICAgICBjb25zdCBjcm9wcGVkQ2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICAgICAgY3JvcHBlZENhbnZhcy53aWR0aCA9IGNyb3BXO1xuICAgICAgICAgICAgICAgIGNyb3BwZWRDYW52YXMuaGVpZ2h0ID0gY3JvcEg7XG4gICAgICAgICAgICAgICAgY29uc3QgY2N0eCA9IGNyb3BwZWRDYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgICAgICAgICBpZiAoIWNjdHgpIHtcbiAgICAgICAgICAgICAgICAgICAgcmVzb2x2ZShkYXRhVXJsKTtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjY3R4LmRyYXdJbWFnZShjYW52YXMsIGNyb3BYLCBjcm9wWSwgY3JvcFcsIGNyb3BILCAwLCAwLCBjcm9wVywgY3JvcEgpO1xuICAgICAgICAgICAgICAgIHJlc29sdmUoY3JvcHBlZENhbnZhcy50b0RhdGFVUkwoKSk7XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgaW1nLm9uZXJyb3IgPSAoKSA9PiByZXNvbHZlKGRhdGFVcmwpO1xuICAgICAgICAgICAgaW1nLnNyYyA9IGRhdGFVcmw7XG4gICAgICAgIH0pO1xuICAgIH1cbiAgICAvLyBSdW4gVGVzc2VyYWN0IG9uIHRoZSBvcmlnaW5hbCBEYXRhIFVSTC4gIENyb3BwaW5nIGlzIGRpc2FibGVkIGJ5XG4gICAgLy8gZGVmYXVsdCBiZWNhdXNlIGFkanVzdGluZyBib3VuZGluZyBib3hlcyBiYWNrIHRvIHRoZSBvcmlnaW5hbFxuICAgIC8vIGNvb3JkaW5hdGVzIGlzIG5vbuKAkXRyaXZpYWwuICBUbyBleHBlcmltZW50IHdpdGggYXV0b+KAkWNyb3AsIGNhbGxcbiAgICAvLyBhdXRvQ3JvcCgpIG9uIGRhdGFVUkwgYW5kIGFkanVzdCBib3VuZGluZyBib3hlcyBhY2NvcmRpbmdseS5cbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBUZXNzZXJhY3QucmVjb2duaXplKGRhdGFVUkwsICdlbmcnLCB7IGxvZ2dlcjogKCkgPT4geyB9IH0pO1xuICAgIGNvbnN0IHsgd29yZHMgfSA9IHJlc3VsdC5kYXRhO1xuICAgIGNvbnN0IGRldGVjdGlvbnMgPSBbXTtcbiAgICAvLyBEZXRlcm1pbmUgaW1hZ2UgZGltZW5zaW9uc1xuICAgIGNvbnN0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4ge1xuICAgICAgICBpbWcub25sb2FkID0gcmVzb2x2ZTtcbiAgICAgICAgaW1nLnNyYyA9IGRhdGFVUkw7XG4gICAgfSk7XG4gICAgY29uc3Qgd2lkdGggPSBpbWcud2lkdGg7XG4gICAgY29uc3QgaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICBmb3IgKGNvbnN0IHdvcmQgb2Ygd29yZHMpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9ICh3b3JkLnRleHQgfHwgJycpLnRyaW0oKTtcbiAgICAgICAgaWYgKCF0ZXh0KVxuICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgIGNvbnN0IG1hdGNoID0gZGV0ZWN0VG9rZW5XaXRoQ3VzdG9tUGF0dGVybnModGV4dCwgb3B0cy5jdXN0b21QYXR0ZXJucyk7XG4gICAgICAgIGlmIChtYXRjaCkge1xuICAgICAgICAgICAgY29uc3QgeyBraW5kLCByZWFzb24sIGNvbmZpZGVuY2U6IGRldGVjdGlvbkNvbmZpZGVuY2UgfSA9IG1hdGNoO1xuICAgICAgICAgICAgY29uc3QgYmJveCA9IHdvcmQuYmJveDtcbiAgICAgICAgICAgIGNvbnN0IHgwID0gKF9iID0gKF9hID0gYmJveC54MCkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogYmJveC5sZWZ0KSAhPT0gbnVsbCAmJiBfYiAhPT0gdm9pZCAwID8gX2IgOiAwO1xuICAgICAgICAgICAgY29uc3QgeTAgPSAoX2QgPSAoX2MgPSBiYm94LnkwKSAhPT0gbnVsbCAmJiBfYyAhPT0gdm9pZCAwID8gX2MgOiBiYm94LnRvcCkgIT09IG51bGwgJiYgX2QgIT09IHZvaWQgMCA/IF9kIDogMDtcbiAgICAgICAgICAgIGNvbnN0IHgxID0gKF9mID0gKF9lID0gYmJveC54MSkgIT09IG51bGwgJiYgX2UgIT09IHZvaWQgMCA/IF9lIDogYmJveC5yaWdodCkgIT09IG51bGwgJiYgX2YgIT09IHZvaWQgMCA/IF9mIDogMDtcbiAgICAgICAgICAgIGNvbnN0IHkxID0gKF9oID0gKF9nID0gYmJveC55MSkgIT09IG51bGwgJiYgX2cgIT09IHZvaWQgMCA/IF9nIDogYmJveC5ib3R0b20pICE9PSBudWxsICYmIF9oICE9PSB2b2lkIDAgPyBfaCA6IDA7XG4gICAgICAgICAgICBjb25zdCBib3ggPSB7XG4gICAgICAgICAgICAgICAgeDogeDAgLyB3aWR0aCxcbiAgICAgICAgICAgICAgICB5OiB5MCAvIGhlaWdodCxcbiAgICAgICAgICAgICAgICB3OiAoeDEgLSB4MCkgLyB3aWR0aCxcbiAgICAgICAgICAgICAgICBoOiAoeTEgLSB5MCkgLyBoZWlnaHQsXG4gICAgICAgICAgICAgICAgcGFnZTogcGFnZUluZGV4XG4gICAgICAgICAgICB9O1xuICAgICAgICAgICAgLy8gVXNlIGVuaGFuY2VkIGNvbmZpZGVuY2Ugc2NvcmluZyAtIHByZWZlciBkZXRlY3Rpb24gY29uZmlkZW5jZSBpZiBwcm92aWRlZFxuICAgICAgICAgICAgY29uc3Qgb2NyQ29uZmlkZW5jZSA9IChfaiA9IHdvcmQuY29uZmlkZW5jZSkgIT09IG51bGwgJiYgX2ogIT09IHZvaWQgMCA/IF9qIDogMC45O1xuICAgICAgICAgICAgY29uc3QgZmluYWxDb25maWRlbmNlID0gZGV0ZWN0aW9uQ29uZmlkZW5jZSAhPT0gbnVsbCAmJiBkZXRlY3Rpb25Db25maWRlbmNlICE9PSB2b2lkIDAgPyBkZXRlY3Rpb25Db25maWRlbmNlIDogY2FsY3VsYXRlQ29uZmlkZW5jZShraW5kLCB0ZXh0LCBvY3JDb25maWRlbmNlKTtcbiAgICAgICAgICAgIC8vIEFwcGx5IGNvbmZpZGVuY2UgdGhyZXNob2xkIGZpbHRlclxuICAgICAgICAgICAgaWYgKG9wdHMuY29uZmlkZW5jZVRocmVzaG9sZCAmJiBmaW5hbENvbmZpZGVuY2UgPCBvcHRzLmNvbmZpZGVuY2VUaHJlc2hvbGQpIHtcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGRldGVjdGlvbnMucHVzaCh7XG4gICAgICAgICAgICAgICAgaWQ6IHV1aWR2NCgpLFxuICAgICAgICAgICAgICAgIGtpbmQ6IGtpbmQsXG4gICAgICAgICAgICAgICAgYm94LFxuICAgICAgICAgICAgICAgIGNvbmZpZGVuY2U6IGZpbmFsQ29uZmlkZW5jZSxcbiAgICAgICAgICAgICAgICByZWFzb24sXG4gICAgICAgICAgICAgICAgcHJldmlldzogdGV4dFxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gQmFyY29kZSBkZXRlY3Rpb24gdXNpbmcganNRUi4gIERyYXcgdGhlIGltYWdlIG9udG8gYSB0ZW1wb3JhcnkgY2FudmFzXG4gICAgLy8gYW5kIHNjYW4gaXRzIHBpeGVscy4gIGpzUVIgcmV0dXJucyBudWxsIGlmIG5vIGNvZGUgaXMgZm91bmQuXG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgIGNhbnZhcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICBjYW52YXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICAgICAgaWYgKGN0eCkge1xuICAgICAgICAgICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDAsIHdpZHRoLCBoZWlnaHQpO1xuICAgICAgICAgICAgY29uc3QgaW1hZ2VEYXRhID0gY3R4LmdldEltYWdlRGF0YSgwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcbiAgICAgICAgICAgIGNvbnN0IGNvZGUgPSBqc1FSKGltYWdlRGF0YS5kYXRhLCBpbWFnZURhdGEud2lkdGgsIGltYWdlRGF0YS5oZWlnaHQpO1xuICAgICAgICAgICAgaWYgKGNvZGUgJiYgY29kZS5sb2NhdGlvbikge1xuICAgICAgICAgICAgICAgIC8vIENvbXB1dGUgYm91bmRpbmcgYm94IGZyb20gY29ybmVyIHBvaW50c1xuICAgICAgICAgICAgICAgIGNvbnN0IHsgdG9wTGVmdENvcm5lciwgdG9wUmlnaHRDb3JuZXIsIGJvdHRvbVJpZ2h0Q29ybmVyLCBib3R0b21MZWZ0Q29ybmVyIH0gPSBjb2RlLmxvY2F0aW9uO1xuICAgICAgICAgICAgICAgIGNvbnN0IHhzID0gW3RvcExlZnRDb3JuZXIueCwgdG9wUmlnaHRDb3JuZXIueCwgYm90dG9tUmlnaHRDb3JuZXIueCwgYm90dG9tTGVmdENvcm5lci54XTtcbiAgICAgICAgICAgICAgICBjb25zdCB5cyA9IFt0b3BMZWZ0Q29ybmVyLnksIHRvcFJpZ2h0Q29ybmVyLnksIGJvdHRvbVJpZ2h0Q29ybmVyLnksIGJvdHRvbUxlZnRDb3JuZXIueV07XG4gICAgICAgICAgICAgICAgY29uc3QgbWluWCA9IE1hdGgubWluKC4uLnhzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBtYXhYID0gTWF0aC5tYXgoLi4ueHMpO1xuICAgICAgICAgICAgICAgIGNvbnN0IG1pblkgPSBNYXRoLm1pbiguLi55cyk7XG4gICAgICAgICAgICAgICAgY29uc3QgbWF4WSA9IE1hdGgubWF4KC4uLnlzKTtcbiAgICAgICAgICAgICAgICBjb25zdCBiYm94ID0ge1xuICAgICAgICAgICAgICAgICAgICB4OiBtaW5YIC8gd2lkdGgsXG4gICAgICAgICAgICAgICAgICAgIHk6IG1pblkgLyBoZWlnaHQsXG4gICAgICAgICAgICAgICAgICAgIHc6IChtYXhYIC0gbWluWCkgLyB3aWR0aCxcbiAgICAgICAgICAgICAgICAgICAgaDogKG1heFkgLSBtaW5ZKSAvIGhlaWdodCxcbiAgICAgICAgICAgICAgICAgICAgcGFnZTogcGFnZUluZGV4XG4gICAgICAgICAgICAgICAgfTtcbiAgICAgICAgICAgICAgICBkZXRlY3Rpb25zLnB1c2goe1xuICAgICAgICAgICAgICAgICAgICBpZDogdXVpZHY0KCksXG4gICAgICAgICAgICAgICAgICAgIGtpbmQ6ICdCQVJDT0RFJyxcbiAgICAgICAgICAgICAgICAgICAgYm94OiBiYm94LFxuICAgICAgICAgICAgICAgICAgICBjb25maWRlbmNlOiAxLFxuICAgICAgICAgICAgICAgICAgICByZWFzb246ICdEZXRlY3RlZCBiYXJjb2RlL1FSIGNvZGUnLFxuICAgICAgICAgICAgICAgICAgICBwcmV2aWV3OiAoX2sgPSBjb2RlLmRhdGEpID09PSBudWxsIHx8IF9rID09PSB2b2lkIDAgPyB2b2lkIDAgOiBfay5zbGljZSgwLCA2NCkgLy8gc2hvdyB0cnVuY2F0ZWQgcGF5bG9hZFxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgICAgY29uc29sZS53YXJuKCdCYXJjb2RlIGRldGVjdGlvbiBmYWlsZWQ6JywgZXJyKTtcbiAgICB9XG4gICAgcmV0dXJuIGRldGVjdGlvbnM7XG59XG4vKiogQW5hbHlzZSBhIHNpbmdsZSBmaWxlIChpbWFnZSBvciBQREYpIGFuZCByZXR1cm4gZGV0ZWN0aW9ucyBhY3Jvc3MgYWxsIHBhZ2VzLiAqL1xuLy8gSW1wb3J0IHByZXNldCB1dGlsaXRpZXMgYXQgdGhlIHRvcCBsZXZlbFxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFuYWx5emVEb2N1bWVudChmaWxlLCBvcHRzID0ge30pIHtcbiAgICAvLyBEZXRlcm1pbmUgdGhlIE1JTUUgdHlwZSBmcm9tIHRoZSBmaWxlIG9iamVjdCBpZiBwb3NzaWJsZVxuICAgIGNvbnN0IHR5cGUgPSBmaWxlLnR5cGUgfHwgJyc7XG4gICAgY29uc3QgZGV0ZWN0aW9ucyA9IFtdO1xuICAgIGxldCBwYWdlcyA9IDE7XG4gICAgaWYgKHR5cGUgPT09ICdhcHBsaWNhdGlvbi9wZGYnKSB7XG4gICAgICAgIC8vIFJlYWQgdGhlIFBERiBpbnRvIGFuIEFycmF5QnVmZmVyXG4gICAgICAgIGNvbnN0IGJ1ZmZlciA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgICAgICAgLy8gQ29uZmlndXJlIHdvcmtlciBmb3IgcGRmanMgaWYgcnVubmluZyBpbiBhIGJyb3dzZXJcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9iYW4tdHMtY29tbWVudFxuICAgICAgICAvLyBAdHMtaWdub3JlXG4gICAgICAgIGlmIChwZGZqc0xpYi5HbG9iYWxXb3JrZXJPcHRpb25zICYmIHBkZmpzTGliLndvcmtlclNyYyA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICAvLyBQcm92aWRlIGEgZGVmYXVsdCB3b3JrZXIgaWYgbm9uZSB3YXMgc2V0LiAgVGhpcyByZXF1aXJlcyB0aGF0XG4gICAgICAgICAgICAvLyBgcGRmanMtZGlzdC9idWlsZC9wZGYud29ya2VyLmpzYCBpcyBhdmFpbGFibGUgaW4gdGhlIGJ1bmRsZS5cbiAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby12YXItcmVxdWlyZXNcbiAgICAgICAgICAgICAgICBjb25zdCB3b3JrZXJTcmMgPSByZXF1aXJlKCdwZGZqcy1kaXN0L2J1aWxkL3BkZi53b3JrZXIuanMnKTtcbiAgICAgICAgICAgICAgICBwZGZqc0xpYi5HbG9iYWxXb3JrZXJPcHRpb25zLndvcmtlclNyYyA9IHdvcmtlclNyYztcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNhdGNoIChlKSB7XG4gICAgICAgICAgICAgICAgLy8gaWdub3JlIGlmIHJlcXVpcmUgZmFpbHMg4oCTIHBkZmpzIHdpbGwgYXR0ZW1wdCB0byBmYWxsYmFja1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxvYWRpbmdUYXNrID0gcGRmanNMaWIuZ2V0RG9jdW1lbnQoeyBkYXRhOiBidWZmZXIgfSk7XG4gICAgICAgIGNvbnN0IHBkZiA9IGF3YWl0IGxvYWRpbmdUYXNrLnByb21pc2U7XG4gICAgICAgIHBhZ2VzID0gcGRmLm51bVBhZ2VzO1xuICAgICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSBwYWdlczsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBwYWdlID0gYXdhaXQgcGRmLmdldFBhZ2UoaSk7XG4gICAgICAgICAgICBjb25zdCB2aWV3cG9ydCA9IHBhZ2UuZ2V0Vmlld3BvcnQoeyBzY2FsZTogMS4wIH0pO1xuICAgICAgICAgICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgICAgICAgICBjYW52YXMud2lkdGggPSB2aWV3cG9ydC53aWR0aDtcbiAgICAgICAgICAgIGNhbnZhcy5oZWlnaHQgPSB2aWV3cG9ydC5oZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCBjb250ZXh0ID0gY2FudmFzLmdldENvbnRleHQoJzJkJyk7XG4gICAgICAgICAgICBpZiAoIWNvbnRleHQpXG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICBjb25zdCByZW5kZXJDb250ZXh0ID0geyBjYW52YXNDb250ZXh0OiBjb250ZXh0LCB2aWV3cG9ydCB9O1xuICAgICAgICAgICAgYXdhaXQgcGFnZS5yZW5kZXIocmVuZGVyQ29udGV4dCkucHJvbWlzZTtcbiAgICAgICAgICAgIGNvbnN0IGRhdGFVUkwgPSBjYW52YXMudG9EYXRhVVJMKCk7XG4gICAgICAgICAgICBjb25zdCBwYWdlRGV0ZWN0aW9ucyA9IGF3YWl0IGFuYWx5emVJbWFnZURhdGFVUkwoZGF0YVVSTCwgaSAtIDEsIG9wdHMpO1xuICAgICAgICAgICAgZGV0ZWN0aW9ucy5wdXNoKC4uLnBhZ2VEZXRlY3Rpb25zKTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBlbHNlIHtcbiAgICAgICAgLy8gQXNzdW1lIGltYWdlXG4gICAgICAgIGNvbnN0IGRhdGFVUkwgPSBhd2FpdCBmaWxlVG9EYXRhVVJMKGZpbGUpO1xuICAgICAgICBjb25zdCBpbWdEZXRlY3Rpb25zID0gYXdhaXQgYW5hbHl6ZUltYWdlRGF0YVVSTChkYXRhVVJMLCAwLCBvcHRzKTtcbiAgICAgICAgZGV0ZWN0aW9ucy5wdXNoKC4uLmltZ0RldGVjdGlvbnMpO1xuICAgIH1cbiAgICAvLyBGaWx0ZXIgZGV0ZWN0aW9ucyBieSBwcmVzZXQgaWYgcHJvdmlkZWRcbiAgICBpZiAob3B0cy5wcmVzZXRJZCkge1xuICAgICAgICBjb25zdCBwcmVzZXQgPSBnZXRQcmVzZXQob3B0cy5wcmVzZXRJZCk7XG4gICAgICAgIGlmIChwcmVzZXQgJiYgcHJlc2V0LmVuYWJsZWRLaW5kcyAmJiBwcmVzZXQuZW5hYmxlZEtpbmRzLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBkZXRlY3Rpb25zIHdob3NlIGtpbmQgaXMgbm90IGVuYWJsZWRcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSBkZXRlY3Rpb25zLmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgaWYgKCFwcmVzZXQuZW5hYmxlZEtpbmRzLmluY2x1ZGVzKGRldGVjdGlvbnNbaV0ua2luZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgZGV0ZWN0aW9ucy5zcGxpY2UoaSwgMSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIHJldHVybiB7IGRldGVjdGlvbnMsIHBhZ2VzIH07XG59XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///../core-detect/dist/pipeline/analyze.js\n");

/***/ }),

/***/ "../core-detect/dist/pipeline/apply.js":
/*!*********************************************!*\
  !*** ../core-detect/dist/pipeline/apply.js ***!
  \*********************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   analyzeDocument: () => (/* binding */ analyzeDocument),\n/* harmony export */   applyRedactions: () => (/* binding */ applyRedactions)\n/* harmony export */ });\n/* harmony import */ var _analyze__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./analyze */ \"../core-detect/dist/pipeline/analyze.js\");\n/* harmony import */ var pdf_lib__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! pdf-lib */ \"../../node_modules/.pnpm/pdf-lib@1.17.1/node_modules/pdf-lib/cjs/index.js\");\n/* harmony import */ var pdf_lib__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(pdf_lib__WEBPACK_IMPORTED_MODULE_0__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_analyze__WEBPACK_IMPORTED_MODULE_1__]);\n_analyze__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n// A module‑scoped variable to store the last analysis result.  applyRedactions()\n// uses this map to resolve detection IDs to bounding boxes.  In a real\n// application you should pass the detections directly to avoid shared\n// mutable state.  This simplified implementation is sufficient for the\n// demonstration.\nlet lastResult = null;\n/** Override the exported analyse function to capture the last result. */\nasync function analyzeDocument(file, opts = {}) {\n    const result = await (0,_analyze__WEBPACK_IMPORTED_MODULE_1__.analyzeDocument)(file, opts);\n    lastResult = result;\n    return result;\n}\n/** Internal helper: convert a canvas to a data URI. */\nfunction canvasToDataURL(canvas, mimeType = 'image/png', quality = 0.92) {\n    return canvas.toDataURL(mimeType, quality);\n}\n/** Internal helper: convert a File/Blob into a HTMLImageElement. */\nasync function fileToImage(file) {\n    const dataURL = await new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = () => reject(reader.error);\n        reader.readAsDataURL(file);\n    });\n    const img = new Image();\n    await new Promise(resolve => {\n        img.onload = () => resolve();\n        img.src = dataURL;\n    });\n    return img;\n}\n/** Apply redactions to an image.  Returns a Data URI. */\nasync function applyRedactionsToImage(file, actions, quality = 0.92, detectionResult) {\n    const img = await fileToImage(file);\n    const canvas = document.createElement('canvas');\n    canvas.width = img.width;\n    canvas.height = img.height;\n    const ctx = canvas.getContext('2d');\n    if (!ctx)\n        throw new Error('Cannot obtain 2D context');\n    // Draw original image\n    ctx.drawImage(img, 0, 0);\n    // Build detection map\n    const map = new Map();\n    const detectionsToUse = detectionResult || lastResult;\n    if (detectionsToUse) {\n        for (const det of detectionsToUse.detections) {\n            map.set(det.id, det);\n        }\n    }\n    // Utility helpers for drawing various redaction styles on images\n    function drawBox(x, y, w, h, config = {}) {\n        var _a;\n        const color = config.color || 'black';\n        const opacity = (_a = config.opacity) !== null && _a !== void 0 ? _a : 1.0;\n        const cornerRadius = config.cornerRadius || 0;\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        ctx.fillStyle = color;\n        if (cornerRadius > 0) {\n            // Draw rounded rectangle\n            ctx.beginPath();\n            ctx.roundRect(x, y, w, h, cornerRadius);\n            ctx.fill();\n        }\n        else {\n            ctx.fillRect(x, y, w, h);\n        }\n        // Add border if specified\n        if (config.borderWidth && config.borderColor) {\n            ctx.lineWidth = config.borderWidth;\n            ctx.strokeStyle = config.borderColor;\n            if (cornerRadius > 0) {\n                ctx.beginPath();\n                ctx.roundRect(x, y, w, h, cornerRadius);\n                ctx.stroke();\n            }\n            else {\n                ctx.strokeRect(x, y, w, h);\n            }\n        }\n        ctx.restore();\n    }\n    // Enhanced solid color redaction with configuration support\n    function drawSolidColor(x, y, w, h, config = {}) {\n        drawBox(x, y, w, h, config);\n    }\n    // Gradient redaction\n    function drawGradient(x, y, w, h, config = {}) {\n        var _a;\n        const color1 = config.color || 'black';\n        const color2 = config.secondaryColor || 'gray';\n        const opacity = (_a = config.opacity) !== null && _a !== void 0 ? _a : 1.0;\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        const gradient = ctx.createLinearGradient(x, y, x + w, y + h);\n        gradient.addColorStop(0, color1);\n        gradient.addColorStop(1, color2);\n        ctx.fillStyle = gradient;\n        if (config.cornerRadius && config.cornerRadius > 0) {\n            ctx.beginPath();\n            ctx.roundRect(x, y, w, h, config.cornerRadius);\n            ctx.fill();\n        }\n        else {\n            ctx.fillRect(x, y, w, h);\n        }\n        ctx.restore();\n    }\n    // Pattern redaction\n    function drawPattern(x, y, w, h, config = {}) {\n        var _a;\n        const color = config.color || 'black';\n        const opacity = (_a = config.opacity) !== null && _a !== void 0 ? _a : 1.0;\n        const patternType = config.patternType || 'diagonal';\n        ctx.save();\n        ctx.globalAlpha = opacity;\n        // Fill background first\n        ctx.fillStyle = config.secondaryColor || '#f0f0f0';\n        ctx.fillRect(x, y, w, h);\n        // Draw pattern\n        ctx.strokeStyle = color;\n        ctx.lineWidth = 2;\n        switch (patternType) {\n            case 'diagonal':\n                for (let i = -h; i < w + h; i += 8) {\n                    ctx.beginPath();\n                    ctx.moveTo(x + i, y);\n                    ctx.lineTo(x + i + h, y + h);\n                    ctx.stroke();\n                }\n                break;\n            case 'dots':\n                const dotSize = 3;\n                const spacing = 8;\n                ctx.fillStyle = color;\n                for (let dx = 0; dx < w; dx += spacing) {\n                    for (let dy = 0; dy < h; dy += spacing) {\n                        ctx.beginPath();\n                        ctx.arc(x + dx + spacing / 2, y + dy + spacing / 2, dotSize / 2, 0, Math.PI * 2);\n                        ctx.fill();\n                    }\n                }\n                break;\n            case 'cross-hatch':\n                // Diagonal lines one way\n                for (let i = -h; i < w + h; i += 6) {\n                    ctx.beginPath();\n                    ctx.moveTo(x + i, y);\n                    ctx.lineTo(x + i + h, y + h);\n                    ctx.stroke();\n                }\n                // Diagonal lines the other way\n                for (let i = 0; i < w + h; i += 6) {\n                    ctx.beginPath();\n                    ctx.moveTo(x + i, y + h);\n                    ctx.lineTo(x + i - h, y);\n                    ctx.stroke();\n                }\n                break;\n            case 'waves':\n                ctx.beginPath();\n                for (let i = 0; i < w; i += 2) {\n                    const wave = Math.sin((i / w) * Math.PI * 4) * (h * 0.2);\n                    if (i === 0) {\n                        ctx.moveTo(x + i, y + h / 2 + wave);\n                    }\n                    else {\n                        ctx.lineTo(x + i, y + h / 2 + wave);\n                    }\n                }\n                ctx.stroke();\n                break;\n            case 'noise':\n                ctx.fillStyle = color;\n                for (let i = 0; i < w * h / 20; i++) {\n                    const nx = x + Math.random() * w;\n                    const ny = y + Math.random() * h;\n                    ctx.beginPath();\n                    ctx.arc(nx, ny, 1, 0, Math.PI * 2);\n                    ctx.fill();\n                }\n                break;\n        }\n        ctx.restore();\n    }\n    // Apply a CSS blur filter to a region by drawing the original image with\n    // the filter enabled only for that region.  Canvas 2D `filter` is\n    // supported in modern browsers.  We temporarily clip the context to\n    // restrict the blur effect to the redaction box.\n    function drawBlur(x, y, w, h) {\n        ctx.save();\n        ctx.filter = 'blur(8px)';\n        ctx.beginPath();\n        ctx.rect(x, y, w, h);\n        ctx.clip();\n        ctx.drawImage(img, 0, 0);\n        ctx.restore();\n    }\n    // Pixelate by drawing the region scaled down and back up.  Choose a\n    // pixel size relative to region size to maintain some obfuscation but\n    // not degrade performance too much.\n    function drawPixelate(x, y, w, h) {\n        const pixelSize = Math.max(4, Math.floor(Math.min(w, h) / 10));\n        // Create a temporary canvas to hold the region scaled down\n        const tempCanvas = document.createElement('canvas');\n        tempCanvas.width = Math.max(1, Math.floor(w / pixelSize));\n        tempCanvas.height = Math.max(1, Math.floor(h / pixelSize));\n        const tctx = tempCanvas.getContext('2d');\n        if (!tctx) {\n            drawBox(x, y, w, h);\n            return;\n        }\n        // Draw the region scaled down onto the temp canvas\n        tctx.drawImage(img, x, y, w, h, 0, 0, tempCanvas.width, tempCanvas.height);\n        // Now draw the scaled up version onto the main canvas to pixelate\n        ctx.imageSmoothingEnabled = false;\n        ctx.drawImage(tempCanvas, 0, 0, tempCanvas.width, tempCanvas.height, x, y, w, h);\n        ctx.imageSmoothingEnabled = true;\n    }\n    // Enhanced label drawing with configuration support\n    function drawLabel(x, y, w, h, text, config = {}) {\n        var _a;\n        ctx.save();\n        const bgColor = config.color || 'black';\n        const textColor = config.secondaryColor || 'white';\n        const opacity = (_a = config.opacity) !== null && _a !== void 0 ? _a : 1.0;\n        const fontSize = config.fontSize || Math.max(10, Math.floor(h * 0.6));\n        const fontFamily = config.fontFamily || 'sans-serif';\n        const cornerRadius = config.cornerRadius || 0;\n        ctx.globalAlpha = opacity;\n        // Draw background with optional rounded corners\n        ctx.fillStyle = bgColor;\n        if (cornerRadius > 0) {\n            ctx.beginPath();\n            ctx.roundRect(x, y, w, h, cornerRadius);\n            ctx.fill();\n        }\n        else {\n            ctx.fillRect(x, y, w, h);\n        }\n        // Add shadow if specified\n        if (config.shadow) {\n            ctx.shadowOffsetX = config.shadow.offsetX;\n            ctx.shadowOffsetY = config.shadow.offsetY;\n            ctx.shadowBlur = config.shadow.blur;\n            ctx.shadowColor = config.shadow.color;\n        }\n        // Draw text\n        ctx.fillStyle = textColor;\n        ctx.font = `${fontSize}px ${fontFamily}`;\n        ctx.textBaseline = 'middle';\n        ctx.textAlign = 'center';\n        // Truncate text if it won't fit\n        let label = text;\n        const maxWidth = w - 8; // More padding for better appearance\n        while (ctx.measureText(label).width > maxWidth && label.length > 1) {\n            label = label.slice(0, -1);\n        }\n        if (label !== text && label.length > 0) {\n            label = label.slice(0, -1) + '…';\n        }\n        ctx.fillText(label, x + w / 2, y + h / 2);\n        ctx.restore();\n    }\n    // Draw a mask that obscures all but the last four characters of the\n    // provided preview text.  The mask uses asterisks for the hidden\n    // portion.  Non‑digit characters are preserved in their positions.\n    function drawMaskLast4(x, y, w, h, preview) {\n        const text = preview || '';\n        // Keep only last 4 alphanumeric characters; replace preceding\n        // characters (letters or digits) with asterisks but preserve spaces and other symbols.\n        let masked = '';\n        let remaining = 4;\n        for (let i = text.length - 1; i >= 0; i--) {\n            const ch = text[i];\n            if (/\\w/.test(ch) && remaining > 0) {\n                masked = ch + masked;\n                remaining--;\n            }\n            else if (/\\w/.test(ch)) {\n                masked = '*' + masked;\n            }\n            else {\n                masked = ch + masked;\n            }\n        }\n        drawLabel(x, y, w, h, masked);\n    }\n    // Draw redactions using the selected style for each action.  If the\n    // style is not recognised, fallback to a solid box.\n    actions.forEach(action => {\n        const det = map.get(action.detectionId);\n        if (!det)\n            return;\n        const { box } = det;\n        const x = box.x * canvas.width;\n        const y = box.y * canvas.height;\n        const w = box.w * canvas.width;\n        const h = box.h * canvas.height;\n        const config = action.config || {};\n        switch (action.style) {\n            case 'BLUR':\n                drawBlur(x, y, w, h);\n                break;\n            case 'PIXELATE':\n                drawPixelate(x, y, w, h);\n                break;\n            case 'LABEL':\n                const labelText = config.labelText || action.labelText || det.kind;\n                drawLabel(x, y, w, h, labelText, config);\n                break;\n            case 'MASK_LAST4':\n                drawMaskLast4(x, y, w, h, det.preview);\n                break;\n            case 'PATTERN':\n                drawPattern(x, y, w, h, config);\n                break;\n            case 'GRADIENT':\n                drawGradient(x, y, w, h, config);\n                break;\n            case 'SOLID_COLOR':\n                drawSolidColor(x, y, w, h, config);\n                break;\n            case 'VECTOR_OVERLAY':\n                // Vector overlay for images - for now, fall back to enhanced box\n                drawBox(x, y, w, h, config);\n                break;\n            case 'REMOVE_METADATA':\n                // Metadata removal is handled by re‑encoding the image; no\n                // drawing needed for this redaction.\n                break;\n            case 'BOX':\n            default:\n                drawBox(x, y, w, h, config);\n        }\n    });\n    // Apply image sanitization options\n    let outputFormat = 'image/jpeg';\n    let outputQuality = quality;\n    // Always re-encode to strip EXIF/metadata by default\n    // The canvas.toDataURL() method automatically strips metadata\n    return canvas.toDataURL(outputFormat, outputQuality);\n}\n/** Enhanced vector-based PDF redaction with advanced styling support */\nasync function applyRedactionsToPdf(file, actions, detectionResult, options = {}) {\n    var _a, _b;\n    const origBytes = await file.arrayBuffer();\n    const origPdf = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.load(origBytes);\n    const newPdf = await pdf_lib__WEBPACK_IMPORTED_MODULE_0__.PDFDocument.create();\n    const detectionMap = new Map();\n    const detectionsToUse = detectionResult || lastResult;\n    if (detectionsToUse) {\n        for (const det of detectionsToUse.detections) {\n            detectionMap.set(det.id, det);\n        }\n    }\n    // Helper function to parse hex color to RGB values for pdf-lib\n    function parseColorToRGB(hexColor) {\n        const hex = hexColor.replace('#', '');\n        const r = parseInt(hex.substring(0, 2), 16) / 255;\n        const g = parseInt(hex.substring(2, 4), 16) / 255;\n        const b = parseInt(hex.substring(4, 6), 16) / 255;\n        return [r, g, b];\n    }\n    // Apply document sanitization if requested\n    if (options.sanitization) {\n        if (options.sanitization.removeMetadata) {\n            // Remove PDF metadata\n            newPdf.setTitle('');\n            newPdf.setAuthor('');\n            newPdf.setSubject('');\n            newPdf.setKeywords([]);\n            newPdf.setProducer('');\n            newPdf.setCreator('');\n            try {\n                newPdf.setCreationDate(new Date(0));\n                newPdf.setModificationDate(new Date(0));\n            }\n            catch (e) {\n                // Some PDF operations might fail, continue with redaction\n                console.warn('Could not set PDF dates:', e);\n            }\n        }\n    }\n    const total = origPdf.getPageCount();\n    for (let i = 0; i < total; i++) {\n        const [copiedPage] = await newPdf.copyPages(origPdf, [i]);\n        const page = newPdf.addPage(copiedPage);\n        const { width, height } = page.getSize();\n        // Remove annotations if requested\n        if ((_a = options.sanitization) === null || _a === void 0 ? void 0 : _a.removeAnnotations) {\n            // Note: pdf-lib doesn't have direct annotation removal API\n            // This would need custom implementation or different library\n        }\n        // Filter actions for this page\n        const pageActions = actions.filter(act => {\n            var _a;\n            const det = detectionMap.get(act.detectionId);\n            return det && ((_a = det.box.page) !== null && _a !== void 0 ? _a : 0) === i;\n        });\n        // Apply vector-based redactions\n        for (const action of pageActions) {\n            const det = detectionMap.get(action.detectionId);\n            if (!det)\n                continue;\n            const { box } = det;\n            const config = action.config || {};\n            const x = box.x * width;\n            // Convert from top-left origin to PDF bottom-left origin\n            const y = (1 - box.y - box.h) * height;\n            const w = box.w * width;\n            const h = box.h * height;\n            // Parse colors\n            const primaryRGB = config.color ? parseColorToRGB(config.color) : [0, 0, 0];\n            const secondaryRGB = config.secondaryColor ? parseColorToRGB(config.secondaryColor) : [1, 1, 1];\n            const opacity = (_b = config.opacity) !== null && _b !== void 0 ? _b : 1.0;\n            switch (action.style) {\n                case 'BOX':\n                case 'SOLID_COLOR':\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity,\n                        borderColor: config.borderColor ? (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(...parseColorToRGB(config.borderColor)) : undefined,\n                        borderWidth: config.borderWidth || 0\n                    });\n                    break;\n                case 'GRADIENT':\n                    // PDF gradients are complex - use solid color for now\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity\n                    });\n                    break;\n                case 'PATTERN':\n                    // Draw background\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(secondaryRGB[0], secondaryRGB[1], secondaryRGB[2]),\n                        opacity\n                    });\n                    // Add pattern overlay\n                    const patternType = config.patternType || 'diagonal';\n                    const lineColor = (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]);\n                    if (patternType === 'diagonal') {\n                        for (let offset = -h; offset < w + h; offset += 8) {\n                            page.drawLine({\n                                start: { x: x + offset, y: y },\n                                end: { x: x + offset + h, y: y + h },\n                                color: lineColor,\n                                thickness: 2,\n                                opacity\n                            });\n                        }\n                    }\n                    break;\n                case 'VECTOR_OVERLAY':\n                    // Enhanced vector redaction with proper PDF vector operations\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity,\n                        borderColor: config.borderColor ? (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(...parseColorToRGB(config.borderColor)) : undefined,\n                        borderWidth: config.borderWidth || 0\n                    });\n                    break;\n                case 'LABEL':\n                    // Draw background\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity\n                    });\n                    // Draw text\n                    const labelText = config.labelText || action.labelText || det.kind;\n                    const fontSize = config.fontSize || Math.max(8, h * 0.6);\n                    const maxChars = Math.floor((w - 8) / (fontSize * 0.6));\n                    let label = labelText;\n                    if (label.length > maxChars) {\n                        label = label.slice(0, maxChars > 3 ? maxChars - 1 : 0) + '…';\n                    }\n                    const estTextWidth = label.length * fontSize * 0.6;\n                    const xOffset = (w - estTextWidth) / 2;\n                    page.drawText(label, {\n                        x: x + Math.max(0, xOffset),\n                        y: y + h / 2 - fontSize / 2,\n                        size: fontSize,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(secondaryRGB[0], secondaryRGB[1], secondaryRGB[2]),\n                        opacity\n                    });\n                    break;\n                case 'MASK_LAST4':\n                    // Draw background\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity\n                    });\n                    // Create masked text\n                    const preview = det.preview || '';\n                    let masked = '';\n                    let remaining = 4;\n                    for (let i = preview.length - 1; i >= 0; i--) {\n                        const ch = preview[i];\n                        if (/\\w/.test(ch) && remaining > 0) {\n                            masked = ch + masked;\n                            remaining--;\n                        }\n                        else if (/\\w/.test(ch)) {\n                            masked = '*' + masked;\n                        }\n                        else {\n                            masked = ch + masked;\n                        }\n                    }\n                    const maskFontSize = Math.max(8, h * 0.6);\n                    const maskTextWidth = masked.length * maskFontSize * 0.6;\n                    const maskXOffset = (w - maskTextWidth) / 2;\n                    page.drawText(masked, {\n                        x: x + Math.max(0, maskXOffset),\n                        y: y + h / 2 - maskFontSize / 2,\n                        size: maskFontSize,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(secondaryRGB[0], secondaryRGB[1], secondaryRGB[2]),\n                        opacity\n                    });\n                    break;\n                default:\n                    // Default to solid rectangle\n                    page.drawRectangle({\n                        x, y, width: w, height: h,\n                        color: (0,pdf_lib__WEBPACK_IMPORTED_MODULE_0__.rgb)(primaryRGB[0], primaryRGB[1], primaryRGB[2]),\n                        opacity: opacity\n                    });\n            }\n        }\n    }\n    const pdfBytes = await newPdf.save();\n    const base64 = typeof Buffer !== 'undefined' ? Buffer.from(pdfBytes).toString('base64') : btoa(String.fromCharCode(...new Uint8Array(pdfBytes)));\n    return `data:application/pdf;base64,${base64}`;\n}\n/**\n * Apply redactions to a file using the previously analysed detections.\n *\n * Note: This implementation relies on `lastResult` set by analyzeDocument().\n * In a real application you should pass the detections explicitly to avoid\n * hidden state.\n */\nasync function applyRedactions(file, actions, opts, detections) {\n    var _a;\n    // If detections are provided directly, create a temporary result object\n    let result = lastResult;\n    if (detections && detections.length > 0) {\n        result = {\n            detections: detections,\n            pages: Math.max(...detections.map(d => { var _a; return (_a = d.box.page) !== null && _a !== void 0 ? _a : 0; })) + 1 || 1\n        };\n    }\n    if (!result) {\n        throw new Error('No analysis result available.  Call analyzeDocument() first.');\n    }\n    const mime = file.type || '';\n    let fileUri;\n    if (mime === 'application/pdf' || opts.output === 'pdf') {\n        fileUri = await applyRedactionsToPdf(file, actions, result, opts);\n    }\n    else {\n        const quality = (_a = opts.quality) !== null && _a !== void 0 ? _a : 0.92;\n        fileUri = await applyRedactionsToImage(file, actions, quality, result);\n    }\n    // Build a simple report summarising redactions\n    const report = {};\n    if (result) {\n        report.totalDetections = result.detections.length;\n        report.redactedCount = actions.length;\n        const counts = {};\n        for (const action of actions) {\n            const det = result.detections.find(d => d.id === action.detectionId);\n            if (det) {\n                counts[det.kind] = (counts[det.kind] || 0) + 1;\n            }\n        }\n        report.byKind = counts;\n    }\n    return { fileUri, report };\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYiIsInNvdXJjZXMiOlsid2VicGFjazovL0BjbGVhbnNoYXJlL3VpLy4uL2NvcmUtZGV0ZWN0L2Rpc3QvcGlwZWxpbmUvYXBwbHkuanM/MTM3MyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBhbmFseXplRG9jdW1lbnQgYXMgYW5hbHl6ZSB9IGZyb20gJy4vYW5hbHl6ZSc7XG5pbXBvcnQgeyBQREZEb2N1bWVudCwgcmdiIH0gZnJvbSAncGRmLWxpYic7XG4vLyBBIG1vZHVsZeKAkXNjb3BlZCB2YXJpYWJsZSB0byBzdG9yZSB0aGUgbGFzdCBhbmFseXNpcyByZXN1bHQuICBhcHBseVJlZGFjdGlvbnMoKVxuLy8gdXNlcyB0aGlzIG1hcCB0byByZXNvbHZlIGRldGVjdGlvbiBJRHMgdG8gYm91bmRpbmcgYm94ZXMuICBJbiBhIHJlYWxcbi8vIGFwcGxpY2F0aW9uIHlvdSBzaG91bGQgcGFzcyB0aGUgZGV0ZWN0aW9ucyBkaXJlY3RseSB0byBhdm9pZCBzaGFyZWRcbi8vIG11dGFibGUgc3RhdGUuICBUaGlzIHNpbXBsaWZpZWQgaW1wbGVtZW50YXRpb24gaXMgc3VmZmljaWVudCBmb3IgdGhlXG4vLyBkZW1vbnN0cmF0aW9uLlxubGV0IGxhc3RSZXN1bHQgPSBudWxsO1xuLyoqIE92ZXJyaWRlIHRoZSBleHBvcnRlZCBhbmFseXNlIGZ1bmN0aW9uIHRvIGNhcHR1cmUgdGhlIGxhc3QgcmVzdWx0LiAqL1xuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGFuYWx5emVEb2N1bWVudChmaWxlLCBvcHRzID0ge30pIHtcbiAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBhbmFseXplKGZpbGUsIG9wdHMpO1xuICAgIGxhc3RSZXN1bHQgPSByZXN1bHQ7XG4gICAgcmV0dXJuIHJlc3VsdDtcbn1cbi8qKiBJbnRlcm5hbCBoZWxwZXI6IGNvbnZlcnQgYSBjYW52YXMgdG8gYSBkYXRhIFVSSS4gKi9cbmZ1bmN0aW9uIGNhbnZhc1RvRGF0YVVSTChjYW52YXMsIG1pbWVUeXBlID0gJ2ltYWdlL3BuZycsIHF1YWxpdHkgPSAwLjkyKSB7XG4gICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwobWltZVR5cGUsIHF1YWxpdHkpO1xufVxuLyoqIEludGVybmFsIGhlbHBlcjogY29udmVydCBhIEZpbGUvQmxvYiBpbnRvIGEgSFRNTEltYWdlRWxlbWVudC4gKi9cbmFzeW5jIGZ1bmN0aW9uIGZpbGVUb0ltYWdlKGZpbGUpIHtcbiAgICBjb25zdCBkYXRhVVJMID0gYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgICBjb25zdCByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuICAgICAgICByZWFkZXIub25sb2FkID0gKCkgPT4gcmVzb2x2ZShyZWFkZXIucmVzdWx0KTtcbiAgICAgICAgcmVhZGVyLm9uZXJyb3IgPSAoKSA9PiByZWplY3QocmVhZGVyLmVycm9yKTtcbiAgICAgICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZmlsZSk7XG4gICAgfSk7XG4gICAgY29uc3QgaW1nID0gbmV3IEltYWdlKCk7XG4gICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiB7XG4gICAgICAgIGltZy5vbmxvYWQgPSAoKSA9PiByZXNvbHZlKCk7XG4gICAgICAgIGltZy5zcmMgPSBkYXRhVVJMO1xuICAgIH0pO1xuICAgIHJldHVybiBpbWc7XG59XG4vKiogQXBwbHkgcmVkYWN0aW9ucyB0byBhbiBpbWFnZS4gIFJldHVybnMgYSBEYXRhIFVSSS4gKi9cbmFzeW5jIGZ1bmN0aW9uIGFwcGx5UmVkYWN0aW9uc1RvSW1hZ2UoZmlsZSwgYWN0aW9ucywgcXVhbGl0eSA9IDAuOTIsIGRldGVjdGlvblJlc3VsdCkge1xuICAgIGNvbnN0IGltZyA9IGF3YWl0IGZpbGVUb0ltYWdlKGZpbGUpO1xuICAgIGNvbnN0IGNhbnZhcyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgIGNhbnZhcy53aWR0aCA9IGltZy53aWR0aDtcbiAgICBjYW52YXMuaGVpZ2h0ID0gaW1nLmhlaWdodDtcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKTtcbiAgICBpZiAoIWN0eClcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW5ub3Qgb2J0YWluIDJEIGNvbnRleHQnKTtcbiAgICAvLyBEcmF3IG9yaWdpbmFsIGltYWdlXG4gICAgY3R4LmRyYXdJbWFnZShpbWcsIDAsIDApO1xuICAgIC8vIEJ1aWxkIGRldGVjdGlvbiBtYXBcbiAgICBjb25zdCBtYXAgPSBuZXcgTWFwKCk7XG4gICAgY29uc3QgZGV0ZWN0aW9uc1RvVXNlID0gZGV0ZWN0aW9uUmVzdWx0IHx8IGxhc3RSZXN1bHQ7XG4gICAgaWYgKGRldGVjdGlvbnNUb1VzZSkge1xuICAgICAgICBmb3IgKGNvbnN0IGRldCBvZiBkZXRlY3Rpb25zVG9Vc2UuZGV0ZWN0aW9ucykge1xuICAgICAgICAgICAgbWFwLnNldChkZXQuaWQsIGRldCk7XG4gICAgICAgIH1cbiAgICB9XG4gICAgLy8gVXRpbGl0eSBoZWxwZXJzIGZvciBkcmF3aW5nIHZhcmlvdXMgcmVkYWN0aW9uIHN0eWxlcyBvbiBpbWFnZXNcbiAgICBmdW5jdGlvbiBkcmF3Qm94KHgsIHksIHcsIGgsIGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY29sb3IgPSBjb25maWcuY29sb3IgfHwgJ2JsYWNrJztcbiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IChfYSA9IGNvbmZpZy5vcGFjaXR5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxLjA7XG4gICAgICAgIGNvbnN0IGNvcm5lclJhZGl1cyA9IGNvbmZpZy5jb3JuZXJSYWRpdXMgfHwgMDtcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eTtcbiAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICBpZiAoY29ybmVyUmFkaXVzID4gMCkge1xuICAgICAgICAgICAgLy8gRHJhdyByb3VuZGVkIHJlY3RhbmdsZVxuICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgY3R4LnJvdW5kUmVjdCh4LCB5LCB3LCBoLCBjb3JuZXJSYWRpdXMpO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBBZGQgYm9yZGVyIGlmIHNwZWNpZmllZFxuICAgICAgICBpZiAoY29uZmlnLmJvcmRlcldpZHRoICYmIGNvbmZpZy5ib3JkZXJDb2xvcikge1xuICAgICAgICAgICAgY3R4LmxpbmVXaWR0aCA9IGNvbmZpZy5ib3JkZXJXaWR0aDtcbiAgICAgICAgICAgIGN0eC5zdHJva2VTdHlsZSA9IGNvbmZpZy5ib3JkZXJDb2xvcjtcbiAgICAgICAgICAgIGlmIChjb3JuZXJSYWRpdXMgPiAwKSB7XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGN0eC5yb3VuZFJlY3QoeCwgeSwgdywgaCwgY29ybmVyUmFkaXVzKTtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgICAvLyBFbmhhbmNlZCBzb2xpZCBjb2xvciByZWRhY3Rpb24gd2l0aCBjb25maWd1cmF0aW9uIHN1cHBvcnRcbiAgICBmdW5jdGlvbiBkcmF3U29saWRDb2xvcih4LCB5LCB3LCBoLCBjb25maWcgPSB7fSkge1xuICAgICAgICBkcmF3Qm94KHgsIHksIHcsIGgsIGNvbmZpZyk7XG4gICAgfVxuICAgIC8vIEdyYWRpZW50IHJlZGFjdGlvblxuICAgIGZ1bmN0aW9uIGRyYXdHcmFkaWVudCh4LCB5LCB3LCBoLCBjb25maWcgPSB7fSkge1xuICAgICAgICB2YXIgX2E7XG4gICAgICAgIGNvbnN0IGNvbG9yMSA9IGNvbmZpZy5jb2xvciB8fCAnYmxhY2snO1xuICAgICAgICBjb25zdCBjb2xvcjIgPSBjb25maWcuc2Vjb25kYXJ5Q29sb3IgfHwgJ2dyYXknO1xuICAgICAgICBjb25zdCBvcGFjaXR5ID0gKF9hID0gY29uZmlnLm9wYWNpdHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEuMDtcbiAgICAgICAgY3R4LnNhdmUoKTtcbiAgICAgICAgY3R4Lmdsb2JhbEFscGhhID0gb3BhY2l0eTtcbiAgICAgICAgY29uc3QgZ3JhZGllbnQgPSBjdHguY3JlYXRlTGluZWFyR3JhZGllbnQoeCwgeSwgeCArIHcsIHkgKyBoKTtcbiAgICAgICAgZ3JhZGllbnQuYWRkQ29sb3JTdG9wKDAsIGNvbG9yMSk7XG4gICAgICAgIGdyYWRpZW50LmFkZENvbG9yU3RvcCgxLCBjb2xvcjIpO1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gZ3JhZGllbnQ7XG4gICAgICAgIGlmIChjb25maWcuY29ybmVyUmFkaXVzICYmIGNvbmZpZy5jb3JuZXJSYWRpdXMgPiAwKSB7XG4gICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICBjdHgucm91bmRSZWN0KHgsIHksIHcsIGgsIGNvbmZpZy5jb3JuZXJSYWRpdXMpO1xuICAgICAgICAgICAgY3R4LmZpbGwoKTtcbiAgICAgICAgfVxuICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgIGN0eC5maWxsUmVjdCh4LCB5LCB3LCBoKTtcbiAgICAgICAgfVxuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgICAvLyBQYXR0ZXJuIHJlZGFjdGlvblxuICAgIGZ1bmN0aW9uIGRyYXdQYXR0ZXJuKHgsIHksIHcsIGgsIGNvbmZpZyA9IHt9KSB7XG4gICAgICAgIHZhciBfYTtcbiAgICAgICAgY29uc3QgY29sb3IgPSBjb25maWcuY29sb3IgfHwgJ2JsYWNrJztcbiAgICAgICAgY29uc3Qgb3BhY2l0eSA9IChfYSA9IGNvbmZpZy5vcGFjaXR5KSAhPT0gbnVsbCAmJiBfYSAhPT0gdm9pZCAwID8gX2EgOiAxLjA7XG4gICAgICAgIGNvbnN0IHBhdHRlcm5UeXBlID0gY29uZmlnLnBhdHRlcm5UeXBlIHx8ICdkaWFnb25hbCc7XG4gICAgICAgIGN0eC5zYXZlKCk7XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IG9wYWNpdHk7XG4gICAgICAgIC8vIEZpbGwgYmFja2dyb3VuZCBmaXJzdFxuICAgICAgICBjdHguZmlsbFN0eWxlID0gY29uZmlnLnNlY29uZGFyeUNvbG9yIHx8ICcjZjBmMGYwJztcbiAgICAgICAgY3R4LmZpbGxSZWN0KHgsIHksIHcsIGgpO1xuICAgICAgICAvLyBEcmF3IHBhdHRlcm5cbiAgICAgICAgY3R4LnN0cm9rZVN0eWxlID0gY29sb3I7XG4gICAgICAgIGN0eC5saW5lV2lkdGggPSAyO1xuICAgICAgICBzd2l0Y2ggKHBhdHRlcm5UeXBlKSB7XG4gICAgICAgICAgICBjYXNlICdkaWFnb25hbCc6XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IC1oOyBpIDwgdyArIGg7IGkgKz0gOCkge1xuICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5tb3ZlVG8oeCArIGksIHkpO1xuICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyBpICsgaCwgeSArIGgpO1xuICAgICAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnZG90cyc6XG4gICAgICAgICAgICAgICAgY29uc3QgZG90U2l6ZSA9IDM7XG4gICAgICAgICAgICAgICAgY29uc3Qgc3BhY2luZyA9IDg7XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGR4ID0gMDsgZHggPCB3OyBkeCArPSBzcGFjaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGR5ID0gMDsgZHkgPCBoOyBkeSArPSBzcGFjaW5nKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYmVnaW5QYXRoKCk7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHguYXJjKHggKyBkeCArIHNwYWNpbmcgLyAyLCB5ICsgZHkgKyBzcGFjaW5nIC8gMiwgZG90U2l6ZSAvIDIsIDAsIE1hdGguUEkgKiAyKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdjcm9zcy1oYXRjaCc6XG4gICAgICAgICAgICAgICAgLy8gRGlhZ29uYWwgbGluZXMgb25lIHdheVxuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAtaDsgaSA8IHcgKyBoOyBpICs9IDYpIHtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgubW92ZVRvKHggKyBpLCB5KTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmxpbmVUbyh4ICsgaSArIGgsIHkgKyBoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4LnN0cm9rZSgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAvLyBEaWFnb25hbCBsaW5lcyB0aGUgb3RoZXIgd2F5XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCB3ICsgaDsgaSArPSA2KSB7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgaSwgeSArIGgpO1xuICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyBpIC0gaCwgeSk7XG4gICAgICAgICAgICAgICAgICAgIGN0eC5zdHJva2UoKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICd3YXZlcyc6XG4gICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdzsgaSArPSAyKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHdhdmUgPSBNYXRoLnNpbigoaSAvIHcpICogTWF0aC5QSSAqIDQpICogKGggKiAwLjIpO1xuICAgICAgICAgICAgICAgICAgICBpZiAoaSA9PT0gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgY3R4Lm1vdmVUbyh4ICsgaSwgeSArIGggLyAyICsgd2F2ZSk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjdHgubGluZVRvKHggKyBpLCB5ICsgaCAvIDIgKyB3YXZlKTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjdHguc3Ryb2tlKCk7XG4gICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICBjYXNlICdub2lzZSc6XG4gICAgICAgICAgICAgICAgY3R4LmZpbGxTdHlsZSA9IGNvbG9yO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgdyAqIGggLyAyMDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG54ID0geCArIE1hdGgucmFuZG9tKCkgKiB3O1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBueSA9IHkgKyBNYXRoLnJhbmRvbSgpICogaDtcbiAgICAgICAgICAgICAgICAgICAgY3R4LmJlZ2luUGF0aCgpO1xuICAgICAgICAgICAgICAgICAgICBjdHguYXJjKG54LCBueSwgMSwgMCwgTWF0aC5QSSAqIDIpO1xuICAgICAgICAgICAgICAgICAgICBjdHguZmlsbCgpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgfVxuICAgICAgICBjdHgucmVzdG9yZSgpO1xuICAgIH1cbiAgICAvLyBBcHBseSBhIENTUyBibHVyIGZpbHRlciB0byBhIHJlZ2lvbiBieSBkcmF3aW5nIHRoZSBvcmlnaW5hbCBpbWFnZSB3aXRoXG4gICAgLy8gdGhlIGZpbHRlciBlbmFibGVkIG9ubHkgZm9yIHRoYXQgcmVnaW9uLiAgQ2FudmFzIDJEIGBmaWx0ZXJgIGlzXG4gICAgLy8gc3VwcG9ydGVkIGluIG1vZGVybiBicm93c2Vycy4gIFdlIHRlbXBvcmFyaWx5IGNsaXAgdGhlIGNvbnRleHQgdG9cbiAgICAvLyByZXN0cmljdCB0aGUgYmx1ciBlZmZlY3QgdG8gdGhlIHJlZGFjdGlvbiBib3guXG4gICAgZnVuY3Rpb24gZHJhd0JsdXIoeCwgeSwgdywgaCkge1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjdHguZmlsdGVyID0gJ2JsdXIoOHB4KSc7XG4gICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgY3R4LnJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgIGN0eC5jbGlwKCk7XG4gICAgICAgIGN0eC5kcmF3SW1hZ2UoaW1nLCAwLCAwKTtcbiAgICAgICAgY3R4LnJlc3RvcmUoKTtcbiAgICB9XG4gICAgLy8gUGl4ZWxhdGUgYnkgZHJhd2luZyB0aGUgcmVnaW9uIHNjYWxlZCBkb3duIGFuZCBiYWNrIHVwLiAgQ2hvb3NlIGFcbiAgICAvLyBwaXhlbCBzaXplIHJlbGF0aXZlIHRvIHJlZ2lvbiBzaXplIHRvIG1haW50YWluIHNvbWUgb2JmdXNjYXRpb24gYnV0XG4gICAgLy8gbm90IGRlZ3JhZGUgcGVyZm9ybWFuY2UgdG9vIG11Y2guXG4gICAgZnVuY3Rpb24gZHJhd1BpeGVsYXRlKHgsIHksIHcsIGgpIHtcbiAgICAgICAgY29uc3QgcGl4ZWxTaXplID0gTWF0aC5tYXgoNCwgTWF0aC5mbG9vcihNYXRoLm1pbih3LCBoKSAvIDEwKSk7XG4gICAgICAgIC8vIENyZWF0ZSBhIHRlbXBvcmFyeSBjYW52YXMgdG8gaG9sZCB0aGUgcmVnaW9uIHNjYWxlZCBkb3duXG4gICAgICAgIGNvbnN0IHRlbXBDYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcbiAgICAgICAgdGVtcENhbnZhcy53aWR0aCA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IodyAvIHBpeGVsU2l6ZSkpO1xuICAgICAgICB0ZW1wQ2FudmFzLmhlaWdodCA9IE1hdGgubWF4KDEsIE1hdGguZmxvb3IoaCAvIHBpeGVsU2l6ZSkpO1xuICAgICAgICBjb25zdCB0Y3R4ID0gdGVtcENhbnZhcy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgICBpZiAoIXRjdHgpIHtcbiAgICAgICAgICAgIGRyYXdCb3goeCwgeSwgdywgaCk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgLy8gRHJhdyB0aGUgcmVnaW9uIHNjYWxlZCBkb3duIG9udG8gdGhlIHRlbXAgY2FudmFzXG4gICAgICAgIHRjdHguZHJhd0ltYWdlKGltZywgeCwgeSwgdywgaCwgMCwgMCwgdGVtcENhbnZhcy53aWR0aCwgdGVtcENhbnZhcy5oZWlnaHQpO1xuICAgICAgICAvLyBOb3cgZHJhdyB0aGUgc2NhbGVkIHVwIHZlcnNpb24gb250byB0aGUgbWFpbiBjYW52YXMgdG8gcGl4ZWxhdGVcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IGZhbHNlO1xuICAgICAgICBjdHguZHJhd0ltYWdlKHRlbXBDYW52YXMsIDAsIDAsIHRlbXBDYW52YXMud2lkdGgsIHRlbXBDYW52YXMuaGVpZ2h0LCB4LCB5LCB3LCBoKTtcbiAgICAgICAgY3R4LmltYWdlU21vb3RoaW5nRW5hYmxlZCA9IHRydWU7XG4gICAgfVxuICAgIC8vIEVuaGFuY2VkIGxhYmVsIGRyYXdpbmcgd2l0aCBjb25maWd1cmF0aW9uIHN1cHBvcnRcbiAgICBmdW5jdGlvbiBkcmF3TGFiZWwoeCwgeSwgdywgaCwgdGV4dCwgY29uZmlnID0ge30pIHtcbiAgICAgICAgdmFyIF9hO1xuICAgICAgICBjdHguc2F2ZSgpO1xuICAgICAgICBjb25zdCBiZ0NvbG9yID0gY29uZmlnLmNvbG9yIHx8ICdibGFjayc7XG4gICAgICAgIGNvbnN0IHRleHRDb2xvciA9IGNvbmZpZy5zZWNvbmRhcnlDb2xvciB8fCAnd2hpdGUnO1xuICAgICAgICBjb25zdCBvcGFjaXR5ID0gKF9hID0gY29uZmlnLm9wYWNpdHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDEuMDtcbiAgICAgICAgY29uc3QgZm9udFNpemUgPSBjb25maWcuZm9udFNpemUgfHwgTWF0aC5tYXgoMTAsIE1hdGguZmxvb3IoaCAqIDAuNikpO1xuICAgICAgICBjb25zdCBmb250RmFtaWx5ID0gY29uZmlnLmZvbnRGYW1pbHkgfHwgJ3NhbnMtc2VyaWYnO1xuICAgICAgICBjb25zdCBjb3JuZXJSYWRpdXMgPSBjb25maWcuY29ybmVyUmFkaXVzIHx8IDA7XG4gICAgICAgIGN0eC5nbG9iYWxBbHBoYSA9IG9wYWNpdHk7XG4gICAgICAgIC8vIERyYXcgYmFja2dyb3VuZCB3aXRoIG9wdGlvbmFsIHJvdW5kZWQgY29ybmVyc1xuICAgICAgICBjdHguZmlsbFN0eWxlID0gYmdDb2xvcjtcbiAgICAgICAgaWYgKGNvcm5lclJhZGl1cyA+IDApIHtcbiAgICAgICAgICAgIGN0eC5iZWdpblBhdGgoKTtcbiAgICAgICAgICAgIGN0eC5yb3VuZFJlY3QoeCwgeSwgdywgaCwgY29ybmVyUmFkaXVzKTtcbiAgICAgICAgICAgIGN0eC5maWxsKCk7XG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBjdHguZmlsbFJlY3QoeCwgeSwgdywgaCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gQWRkIHNoYWRvdyBpZiBzcGVjaWZpZWRcbiAgICAgICAgaWYgKGNvbmZpZy5zaGFkb3cpIHtcbiAgICAgICAgICAgIGN0eC5zaGFkb3dPZmZzZXRYID0gY29uZmlnLnNoYWRvdy5vZmZzZXRYO1xuICAgICAgICAgICAgY3R4LnNoYWRvd09mZnNldFkgPSBjb25maWcuc2hhZG93Lm9mZnNldFk7XG4gICAgICAgICAgICBjdHguc2hhZG93Qmx1ciA9IGNvbmZpZy5zaGFkb3cuYmx1cjtcbiAgICAgICAgICAgIGN0eC5zaGFkb3dDb2xvciA9IGNvbmZpZy5zaGFkb3cuY29sb3I7XG4gICAgICAgIH1cbiAgICAgICAgLy8gRHJhdyB0ZXh0XG4gICAgICAgIGN0eC5maWxsU3R5bGUgPSB0ZXh0Q29sb3I7XG4gICAgICAgIGN0eC5mb250ID0gYCR7Zm9udFNpemV9cHggJHtmb250RmFtaWx5fWA7XG4gICAgICAgIGN0eC50ZXh0QmFzZWxpbmUgPSAnbWlkZGxlJztcbiAgICAgICAgY3R4LnRleHRBbGlnbiA9ICdjZW50ZXInO1xuICAgICAgICAvLyBUcnVuY2F0ZSB0ZXh0IGlmIGl0IHdvbid0IGZpdFxuICAgICAgICBsZXQgbGFiZWwgPSB0ZXh0O1xuICAgICAgICBjb25zdCBtYXhXaWR0aCA9IHcgLSA4OyAvLyBNb3JlIHBhZGRpbmcgZm9yIGJldHRlciBhcHBlYXJhbmNlXG4gICAgICAgIHdoaWxlIChjdHgubWVhc3VyZVRleHQobGFiZWwpLndpZHRoID4gbWF4V2lkdGggJiYgbGFiZWwubGVuZ3RoID4gMSkge1xuICAgICAgICAgICAgbGFiZWwgPSBsYWJlbC5zbGljZSgwLCAtMSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxhYmVsICE9PSB0ZXh0ICYmIGxhYmVsLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIGxhYmVsID0gbGFiZWwuc2xpY2UoMCwgLTEpICsgJ+KApic7XG4gICAgICAgIH1cbiAgICAgICAgY3R4LmZpbGxUZXh0KGxhYmVsLCB4ICsgdyAvIDIsIHkgKyBoIC8gMik7XG4gICAgICAgIGN0eC5yZXN0b3JlKCk7XG4gICAgfVxuICAgIC8vIERyYXcgYSBtYXNrIHRoYXQgb2JzY3VyZXMgYWxsIGJ1dCB0aGUgbGFzdCBmb3VyIGNoYXJhY3RlcnMgb2YgdGhlXG4gICAgLy8gcHJvdmlkZWQgcHJldmlldyB0ZXh0LiAgVGhlIG1hc2sgdXNlcyBhc3Rlcmlza3MgZm9yIHRoZSBoaWRkZW5cbiAgICAvLyBwb3J0aW9uLiAgTm9u4oCRZGlnaXQgY2hhcmFjdGVycyBhcmUgcHJlc2VydmVkIGluIHRoZWlyIHBvc2l0aW9ucy5cbiAgICBmdW5jdGlvbiBkcmF3TWFza0xhc3Q0KHgsIHksIHcsIGgsIHByZXZpZXcpIHtcbiAgICAgICAgY29uc3QgdGV4dCA9IHByZXZpZXcgfHwgJyc7XG4gICAgICAgIC8vIEtlZXAgb25seSBsYXN0IDQgYWxwaGFudW1lcmljIGNoYXJhY3RlcnM7IHJlcGxhY2UgcHJlY2VkaW5nXG4gICAgICAgIC8vIGNoYXJhY3RlcnMgKGxldHRlcnMgb3IgZGlnaXRzKSB3aXRoIGFzdGVyaXNrcyBidXQgcHJlc2VydmUgc3BhY2VzIGFuZCBvdGhlciBzeW1ib2xzLlxuICAgICAgICBsZXQgbWFza2VkID0gJyc7XG4gICAgICAgIGxldCByZW1haW5pbmcgPSA0O1xuICAgICAgICBmb3IgKGxldCBpID0gdGV4dC5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xuICAgICAgICAgICAgY29uc3QgY2ggPSB0ZXh0W2ldO1xuICAgICAgICAgICAgaWYgKC9cXHcvLnRlc3QoY2gpICYmIHJlbWFpbmluZyA+IDApIHtcbiAgICAgICAgICAgICAgICBtYXNrZWQgPSBjaCArIG1hc2tlZDtcbiAgICAgICAgICAgICAgICByZW1haW5pbmctLTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGVsc2UgaWYgKC9cXHcvLnRlc3QoY2gpKSB7XG4gICAgICAgICAgICAgICAgbWFza2VkID0gJyonICsgbWFza2VkO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICAgICAgbWFza2VkID0gY2ggKyBtYXNrZWQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgZHJhd0xhYmVsKHgsIHksIHcsIGgsIG1hc2tlZCk7XG4gICAgfVxuICAgIC8vIERyYXcgcmVkYWN0aW9ucyB1c2luZyB0aGUgc2VsZWN0ZWQgc3R5bGUgZm9yIGVhY2ggYWN0aW9uLiAgSWYgdGhlXG4gICAgLy8gc3R5bGUgaXMgbm90IHJlY29nbmlzZWQsIGZhbGxiYWNrIHRvIGEgc29saWQgYm94LlxuICAgIGFjdGlvbnMuZm9yRWFjaChhY3Rpb24gPT4ge1xuICAgICAgICBjb25zdCBkZXQgPSBtYXAuZ2V0KGFjdGlvbi5kZXRlY3Rpb25JZCk7XG4gICAgICAgIGlmICghZGV0KVxuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICBjb25zdCB7IGJveCB9ID0gZGV0O1xuICAgICAgICBjb25zdCB4ID0gYm94LnggKiBjYW52YXMud2lkdGg7XG4gICAgICAgIGNvbnN0IHkgPSBib3gueSAqIGNhbnZhcy5oZWlnaHQ7XG4gICAgICAgIGNvbnN0IHcgPSBib3gudyAqIGNhbnZhcy53aWR0aDtcbiAgICAgICAgY29uc3QgaCA9IGJveC5oICogY2FudmFzLmhlaWdodDtcbiAgICAgICAgY29uc3QgY29uZmlnID0gYWN0aW9uLmNvbmZpZyB8fCB7fTtcbiAgICAgICAgc3dpdGNoIChhY3Rpb24uc3R5bGUpIHtcbiAgICAgICAgICAgIGNhc2UgJ0JMVVInOlxuICAgICAgICAgICAgICAgIGRyYXdCbHVyKHgsIHksIHcsIGgpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUElYRUxBVEUnOlxuICAgICAgICAgICAgICAgIGRyYXdQaXhlbGF0ZSh4LCB5LCB3LCBoKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0xBQkVMJzpcbiAgICAgICAgICAgICAgICBjb25zdCBsYWJlbFRleHQgPSBjb25maWcubGFiZWxUZXh0IHx8IGFjdGlvbi5sYWJlbFRleHQgfHwgZGV0LmtpbmQ7XG4gICAgICAgICAgICAgICAgZHJhd0xhYmVsKHgsIHksIHcsIGgsIGxhYmVsVGV4dCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ01BU0tfTEFTVDQnOlxuICAgICAgICAgICAgICAgIGRyYXdNYXNrTGFzdDQoeCwgeSwgdywgaCwgZGV0LnByZXZpZXcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUEFUVEVSTic6XG4gICAgICAgICAgICAgICAgZHJhd1BhdHRlcm4oeCwgeSwgdywgaCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ0dSQURJRU5UJzpcbiAgICAgICAgICAgICAgICBkcmF3R3JhZGllbnQoeCwgeSwgdywgaCwgY29uZmlnKTtcbiAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgIGNhc2UgJ1NPTElEX0NPTE9SJzpcbiAgICAgICAgICAgICAgICBkcmF3U29saWRDb2xvcih4LCB5LCB3LCBoLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnVkVDVE9SX09WRVJMQVknOlxuICAgICAgICAgICAgICAgIC8vIFZlY3RvciBvdmVybGF5IGZvciBpbWFnZXMgLSBmb3Igbm93LCBmYWxsIGJhY2sgdG8gZW5oYW5jZWQgYm94XG4gICAgICAgICAgICAgICAgZHJhd0JveCh4LCB5LCB3LCBoLCBjb25maWcpO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnUkVNT1ZFX01FVEFEQVRBJzpcbiAgICAgICAgICAgICAgICAvLyBNZXRhZGF0YSByZW1vdmFsIGlzIGhhbmRsZWQgYnkgcmXigJFlbmNvZGluZyB0aGUgaW1hZ2U7IG5vXG4gICAgICAgICAgICAgICAgLy8gZHJhd2luZyBuZWVkZWQgZm9yIHRoaXMgcmVkYWN0aW9uLlxuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgY2FzZSAnQk9YJzpcbiAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgZHJhd0JveCh4LCB5LCB3LCBoLCBjb25maWcpO1xuICAgICAgICB9XG4gICAgfSk7XG4gICAgLy8gQXBwbHkgaW1hZ2Ugc2FuaXRpemF0aW9uIG9wdGlvbnNcbiAgICBsZXQgb3V0cHV0Rm9ybWF0ID0gJ2ltYWdlL2pwZWcnO1xuICAgIGxldCBvdXRwdXRRdWFsaXR5ID0gcXVhbGl0eTtcbiAgICAvLyBBbHdheXMgcmUtZW5jb2RlIHRvIHN0cmlwIEVYSUYvbWV0YWRhdGEgYnkgZGVmYXVsdFxuICAgIC8vIFRoZSBjYW52YXMudG9EYXRhVVJMKCkgbWV0aG9kIGF1dG9tYXRpY2FsbHkgc3RyaXBzIG1ldGFkYXRhXG4gICAgcmV0dXJuIGNhbnZhcy50b0RhdGFVUkwob3V0cHV0Rm9ybWF0LCBvdXRwdXRRdWFsaXR5KTtcbn1cbi8qKiBFbmhhbmNlZCB2ZWN0b3ItYmFzZWQgUERGIHJlZGFjdGlvbiB3aXRoIGFkdmFuY2VkIHN0eWxpbmcgc3VwcG9ydCAqL1xuYXN5bmMgZnVuY3Rpb24gYXBwbHlSZWRhY3Rpb25zVG9QZGYoZmlsZSwgYWN0aW9ucywgZGV0ZWN0aW9uUmVzdWx0LCBvcHRpb25zID0ge30pIHtcbiAgICB2YXIgX2EsIF9iO1xuICAgIGNvbnN0IG9yaWdCeXRlcyA9IGF3YWl0IGZpbGUuYXJyYXlCdWZmZXIoKTtcbiAgICBjb25zdCBvcmlnUGRmID0gYXdhaXQgUERGRG9jdW1lbnQubG9hZChvcmlnQnl0ZXMpO1xuICAgIGNvbnN0IG5ld1BkZiA9IGF3YWl0IFBERkRvY3VtZW50LmNyZWF0ZSgpO1xuICAgIGNvbnN0IGRldGVjdGlvbk1hcCA9IG5ldyBNYXAoKTtcbiAgICBjb25zdCBkZXRlY3Rpb25zVG9Vc2UgPSBkZXRlY3Rpb25SZXN1bHQgfHwgbGFzdFJlc3VsdDtcbiAgICBpZiAoZGV0ZWN0aW9uc1RvVXNlKSB7XG4gICAgICAgIGZvciAoY29uc3QgZGV0IG9mIGRldGVjdGlvbnNUb1VzZS5kZXRlY3Rpb25zKSB7XG4gICAgICAgICAgICBkZXRlY3Rpb25NYXAuc2V0KGRldC5pZCwgZGV0KTtcbiAgICAgICAgfVxuICAgIH1cbiAgICAvLyBIZWxwZXIgZnVuY3Rpb24gdG8gcGFyc2UgaGV4IGNvbG9yIHRvIFJHQiB2YWx1ZXMgZm9yIHBkZi1saWJcbiAgICBmdW5jdGlvbiBwYXJzZUNvbG9yVG9SR0IoaGV4Q29sb3IpIHtcbiAgICAgICAgY29uc3QgaGV4ID0gaGV4Q29sb3IucmVwbGFjZSgnIycsICcnKTtcbiAgICAgICAgY29uc3QgciA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMCwgMiksIDE2KSAvIDI1NTtcbiAgICAgICAgY29uc3QgZyA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoMiwgNCksIDE2KSAvIDI1NTtcbiAgICAgICAgY29uc3QgYiA9IHBhcnNlSW50KGhleC5zdWJzdHJpbmcoNCwgNiksIDE2KSAvIDI1NTtcbiAgICAgICAgcmV0dXJuIFtyLCBnLCBiXTtcbiAgICB9XG4gICAgLy8gQXBwbHkgZG9jdW1lbnQgc2FuaXRpemF0aW9uIGlmIHJlcXVlc3RlZFxuICAgIGlmIChvcHRpb25zLnNhbml0aXphdGlvbikge1xuICAgICAgICBpZiAob3B0aW9ucy5zYW5pdGl6YXRpb24ucmVtb3ZlTWV0YWRhdGEpIHtcbiAgICAgICAgICAgIC8vIFJlbW92ZSBQREYgbWV0YWRhdGFcbiAgICAgICAgICAgIG5ld1BkZi5zZXRUaXRsZSgnJyk7XG4gICAgICAgICAgICBuZXdQZGYuc2V0QXV0aG9yKCcnKTtcbiAgICAgICAgICAgIG5ld1BkZi5zZXRTdWJqZWN0KCcnKTtcbiAgICAgICAgICAgIG5ld1BkZi5zZXRLZXl3b3JkcyhbXSk7XG4gICAgICAgICAgICBuZXdQZGYuc2V0UHJvZHVjZXIoJycpO1xuICAgICAgICAgICAgbmV3UGRmLnNldENyZWF0b3IoJycpO1xuICAgICAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgICAgICBuZXdQZGYuc2V0Q3JlYXRpb25EYXRlKG5ldyBEYXRlKDApKTtcbiAgICAgICAgICAgICAgICBuZXdQZGYuc2V0TW9kaWZpY2F0aW9uRGF0ZShuZXcgRGF0ZSgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjYXRjaCAoZSkge1xuICAgICAgICAgICAgICAgIC8vIFNvbWUgUERGIG9wZXJhdGlvbnMgbWlnaHQgZmFpbCwgY29udGludWUgd2l0aCByZWRhY3Rpb25cbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ0NvdWxkIG5vdCBzZXQgUERGIGRhdGVzOicsIGUpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHRvdGFsID0gb3JpZ1BkZi5nZXRQYWdlQ291bnQoKTtcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRvdGFsOyBpKyspIHtcbiAgICAgICAgY29uc3QgW2NvcGllZFBhZ2VdID0gYXdhaXQgbmV3UGRmLmNvcHlQYWdlcyhvcmlnUGRmLCBbaV0pO1xuICAgICAgICBjb25zdCBwYWdlID0gbmV3UGRmLmFkZFBhZ2UoY29waWVkUGFnZSk7XG4gICAgICAgIGNvbnN0IHsgd2lkdGgsIGhlaWdodCB9ID0gcGFnZS5nZXRTaXplKCk7XG4gICAgICAgIC8vIFJlbW92ZSBhbm5vdGF0aW9ucyBpZiByZXF1ZXN0ZWRcbiAgICAgICAgaWYgKChfYSA9IG9wdGlvbnMuc2FuaXRpemF0aW9uKSA9PT0gbnVsbCB8fCBfYSA9PT0gdm9pZCAwID8gdm9pZCAwIDogX2EucmVtb3ZlQW5ub3RhdGlvbnMpIHtcbiAgICAgICAgICAgIC8vIE5vdGU6IHBkZi1saWIgZG9lc24ndCBoYXZlIGRpcmVjdCBhbm5vdGF0aW9uIHJlbW92YWwgQVBJXG4gICAgICAgICAgICAvLyBUaGlzIHdvdWxkIG5lZWQgY3VzdG9tIGltcGxlbWVudGF0aW9uIG9yIGRpZmZlcmVudCBsaWJyYXJ5XG4gICAgICAgIH1cbiAgICAgICAgLy8gRmlsdGVyIGFjdGlvbnMgZm9yIHRoaXMgcGFnZVxuICAgICAgICBjb25zdCBwYWdlQWN0aW9ucyA9IGFjdGlvbnMuZmlsdGVyKGFjdCA9PiB7XG4gICAgICAgICAgICB2YXIgX2E7XG4gICAgICAgICAgICBjb25zdCBkZXQgPSBkZXRlY3Rpb25NYXAuZ2V0KGFjdC5kZXRlY3Rpb25JZCk7XG4gICAgICAgICAgICByZXR1cm4gZGV0ICYmICgoX2EgPSBkZXQuYm94LnBhZ2UpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDApID09PSBpO1xuICAgICAgICB9KTtcbiAgICAgICAgLy8gQXBwbHkgdmVjdG9yLWJhc2VkIHJlZGFjdGlvbnNcbiAgICAgICAgZm9yIChjb25zdCBhY3Rpb24gb2YgcGFnZUFjdGlvbnMpIHtcbiAgICAgICAgICAgIGNvbnN0IGRldCA9IGRldGVjdGlvbk1hcC5nZXQoYWN0aW9uLmRldGVjdGlvbklkKTtcbiAgICAgICAgICAgIGlmICghZGV0KVxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgY29uc3QgeyBib3ggfSA9IGRldDtcbiAgICAgICAgICAgIGNvbnN0IGNvbmZpZyA9IGFjdGlvbi5jb25maWcgfHwge307XG4gICAgICAgICAgICBjb25zdCB4ID0gYm94LnggKiB3aWR0aDtcbiAgICAgICAgICAgIC8vIENvbnZlcnQgZnJvbSB0b3AtbGVmdCBvcmlnaW4gdG8gUERGIGJvdHRvbS1sZWZ0IG9yaWdpblxuICAgICAgICAgICAgY29uc3QgeSA9ICgxIC0gYm94LnkgLSBib3guaCkgKiBoZWlnaHQ7XG4gICAgICAgICAgICBjb25zdCB3ID0gYm94LncgKiB3aWR0aDtcbiAgICAgICAgICAgIGNvbnN0IGggPSBib3guaCAqIGhlaWdodDtcbiAgICAgICAgICAgIC8vIFBhcnNlIGNvbG9yc1xuICAgICAgICAgICAgY29uc3QgcHJpbWFyeVJHQiA9IGNvbmZpZy5jb2xvciA/IHBhcnNlQ29sb3JUb1JHQihjb25maWcuY29sb3IpIDogWzAsIDAsIDBdO1xuICAgICAgICAgICAgY29uc3Qgc2Vjb25kYXJ5UkdCID0gY29uZmlnLnNlY29uZGFyeUNvbG9yID8gcGFyc2VDb2xvclRvUkdCKGNvbmZpZy5zZWNvbmRhcnlDb2xvcikgOiBbMSwgMSwgMV07XG4gICAgICAgICAgICBjb25zdCBvcGFjaXR5ID0gKF9iID0gY29uZmlnLm9wYWNpdHkpICE9PSBudWxsICYmIF9iICE9PSB2b2lkIDAgPyBfYiA6IDEuMDtcbiAgICAgICAgICAgIHN3aXRjaCAoYWN0aW9uLnN0eWxlKSB7XG4gICAgICAgICAgICAgICAgY2FzZSAnQk9YJzpcbiAgICAgICAgICAgICAgICBjYXNlICdTT0xJRF9DT0xPUic6XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuZHJhd1JlY3RhbmdsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB4LCB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJnYihwcmltYXJ5UkdCWzBdLCBwcmltYXJ5UkdCWzFdLCBwcmltYXJ5UkdCWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogY29uZmlnLmJvcmRlckNvbG9yID8gcmdiKC4uLnBhcnNlQ29sb3JUb1JHQihjb25maWcuYm9yZGVyQ29sb3IpKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiBjb25maWcuYm9yZGVyV2lkdGggfHwgMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnR1JBRElFTlQnOlxuICAgICAgICAgICAgICAgICAgICAvLyBQREYgZ3JhZGllbnRzIGFyZSBjb21wbGV4IC0gdXNlIHNvbGlkIGNvbG9yIGZvciBub3dcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5kcmF3UmVjdGFuZ2xlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgsIHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmdiKHByaW1hcnlSR0JbMF0sIHByaW1hcnlSR0JbMV0sIHByaW1hcnlSR0JbMl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnUEFUVEVSTic6XG4gICAgICAgICAgICAgICAgICAgIC8vIERyYXcgYmFja2dyb3VuZFxuICAgICAgICAgICAgICAgICAgICBwYWdlLmRyYXdSZWN0YW5nbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgeCwgeSwgd2lkdGg6IHcsIGhlaWdodDogaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZ2Ioc2Vjb25kYXJ5UkdCWzBdLCBzZWNvbmRhcnlSR0JbMV0sIHNlY29uZGFyeVJHQlsyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICAvLyBBZGQgcGF0dGVybiBvdmVybGF5XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHBhdHRlcm5UeXBlID0gY29uZmlnLnBhdHRlcm5UeXBlIHx8ICdkaWFnb25hbCc7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxpbmVDb2xvciA9IHJnYihwcmltYXJ5UkdCWzBdLCBwcmltYXJ5UkdCWzFdLCBwcmltYXJ5UkdCWzJdKTtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBhdHRlcm5UeXBlID09PSAnZGlhZ29uYWwnKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBmb3IgKGxldCBvZmZzZXQgPSAtaDsgb2Zmc2V0IDwgdyArIGg7IG9mZnNldCArPSA4KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcGFnZS5kcmF3TGluZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHN0YXJ0OiB7IHg6IHggKyBvZmZzZXQsIHk6IHkgfSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZW5kOiB7IHg6IHggKyBvZmZzZXQgKyBoLCB5OiB5ICsgaCB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogbGluZUNvbG9yLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aGlja25lc3M6IDIsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdWRUNUT1JfT1ZFUkxBWSc6XG4gICAgICAgICAgICAgICAgICAgIC8vIEVuaGFuY2VkIHZlY3RvciByZWRhY3Rpb24gd2l0aCBwcm9wZXIgUERGIHZlY3RvciBvcGVyYXRpb25zXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuZHJhd1JlY3RhbmdsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB4LCB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJnYihwcmltYXJ5UkdCWzBdLCBwcmltYXJ5UkdCWzFdLCBwcmltYXJ5UkdCWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHksXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXJDb2xvcjogY29uZmlnLmJvcmRlckNvbG9yID8gcmdiKC4uLnBhcnNlQ29sb3JUb1JHQihjb25maWcuYm9yZGVyQ29sb3IpKSA6IHVuZGVmaW5lZCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcldpZHRoOiBjb25maWcuYm9yZGVyV2lkdGggfHwgMFxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XG4gICAgICAgICAgICAgICAgY2FzZSAnTEFCRUwnOlxuICAgICAgICAgICAgICAgICAgICAvLyBEcmF3IGJhY2tncm91bmRcbiAgICAgICAgICAgICAgICAgICAgcGFnZS5kcmF3UmVjdGFuZ2xlKHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHgsIHksIHdpZHRoOiB3LCBoZWlnaHQ6IGgsXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogcmdiKHByaW1hcnlSR0JbMF0sIHByaW1hcnlSR0JbMV0sIHByaW1hcnlSR0JbMl0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyB0ZXh0XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGxhYmVsVGV4dCA9IGNvbmZpZy5sYWJlbFRleHQgfHwgYWN0aW9uLmxhYmVsVGV4dCB8fCBkZXQua2luZDtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZm9udFNpemUgPSBjb25maWcuZm9udFNpemUgfHwgTWF0aC5tYXgoOCwgaCAqIDAuNik7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1heENoYXJzID0gTWF0aC5mbG9vcigodyAtIDgpIC8gKGZvbnRTaXplICogMC42KSk7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IGxhYmVsVGV4dDtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGxhYmVsLmxlbmd0aCA+IG1heENoYXJzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYWJlbCA9IGxhYmVsLnNsaWNlKDAsIG1heENoYXJzID4gMyA/IG1heENoYXJzIC0gMSA6IDApICsgJ+KApic7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZXN0VGV4dFdpZHRoID0gbGFiZWwubGVuZ3RoICogZm9udFNpemUgKiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHhPZmZzZXQgPSAodyAtIGVzdFRleHRXaWR0aCkgLyAyO1xuICAgICAgICAgICAgICAgICAgICBwYWdlLmRyYXdUZXh0KGxhYmVsLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB4ICsgTWF0aC5tYXgoMCwgeE9mZnNldCksXG4gICAgICAgICAgICAgICAgICAgICAgICB5OiB5ICsgaCAvIDIgLSBmb250U2l6ZSAvIDIsXG4gICAgICAgICAgICAgICAgICAgICAgICBzaXplOiBmb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZ2Ioc2Vjb25kYXJ5UkdCWzBdLCBzZWNvbmRhcnlSR0JbMV0sIHNlY29uZGFyeVJHQlsyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBjYXNlICdNQVNLX0xBU1Q0JzpcbiAgICAgICAgICAgICAgICAgICAgLy8gRHJhdyBiYWNrZ3JvdW5kXG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuZHJhd1JlY3RhbmdsZSh7XG4gICAgICAgICAgICAgICAgICAgICAgICB4LCB5LCB3aWR0aDogdywgaGVpZ2h0OiBoLFxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6IHJnYihwcmltYXJ5UkdCWzBdLCBwcmltYXJ5UkdCWzFdLCBwcmltYXJ5UkdCWzJdKSxcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHlcbiAgICAgICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSBtYXNrZWQgdGV4dFxuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmV2aWV3ID0gZGV0LnByZXZpZXcgfHwgJyc7XG4gICAgICAgICAgICAgICAgICAgIGxldCBtYXNrZWQgPSAnJztcbiAgICAgICAgICAgICAgICAgICAgbGV0IHJlbWFpbmluZyA9IDQ7XG4gICAgICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSBwcmV2aWV3Lmxlbmd0aCAtIDE7IGkgPj0gMDsgaS0tKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBjaCA9IHByZXZpZXdbaV07XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoL1xcdy8udGVzdChjaCkgJiYgcmVtYWluaW5nID4gMCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hc2tlZCA9IGNoICsgbWFza2VkO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlbWFpbmluZy0tO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgZWxzZSBpZiAoL1xcdy8udGVzdChjaCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrZWQgPSAnKicgKyBtYXNrZWQ7XG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXNrZWQgPSBjaCArIG1hc2tlZDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBjb25zdCBtYXNrRm9udFNpemUgPSBNYXRoLm1heCg4LCBoICogMC42KTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgbWFza1RleHRXaWR0aCA9IG1hc2tlZC5sZW5ndGggKiBtYXNrRm9udFNpemUgKiAwLjY7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hc2tYT2Zmc2V0ID0gKHcgLSBtYXNrVGV4dFdpZHRoKSAvIDI7XG4gICAgICAgICAgICAgICAgICAgIHBhZ2UuZHJhd1RleHQobWFza2VkLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICB4OiB4ICsgTWF0aC5tYXgoMCwgbWFza1hPZmZzZXQpLFxuICAgICAgICAgICAgICAgICAgICAgICAgeTogeSArIGggLyAyIC0gbWFza0ZvbnRTaXplIC8gMixcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU6IG1hc2tGb250U2l6ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZ2Ioc2Vjb25kYXJ5UkdCWzBdLCBzZWNvbmRhcnlSR0JbMV0sIHNlY29uZGFyeVJHQlsyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgICAgICBicmVhaztcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAvLyBEZWZhdWx0IHRvIHNvbGlkIHJlY3RhbmdsZVxuICAgICAgICAgICAgICAgICAgICBwYWdlLmRyYXdSZWN0YW5nbGUoe1xuICAgICAgICAgICAgICAgICAgICAgICAgeCwgeSwgd2lkdGg6IHcsIGhlaWdodDogaCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiByZ2IocHJpbWFyeVJHQlswXSwgcHJpbWFyeVJHQlsxXSwgcHJpbWFyeVJHQlsyXSksXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiBvcGFjaXR5XG4gICAgICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuICAgIGNvbnN0IHBkZkJ5dGVzID0gYXdhaXQgbmV3UGRmLnNhdmUoKTtcbiAgICBjb25zdCBiYXNlNjQgPSB0eXBlb2YgQnVmZmVyICE9PSAndW5kZWZpbmVkJyA/IEJ1ZmZlci5mcm9tKHBkZkJ5dGVzKS50b1N0cmluZygnYmFzZTY0JykgOiBidG9hKFN0cmluZy5mcm9tQ2hhckNvZGUoLi4ubmV3IFVpbnQ4QXJyYXkocGRmQnl0ZXMpKSk7XG4gICAgcmV0dXJuIGBkYXRhOmFwcGxpY2F0aW9uL3BkZjtiYXNlNjQsJHtiYXNlNjR9YDtcbn1cbi8qKlxuICogQXBwbHkgcmVkYWN0aW9ucyB0byBhIGZpbGUgdXNpbmcgdGhlIHByZXZpb3VzbHkgYW5hbHlzZWQgZGV0ZWN0aW9ucy5cbiAqXG4gKiBOb3RlOiBUaGlzIGltcGxlbWVudGF0aW9uIHJlbGllcyBvbiBgbGFzdFJlc3VsdGAgc2V0IGJ5IGFuYWx5emVEb2N1bWVudCgpLlxuICogSW4gYSByZWFsIGFwcGxpY2F0aW9uIHlvdSBzaG91bGQgcGFzcyB0aGUgZGV0ZWN0aW9ucyBleHBsaWNpdGx5IHRvIGF2b2lkXG4gKiBoaWRkZW4gc3RhdGUuXG4gKi9cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBhcHBseVJlZGFjdGlvbnMoZmlsZSwgYWN0aW9ucywgb3B0cywgZGV0ZWN0aW9ucykge1xuICAgIHZhciBfYTtcbiAgICAvLyBJZiBkZXRlY3Rpb25zIGFyZSBwcm92aWRlZCBkaXJlY3RseSwgY3JlYXRlIGEgdGVtcG9yYXJ5IHJlc3VsdCBvYmplY3RcbiAgICBsZXQgcmVzdWx0ID0gbGFzdFJlc3VsdDtcbiAgICBpZiAoZGV0ZWN0aW9ucyAmJiBkZXRlY3Rpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgcmVzdWx0ID0ge1xuICAgICAgICAgICAgZGV0ZWN0aW9uczogZGV0ZWN0aW9ucyxcbiAgICAgICAgICAgIHBhZ2VzOiBNYXRoLm1heCguLi5kZXRlY3Rpb25zLm1hcChkID0+IHsgdmFyIF9hOyByZXR1cm4gKF9hID0gZC5ib3gucGFnZSkgIT09IG51bGwgJiYgX2EgIT09IHZvaWQgMCA/IF9hIDogMDsgfSkpICsgMSB8fCAxXG4gICAgICAgIH07XG4gICAgfVxuICAgIGlmICghcmVzdWx0KSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gYW5hbHlzaXMgcmVzdWx0IGF2YWlsYWJsZS4gIENhbGwgYW5hbHl6ZURvY3VtZW50KCkgZmlyc3QuJyk7XG4gICAgfVxuICAgIGNvbnN0IG1pbWUgPSBmaWxlLnR5cGUgfHwgJyc7XG4gICAgbGV0IGZpbGVVcmk7XG4gICAgaWYgKG1pbWUgPT09ICdhcHBsaWNhdGlvbi9wZGYnIHx8IG9wdHMub3V0cHV0ID09PSAncGRmJykge1xuICAgICAgICBmaWxlVXJpID0gYXdhaXQgYXBwbHlSZWRhY3Rpb25zVG9QZGYoZmlsZSwgYWN0aW9ucywgcmVzdWx0LCBvcHRzKTtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIGNvbnN0IHF1YWxpdHkgPSAoX2EgPSBvcHRzLnF1YWxpdHkpICE9PSBudWxsICYmIF9hICE9PSB2b2lkIDAgPyBfYSA6IDAuOTI7XG4gICAgICAgIGZpbGVVcmkgPSBhd2FpdCBhcHBseVJlZGFjdGlvbnNUb0ltYWdlKGZpbGUsIGFjdGlvbnMsIHF1YWxpdHksIHJlc3VsdCk7XG4gICAgfVxuICAgIC8vIEJ1aWxkIGEgc2ltcGxlIHJlcG9ydCBzdW1tYXJpc2luZyByZWRhY3Rpb25zXG4gICAgY29uc3QgcmVwb3J0ID0ge307XG4gICAgaWYgKHJlc3VsdCkge1xuICAgICAgICByZXBvcnQudG90YWxEZXRlY3Rpb25zID0gcmVzdWx0LmRldGVjdGlvbnMubGVuZ3RoO1xuICAgICAgICByZXBvcnQucmVkYWN0ZWRDb3VudCA9IGFjdGlvbnMubGVuZ3RoO1xuICAgICAgICBjb25zdCBjb3VudHMgPSB7fTtcbiAgICAgICAgZm9yIChjb25zdCBhY3Rpb24gb2YgYWN0aW9ucykge1xuICAgICAgICAgICAgY29uc3QgZGV0ID0gcmVzdWx0LmRldGVjdGlvbnMuZmluZChkID0+IGQuaWQgPT09IGFjdGlvbi5kZXRlY3Rpb25JZCk7XG4gICAgICAgICAgICBpZiAoZGV0KSB7XG4gICAgICAgICAgICAgICAgY291bnRzW2RldC5raW5kXSA9IChjb3VudHNbZGV0LmtpbmRdIHx8IDApICsgMTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXBvcnQuYnlLaW5kID0gY291bnRzO1xuICAgIH1cbiAgICByZXR1cm4geyBmaWxlVXJpLCByZXBvcnQgfTtcbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../core-detect/dist/pipeline/apply.js\n");

/***/ }),

/***/ "../core-detect/dist/presets.js":
/*!**************************************!*\
  !*** ../core-detect/dist/presets.js ***!
  \**************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   PRESETS: () => (/* binding */ PRESETS),\n/* harmony export */   deletePreset: () => (/* binding */ deletePreset),\n/* harmony export */   getPreset: () => (/* binding */ getPreset),\n/* harmony export */   listPresets: () => (/* binding */ listPresets),\n/* harmony export */   savePreset: () => (/* binding */ savePreset)\n/* harmony export */ });\n// Predefined presets.  These can be customised by the user at runtime via the UI.\nconst PRESETS = [\n    {\n        id: 'developer',\n        name: 'Developer Secrets',\n        enabledKinds: ['EMAIL', 'PHONE', 'PAN', 'JWT', 'API_KEY', 'IBAN', 'SSN', 'PASSPORT'],\n        styleMap: {},\n        customRegex: []\n    },\n    {\n        id: 'work',\n        name: 'Work Screenshot',\n        enabledKinds: ['EMAIL', 'PHONE', 'PAN', 'JWT', 'API_KEY', 'NAME', 'ADDRESS', 'PASSPORT'],\n        styleMap: {},\n        customRegex: []\n    },\n    {\n        id: 'all',\n        name: 'All Detectors',\n        enabledKinds: ['FACE', 'EMAIL', 'PHONE', 'PAN', 'IBAN', 'SSN', 'PASSPORT', 'JWT', 'API_KEY', 'BARCODE', 'NAME', 'ADDRESS', 'OTHER'],\n        styleMap: {},\n        customRegex: []\n    }\n];\n/** Return all registered presets. */\nfunction listPresets() {\n    return PRESETS.slice();\n}\n/** Lookup a preset by its ID. */\nfunction getPreset(id) {\n    return PRESETS.find(p => p.id === id);\n}\n/** Save or update a preset.  If the ID exists, it will be replaced; otherwise it is added. */\nfunction savePreset(preset) {\n    const index = PRESETS.findIndex(p => p.id === preset.id);\n    if (index >= 0) {\n        PRESETS[index] = preset;\n    }\n    else {\n        PRESETS.push(preset);\n    }\n}\n/** Delete a preset by its ID.  If the preset does not exist, no action is taken. */\nfunction deletePreset(id) {\n    const index = PRESETS.findIndex(p => p.id === id);\n    if (index >= 0) {\n        PRESETS.splice(index, 1);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29yZS1kZXRlY3QvZGlzdC9wcmVzZXRzLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUE7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0JBQW9CO0FBQ3BCO0FBQ0E7QUFDQTtBQUNBO0FBQ087QUFDUDtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQSxxRUFBcUU7QUFDOUQ7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDTztBQUNQO0FBQ0E7QUFDQTtBQUNBO0FBQ0EiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY2xlYW5zaGFyZS91aS8uLi9jb3JlLWRldGVjdC9kaXN0L3ByZXNldHMuanM/MjI4MiJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBQcmVkZWZpbmVkIHByZXNldHMuICBUaGVzZSBjYW4gYmUgY3VzdG9taXNlZCBieSB0aGUgdXNlciBhdCBydW50aW1lIHZpYSB0aGUgVUkuXG5leHBvcnQgY29uc3QgUFJFU0VUUyA9IFtcbiAgICB7XG4gICAgICAgIGlkOiAnZGV2ZWxvcGVyJyxcbiAgICAgICAgbmFtZTogJ0RldmVsb3BlciBTZWNyZXRzJyxcbiAgICAgICAgZW5hYmxlZEtpbmRzOiBbJ0VNQUlMJywgJ1BIT05FJywgJ1BBTicsICdKV1QnLCAnQVBJX0tFWScsICdJQkFOJywgJ1NTTicsICdQQVNTUE9SVCddLFxuICAgICAgICBzdHlsZU1hcDoge30sXG4gICAgICAgIGN1c3RvbVJlZ2V4OiBbXVxuICAgIH0sXG4gICAge1xuICAgICAgICBpZDogJ3dvcmsnLFxuICAgICAgICBuYW1lOiAnV29yayBTY3JlZW5zaG90JyxcbiAgICAgICAgZW5hYmxlZEtpbmRzOiBbJ0VNQUlMJywgJ1BIT05FJywgJ1BBTicsICdKV1QnLCAnQVBJX0tFWScsICdOQU1FJywgJ0FERFJFU1MnLCAnUEFTU1BPUlQnXSxcbiAgICAgICAgc3R5bGVNYXA6IHt9LFxuICAgICAgICBjdXN0b21SZWdleDogW11cbiAgICB9LFxuICAgIHtcbiAgICAgICAgaWQ6ICdhbGwnLFxuICAgICAgICBuYW1lOiAnQWxsIERldGVjdG9ycycsXG4gICAgICAgIGVuYWJsZWRLaW5kczogWydGQUNFJywgJ0VNQUlMJywgJ1BIT05FJywgJ1BBTicsICdJQkFOJywgJ1NTTicsICdQQVNTUE9SVCcsICdKV1QnLCAnQVBJX0tFWScsICdCQVJDT0RFJywgJ05BTUUnLCAnQUREUkVTUycsICdPVEhFUiddLFxuICAgICAgICBzdHlsZU1hcDoge30sXG4gICAgICAgIGN1c3RvbVJlZ2V4OiBbXVxuICAgIH1cbl07XG4vKiogUmV0dXJuIGFsbCByZWdpc3RlcmVkIHByZXNldHMuICovXG5leHBvcnQgZnVuY3Rpb24gbGlzdFByZXNldHMoKSB7XG4gICAgcmV0dXJuIFBSRVNFVFMuc2xpY2UoKTtcbn1cbi8qKiBMb29rdXAgYSBwcmVzZXQgYnkgaXRzIElELiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGdldFByZXNldChpZCkge1xuICAgIHJldHVybiBQUkVTRVRTLmZpbmQocCA9PiBwLmlkID09PSBpZCk7XG59XG4vKiogU2F2ZSBvciB1cGRhdGUgYSBwcmVzZXQuICBJZiB0aGUgSUQgZXhpc3RzLCBpdCB3aWxsIGJlIHJlcGxhY2VkOyBvdGhlcndpc2UgaXQgaXMgYWRkZWQuICovXG5leHBvcnQgZnVuY3Rpb24gc2F2ZVByZXNldChwcmVzZXQpIHtcbiAgICBjb25zdCBpbmRleCA9IFBSRVNFVFMuZmluZEluZGV4KHAgPT4gcC5pZCA9PT0gcHJlc2V0LmlkKTtcbiAgICBpZiAoaW5kZXggPj0gMCkge1xuICAgICAgICBQUkVTRVRTW2luZGV4XSA9IHByZXNldDtcbiAgICB9XG4gICAgZWxzZSB7XG4gICAgICAgIFBSRVNFVFMucHVzaChwcmVzZXQpO1xuICAgIH1cbn1cbi8qKiBEZWxldGUgYSBwcmVzZXQgYnkgaXRzIElELiAgSWYgdGhlIHByZXNldCBkb2VzIG5vdCBleGlzdCwgbm8gYWN0aW9uIGlzIHRha2VuLiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGRlbGV0ZVByZXNldChpZCkge1xuICAgIGNvbnN0IGluZGV4ID0gUFJFU0VUUy5maW5kSW5kZXgocCA9PiBwLmlkID09PSBpZCk7XG4gICAgaWYgKGluZGV4ID49IDApIHtcbiAgICAgICAgUFJFU0VUUy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgIH1cbn1cbiJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///../core-detect/dist/presets.js\n");

/***/ }),

/***/ "../core-detect/dist/types.js":
/*!************************************!*\
  !*** ../core-detect/dist/types.js ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiLi4vY29yZS1kZXRlY3QvZGlzdC90eXBlcy5qcyIsIm1hcHBpbmdzIjoiO0FBQVUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AY2xlYW5zaGFyZS91aS8uLi9jb3JlLWRldGVjdC9kaXN0L3R5cGVzLmpzP2I1NjMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IHt9O1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///../core-detect/dist/types.js\n");

/***/ }),

/***/ "jsqr":
/*!***********************!*\
  !*** external "jsqr" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("jsqr");

/***/ }),

/***/ "next/dist/compiled/next-server/pages.runtime.dev.js":
/*!**********************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages.runtime.dev.js" ***!
  \**********************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/pages.runtime.dev.js");

/***/ }),

/***/ "pdfjs-dist":
/*!*****************************!*\
  !*** external "pdfjs-dist" ***!
  \*****************************/
/***/ ((module) => {

"use strict";
module.exports = require("pdfjs-dist");

/***/ }),

/***/ "pdfjs-dist/build/pdf.worker.js":
/*!*************************************************!*\
  !*** external "pdfjs-dist/build/pdf.worker.js" ***!
  \*************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("pdfjs-dist/build/pdf.worker.js");

/***/ }),

/***/ "react":
/*!************************!*\
  !*** external "react" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("react");

/***/ }),

/***/ "react/jsx-runtime":
/*!************************************!*\
  !*** external "react/jsx-runtime" ***!
  \************************************/
/***/ ((module) => {

"use strict";
module.exports = require("react/jsx-runtime");

/***/ }),

/***/ "uuid":
/*!***********************!*\
  !*** external "uuid" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = import("uuid");;

/***/ }),

/***/ "fs":
/*!*********************!*\
  !*** external "fs" ***!
  \*********************/
/***/ ((module) => {

"use strict";
module.exports = require("fs");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "path":
/*!***********************!*\
  !*** external "path" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("path");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "util":
/*!***********************!*\
  !*** external "util" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("util");

/***/ }),

/***/ "worker_threads":
/*!*********************************!*\
  !*** external "worker_threads" ***!
  \*********************************/
/***/ ((module) => {

"use strict";
module.exports = require("worker_threads");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "?60a5":
/*!**************************!*\
  !*** encoding (ignored) ***!
  \**************************/
/***/ (() => {

/* (ignored) */

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0","vendor-chunks/@swc+helpers@0.5.2","vendor-chunks/pdf-lib@1.17.1","vendor-chunks/tesseract.js@4.1.4","vendor-chunks/@pdf-lib+standard-fonts@1.0.0","vendor-chunks/pako@1.0.11","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/tr46@0.0.3","vendor-chunks/webidl-conversions@3.0.1","vendor-chunks/tslib@1.14.1","vendor-chunks/regenerator-runtime@0.13.11","vendor-chunks/node-fetch@2.7.0","vendor-chunks/is-url@1.2.4","vendor-chunks/is-electron@2.2.2","vendor-chunks/@pdf-lib+upng@1.0.1"], () => (__webpack_exec__("../../node_modules/.pnpm/next@14.1.0_@babel+core@7.28.3_react-dom@18.2.0_react@18.2.0__react@18.2.0/node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES&page=%2F&preferredRegion=&absolutePagePath=.%2Fpages%2Findex.tsx&absoluteAppPath=private-next-pages%2F_app&absoluteDocumentPath=private-next-pages%2F_document&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();